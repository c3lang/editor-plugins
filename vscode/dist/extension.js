var b_=Object.create;var bs=Object.defineProperty;var w_=Object.getOwnPropertyDescriptor;var R_=Object.getOwnPropertyNames;var S_=Object.getPrototypeOf,D_=Object.prototype.hasOwnProperty;var O=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),T_=(n,e)=>{for(var t in e)bs(n,t,{get:e[t],enumerable:!0})},wh=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of R_(e))!D_.call(n,i)&&i!==t&&bs(n,i,{get:()=>e[i],enumerable:!(r=w_(e,i))||r.enumerable});return n};var Rh=(n,e,t)=>(t=n!=null?b_(S_(n)):{},wh(e||!n||!n.__esModule?bs(t,"default",{value:n,enumerable:!0}):t,n)),P_=n=>wh(bs({},"__esModule",{value:!0}),n);var zr=O(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.stringArray=kt.array=kt.func=kt.error=kt.number=kt.string=kt.boolean=void 0;function E_(n){return n===!0||n===!1}kt.boolean=E_;function Sh(n){return typeof n=="string"||n instanceof String}kt.string=Sh;function q_(n){return typeof n=="number"||n instanceof Number}kt.number=q_;function k_(n){return n instanceof Error}kt.error=k_;function O_(n){return typeof n=="function"}kt.func=O_;function Dh(n){return Array.isArray(n)}kt.array=Dh;function x_(n){return Dh(n)&&n.every(e=>Sh(e))}kt.stringArray=x_});var ic=O(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.Message=ne.NotificationType9=ne.NotificationType8=ne.NotificationType7=ne.NotificationType6=ne.NotificationType5=ne.NotificationType4=ne.NotificationType3=ne.NotificationType2=ne.NotificationType1=ne.NotificationType0=ne.NotificationType=ne.RequestType9=ne.RequestType8=ne.RequestType7=ne.RequestType6=ne.RequestType5=ne.RequestType4=ne.RequestType3=ne.RequestType2=ne.RequestType1=ne.RequestType=ne.RequestType0=ne.AbstractMessageSignature=ne.ParameterStructures=ne.ResponseError=ne.ErrorCodes=void 0;var Pr=zr(),Na;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(Na||(ne.ErrorCodes=Na={}));var Fa=class n extends Error{constructor(e,t,r){super(t),this.code=Pr.number(e)?e:Na.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};ne.ResponseError=Fa;var zt=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};ne.ParameterStructures=zt;zt.auto=new zt("auto");zt.byPosition=new zt("byPosition");zt.byName=new zt("byName");var Ve=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return zt.auto}};ne.AbstractMessageSignature=Ve;var Ma=class extends Ve{constructor(e){super(e,0)}};ne.RequestType0=Ma;var La=class extends Ve{constructor(e,t=zt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};ne.RequestType=La;var ja=class extends Ve{constructor(e,t=zt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};ne.RequestType1=ja;var Aa=class extends Ve{constructor(e){super(e,2)}};ne.RequestType2=Aa;var $a=class extends Ve{constructor(e){super(e,3)}};ne.RequestType3=$a;var Ha=class extends Ve{constructor(e){super(e,4)}};ne.RequestType4=Ha;var Ua=class extends Ve{constructor(e){super(e,5)}};ne.RequestType5=Ua;var Wa=class extends Ve{constructor(e){super(e,6)}};ne.RequestType6=Wa;var Ka=class extends Ve{constructor(e){super(e,7)}};ne.RequestType7=Ka;var za=class extends Ve{constructor(e){super(e,8)}};ne.RequestType8=za;var Va=class extends Ve{constructor(e){super(e,9)}};ne.RequestType9=Va;var Ba=class extends Ve{constructor(e,t=zt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};ne.NotificationType=Ba;var Ga=class extends Ve{constructor(e){super(e,0)}};ne.NotificationType0=Ga;var Xa=class extends Ve{constructor(e,t=zt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};ne.NotificationType1=Xa;var Ja=class extends Ve{constructor(e){super(e,2)}};ne.NotificationType2=Ja;var Qa=class extends Ve{constructor(e){super(e,3)}};ne.NotificationType3=Qa;var Ya=class extends Ve{constructor(e){super(e,4)}};ne.NotificationType4=Ya;var Za=class extends Ve{constructor(e){super(e,5)}};ne.NotificationType5=Za;var ec=class extends Ve{constructor(e){super(e,6)}};ne.NotificationType6=ec;var tc=class extends Ve{constructor(e){super(e,7)}};ne.NotificationType7=tc;var nc=class extends Ve{constructor(e){super(e,8)}};ne.NotificationType8=nc;var rc=class extends Ve{constructor(e){super(e,9)}};ne.NotificationType9=rc;var Th;(function(n){function e(i){let s=i;return s&&Pr.string(s.method)&&(Pr.string(s.id)||Pr.number(s.id))}n.isRequest=e;function t(i){let s=i;return s&&Pr.string(s.method)&&i.id===void 0}n.isNotification=t;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(Pr.string(s.id)||Pr.number(s.id)||s.id===null)}n.isResponse=r})(Th||(ne.Message=Th={}))});var oc=O(or=>{"use strict";var Ph;Object.defineProperty(or,"__esModule",{value:!0});or.LRUCache=or.LinkedMap=or.Touch=void 0;var Ot;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(Ot||(or.Touch=Ot={}));var ws=class{constructor(){this[Ph]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=Ot.None){let r=this._map.get(e);if(r)return t!==Ot.None&&this.touch(r,t),r.value}set(e,t,r=Ot.None){let i=this._map.get(e);if(i)i.value=t,r!==Ot.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case Ot.None:this.addItemLast(i);break;case Ot.First:this.addItemFirst(i);break;case Ot.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(Ph=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==Ot.First&&t!==Ot.Last)){if(t===Ot.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===Ot.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};or.LinkedMap=ws;var sc=class extends ws{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=Ot.AsNew){return super.get(e,t)}peek(e){return super.get(e,Ot.None)}set(e,t){return super.set(e,t,Ot.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};or.LRUCache=sc});var qh=O(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Disposable=void 0;var Eh;(function(n){function e(t){return{dispose:t}}n.create=e})(Eh||(Rs.Disposable=Eh={}))});var ar=O(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});var ac;function cc(){if(ac===void 0)throw new Error("No runtime abstraction layer installed");return ac}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");ac=t}n.install=e})(cc||(cc={}));uc.default=cc});var Br=O(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.Emitter=Vr.Event=void 0;var I_=ar(),kh;(function(n){let e={dispose(){}};n.None=function(){return e}})(kh||(Vr.Event=kh={}));var dc=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{t.push(r[s].apply(i[s],e))}catch(a){(0,I_.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ss=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new dc),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Vr.Emitter=Ss;Ss._noop=function(){}});var Ps=O(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.CancellationTokenSource=Gr.CancellationToken=void 0;var N_=ar(),F_=zr(),lc=Br(),Ds;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:lc.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:lc.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||F_.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(Ds||(Gr.CancellationToken=Ds={}));var M_=Object.freeze(function(n,e){let t=(0,N_.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Ts=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?M_:(this._emitter||(this._emitter=new lc.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},fc=class{get token(){return this._token||(this._token=new Ts),this._token}cancel(){this._token?this._token.cancel():this._token=Ds.Cancelled}dispose(){this._token?this._token instanceof Ts&&this._token.dispose():this._token=Ds.None}};Gr.CancellationTokenSource=fc});var Oh=O(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.SharedArrayReceiverStrategy=Xr.SharedArraySenderStrategy=void 0;var L_=Ps(),xi;(function(n){n.Continue=0,n.Cancelled=1})(xi||(xi={}));var hc=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=xi.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,xi.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Xr.SharedArraySenderStrategy=hc;var pc=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===xi.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},gc=class{constructor(e){this.token=new pc(e)}cancel(){}dispose(){}},mc=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new L_.CancellationTokenSource:new gc(t)}};Xr.SharedArrayReceiverStrategy=mc});var vc=O(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.Semaphore=void 0;var j_=ar(),yc=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,j_.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Es.Semaphore=yc});var Ih=O(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.ReadableStreamMessageReader=cr.AbstractMessageReader=cr.MessageReader=void 0;var _c=ar(),Jr=zr(),Cc=Br(),A_=vc(),xh;(function(n){function e(t){let r=t;return r&&Jr.func(r.listen)&&Jr.func(r.dispose)&&Jr.func(r.onError)&&Jr.func(r.onClose)&&Jr.func(r.onPartialMessage)}n.is=e})(xh||(cr.MessageReader=xh={}));var qs=class{constructor(){this.errorEmitter=new Cc.Emitter,this.closeEmitter=new Cc.Emitter,this.partialMessageEmitter=new Cc.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${Jr.string(e.message)?e.message:"unknown"}`)}};cr.AbstractMessageReader=qs;var bc;(function(n){function e(t){let r,i,s,o=new Map,a,u=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let h of t.contentDecoders)o.set(h.name,h);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,u.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let h of t.contentTypeDecoders)u.set(h.name,h)}return a===void 0&&(a=(0,_c.default)().applicationJson.decoder,u.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}n.fromOptions=e})(bc||(bc={}));var wc=class extends qs{constructor(e,t){super(),this.readable=e,this.options=bc.fromOptions(t),this.buffer=(0,_c.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new A_.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,_c.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};cr.ReadableStreamMessageReader=wc});var jh=O(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.WriteableStreamMessageWriter=ur.AbstractMessageWriter=ur.MessageWriter=void 0;var Nh=ar(),Ii=zr(),$_=vc(),Fh=Br(),H_="Content-Length: ",Mh=`\r
`,Lh;(function(n){function e(t){let r=t;return r&&Ii.func(r.dispose)&&Ii.func(r.onClose)&&Ii.func(r.onError)&&Ii.func(r.write)}n.is=e})(Lh||(ur.MessageWriter=Lh={}));var ks=class{constructor(){this.errorEmitter=new Fh.Emitter,this.closeEmitter=new Fh.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ii.string(e.message)?e.message:"unknown"}`)}};ur.AbstractMessageWriter=ks;var Rc;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,Nh.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,Nh.default)().applicationJson.encoder}}n.fromOptions=e})(Rc||(Rc={}));var Sc=class extends ks{constructor(e,t){super(),this.writable=e,this.options=Rc.fromOptions(t),this.errorCount=0,this.writeSemaphore=new $_.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(H_,r.byteLength.toString(),Mh),i.push(Mh),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};ur.WriteableStreamMessageWriter=Sc});var Ah=O(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.AbstractMessageBuffer=void 0;var U_=13,W_=10,K_=`\r
`,Dc=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let h=this._chunks[r];for(i=0;i<h.length;){switch(h[i]){case U_:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case W_:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=h.byteLength,r++}if(t!==4)return;let o=this._read(s+i),a=new Map,u=this.toString(o,"ascii").split(K_);if(u.length<2)return a;for(let h=0;h<u.length-2;h++){let g=u[h],C=g.indexOf(":");if(C===-1)throw new Error(`Message header must separate key and value using ':'
${g}`);let y=g.substr(0,C),D=g.substr(C+1).trim();a.set(e?y.toLowerCase():y,D)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};Os.AbstractMessageBuffer=Dc});var Kh=O(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.createMessageConnection=ge.ConnectionOptions=ge.MessageStrategy=ge.CancellationStrategy=ge.CancellationSenderStrategy=ge.CancellationReceiverStrategy=ge.RequestCancellationReceiverStrategy=ge.IdCancellationReceiverStrategy=ge.ConnectionStrategy=ge.ConnectionError=ge.ConnectionErrors=ge.LogTraceNotification=ge.SetTraceNotification=ge.TraceFormat=ge.TraceValues=ge.Trace=ge.NullLogger=ge.ProgressType=ge.ProgressToken=void 0;var $h=ar(),et=zr(),ae=ic(),Hh=oc(),Ni=Br(),Tc=Ps(),Li;(function(n){n.type=new ae.NotificationType("$/cancelRequest")})(Li||(Li={}));var Pc;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(Pc||(ge.ProgressToken=Pc={}));var Fi;(function(n){n.type=new ae.NotificationType("$/progress")})(Fi||(Fi={}));var Ec=class{constructor(){}};ge.ProgressType=Ec;var qc;(function(n){function e(t){return et.func(t)}n.is=e})(qc||(qc={}));ge.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var ke;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(ke||(ge.Trace=ke={}));var Uh;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(Uh||(ge.TraceValues=Uh={}));(function(n){function e(r){if(!et.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(ke||(ge.Trace=ke={}));var dn;(function(n){n.Text="text",n.JSON="json"})(dn||(ge.TraceFormat=dn={}));(function(n){function e(t){return et.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(dn||(ge.TraceFormat=dn={}));var kc;(function(n){n.type=new ae.NotificationType("$/setTrace")})(kc||(ge.SetTraceNotification=kc={}));var xs;(function(n){n.type=new ae.NotificationType("$/logTrace")})(xs||(ge.LogTraceNotification=xs={}));var Mi;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(Mi||(ge.ConnectionErrors=Mi={}));var Qr=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};ge.ConnectionError=Qr;var Oc;(function(n){function e(t){let r=t;return r&&et.func(r.cancelUndispatched)}n.is=e})(Oc||(ge.ConnectionStrategy=Oc={}));var Is;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&et.func(r.createCancellationTokenSource)&&(r.dispose===void 0||et.func(r.dispose))}n.is=e})(Is||(ge.IdCancellationReceiverStrategy=Is={}));var xc;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&et.func(r.createCancellationTokenSource)&&(r.dispose===void 0||et.func(r.dispose))}n.is=e})(xc||(ge.RequestCancellationReceiverStrategy=xc={}));var Ns;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new Tc.CancellationTokenSource}});function e(t){return Is.is(t)||xc.is(t)}n.is=e})(Ns||(ge.CancellationReceiverStrategy=Ns={}));var Fs;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(Li.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&et.func(r.sendCancellation)&&et.func(r.cleanup)}n.is=e})(Fs||(ge.CancellationSenderStrategy=Fs={}));var Ms;(function(n){n.Message=Object.freeze({receiver:Ns.Message,sender:Fs.Message});function e(t){let r=t;return r&&Ns.is(r.receiver)&&Fs.is(r.sender)}n.is=e})(Ms||(ge.CancellationStrategy=Ms={}));var Ls;(function(n){function e(t){let r=t;return r&&et.func(r.handleMessage)}n.is=e})(Ls||(ge.MessageStrategy=Ls={}));var Wh;(function(n){function e(t){let r=t;return r&&(Ms.is(r.cancellationStrategy)||Oc.is(r.connectionStrategy)||Ls.is(r.messageStrategy))}n.is=e})(Wh||(ge.ConnectionOptions=Wh={}));var In;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(In||(In={}));function z_(n,e,t,r){let i=t!==void 0?t:ge.NullLogger,s=0,o=0,a=0,u="2.0",h,g=new Map,C,y=new Map,D=new Map,v,q=new Hh.LinkedMap,k=new Map,A=new Set,$=new Map,M=ke.Off,W=dn.Text,z,le=In.New,B=new Ni.Emitter,se=new Ni.Emitter,Ce=new Ni.Emitter,Xe=new Ni.Emitter,ze=new Ni.Emitter,Ne=r&&r.cancellationStrategy?r.cancellationStrategy:Ms.Message;function jt(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function St(d){return d===null?"res-unknown-"+(++a).toString():"res-"+d.toString()}function pt(){return"not-"+(++o).toString()}function gt(d,b){ae.Message.isRequest(b)?d.set(jt(b.id),b):ae.Message.isResponse(b)?d.set(St(b.id),b):d.set(pt(),b)}function en(d){}function tn(){return le===In.Listening}function Fe(){return le===In.Closed}function dt(){return le===In.Disposed}function Ct(){(le===In.New||le===In.Listening)&&(le=In.Closed,se.fire(void 0))}function mt(d){B.fire([d,void 0,void 0])}function $n(d){B.fire(d)}n.onClose(Ct),n.onError(mt),e.onClose(Ct),e.onError($n);function nn(){v||q.size===0||(v=(0,$h.default)().timer.setImmediate(()=>{v=void 0,kn()}))}function rn(d){ae.Message.isRequest(d)?vn(d):ae.Message.isNotification(d)?on(d):ae.Message.isResponse(d)?sn(d):Cn(d)}function kn(){if(q.size===0)return;let d=q.shift();try{let b=r?.messageStrategy;Ls.is(b)?b.handleMessage(d,rn):rn(d)}finally{nn()}}let Hn=d=>{try{if(ae.Message.isNotification(d)&&d.method===Li.type.method){let b=d.params.id,P=jt(b),I=q.get(P);if(ae.Message.isRequest(I)){let Y=r?.connectionStrategy,ie=Y&&Y.cancelUndispatched?Y.cancelUndispatched(I,en):void 0;if(ie&&(ie.error!==void 0||ie.result!==void 0)){q.delete(P),$.delete(b),ie.id=I.id,Dt(ie,d.method,Date.now()),e.write(ie).catch(()=>i.error("Sending response for canceled message failed."));return}}let ee=$.get(b);if(ee!==void 0){ee.cancel(),qt(d);return}else A.add(b)}gt(q,d)}finally{nn()}};function vn(d){if(dt())return;function b(V,te,Q){let de={jsonrpc:u,id:d.id};V instanceof ae.ResponseError?de.error=V.toJson():de.result=V===void 0?null:V,Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}function P(V,te,Q){let de={jsonrpc:u,id:d.id,error:V.toJson()};Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}function I(V,te,Q){V===void 0&&(V=null);let de={jsonrpc:u,id:d.id,result:V};Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}Un(d);let ee=g.get(d.method),Y,ie;ee&&(Y=ee.type,ie=ee.handler);let oe=Date.now();if(ie||h){let V=d.id??String(Date.now()),te=Is.is(Ne.receiver)?Ne.receiver.createCancellationTokenSource(V):Ne.receiver.createCancellationTokenSource(d);d.id!==null&&A.has(d.id)&&te.cancel(),d.id!==null&&$.set(V,te);try{let Q;if(ie)if(d.params===void 0){if(Y!==void 0&&Y.numberOfParams!==0){P(new ae.ResponseError(ae.ErrorCodes.InvalidParams,`Request ${d.method} defines ${Y.numberOfParams} params but received none.`),d.method,oe);return}Q=ie(te.token)}else if(Array.isArray(d.params)){if(Y!==void 0&&Y.parameterStructures===ae.ParameterStructures.byName){P(new ae.ResponseError(ae.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,oe);return}Q=ie(...d.params,te.token)}else{if(Y!==void 0&&Y.parameterStructures===ae.ParameterStructures.byPosition){P(new ae.ResponseError(ae.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,oe);return}Q=ie(d.params,te.token)}else h&&(Q=h(d.method,d.params,te.token));let de=Q;Q?de.then?de.then(_e=>{$.delete(V),b(_e,d.method,oe)},_e=>{$.delete(V),_e instanceof ae.ResponseError?P(_e,d.method,oe):_e&&et.string(_e.message)?P(new ae.ResponseError(ae.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${_e.message}`),d.method,oe):P(new ae.ResponseError(ae.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,oe)}):($.delete(V),b(Q,d.method,oe)):($.delete(V),I(Q,d.method,oe))}catch(Q){$.delete(V),Q instanceof ae.ResponseError?b(Q,d.method,oe):Q&&et.string(Q.message)?P(new ae.ResponseError(ae.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Q.message}`),d.method,oe):P(new ae.ResponseError(ae.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,oe)}}else P(new ae.ResponseError(ae.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,oe)}function sn(d){if(!dt())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let b=d.id,P=k.get(b);if(_n(d,P),P!==void 0){k.delete(b);try{if(d.error){let I=d.error;P.reject(new ae.ResponseError(I.code,I.message,I.data))}else if(d.result!==void 0)P.resolve(d.result);else throw new Error("Should never happen.")}catch(I){I.message?i.error(`Response handler '${P.method}' failed with message: ${I.message}`):i.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function on(d){if(dt())return;let b,P;if(d.method===Li.type.method){let I=d.params.id;A.delete(I),qt(d);return}else{let I=y.get(d.method);I&&(P=I.handler,b=I.type)}if(P||C)try{if(qt(d),P)if(d.params===void 0)b!==void 0&&b.numberOfParams!==0&&b.parameterStructures!==ae.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${b.numberOfParams} params but received none.`),P();else if(Array.isArray(d.params)){let I=d.params;d.method===Fi.type.method&&I.length===2&&Pc.is(I[0])?P({token:I[0],value:I[1]}):(b!==void 0&&(b.parameterStructures===ae.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),b.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${b.numberOfParams} params but received ${I.length} arguments`)),P(...I))}else b!==void 0&&b.parameterStructures===ae.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),P(d.params);else C&&C(d.method,d.params)}catch(I){I.message?i.error(`Notification handler '${d.method}' failed with message: ${I.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else Ce.fire(d)}function Cn(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let b=d;if(et.string(b.id)||et.number(b.id)){let P=b.id,I=k.get(P);I&&I.reject(new Error("The received response has neither a result nor an error property."))}}function Me(d){if(d!=null)switch(M){case ke.Verbose:return JSON.stringify(d,null,4);case ke.Compact:return JSON.stringify(d);default:return}}function On(d){if(!(M===ke.Off||!z))if(W===dn.Text){let b;(M===ke.Verbose||M===ke.Compact)&&d.params&&(b=`Params: ${Me(d.params)}

`),z.log(`Sending request '${d.method} - (${d.id})'.`,b)}else Ae("send-request",d)}function an(d){if(!(M===ke.Off||!z))if(W===dn.Text){let b;(M===ke.Verbose||M===ke.Compact)&&(d.params?b=`Params: ${Me(d.params)}

`:b=`No parameters provided.

`),z.log(`Sending notification '${d.method}'.`,b)}else Ae("send-notification",d)}function Dt(d,b,P){if(!(M===ke.Off||!z))if(W===dn.Text){let I;(M===ke.Verbose||M===ke.Compact)&&(d.error&&d.error.data?I=`Error data: ${Me(d.error.data)}

`:d.result?I=`Result: ${Me(d.result)}

`:d.error===void 0&&(I=`No result returned.

`)),z.log(`Sending response '${b} - (${d.id})'. Processing request took ${Date.now()-P}ms`,I)}else Ae("send-response",d)}function Un(d){if(!(M===ke.Off||!z))if(W===dn.Text){let b;(M===ke.Verbose||M===ke.Compact)&&d.params&&(b=`Params: ${Me(d.params)}

`),z.log(`Received request '${d.method} - (${d.id})'.`,b)}else Ae("receive-request",d)}function qt(d){if(!(M===ke.Off||!z||d.method===xs.type.method))if(W===dn.Text){let b;(M===ke.Verbose||M===ke.Compact)&&(d.params?b=`Params: ${Me(d.params)}

`:b=`No parameters provided.

`),z.log(`Received notification '${d.method}'.`,b)}else Ae("receive-notification",d)}function _n(d,b){if(!(M===ke.Off||!z))if(W===dn.Text){let P;if((M===ke.Verbose||M===ke.Compact)&&(d.error&&d.error.data?P=`Error data: ${Me(d.error.data)}

`:d.result?P=`Result: ${Me(d.result)}

`:d.error===void 0&&(P=`No result returned.

`)),b){let I=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";z.log(`Received response '${b.method} - (${d.id})' in ${Date.now()-b.timerStart}ms.${I}`,P)}else z.log(`Received response ${d.id} without active response promise.`,P)}else Ae("receive-response",d)}function Ae(d,b){if(!z||M===ke.Off)return;let P={isLSPMessage:!0,type:d,message:b,timestamp:Date.now()};z.log(P)}function st(){if(Fe())throw new Qr(Mi.Closed,"Connection is closed.");if(dt())throw new Qr(Mi.Disposed,"Connection is disposed.")}function yt(){if(tn())throw new Qr(Mi.AlreadyListening,"Connection is already listening")}function At(){if(!tn())throw new Error("Call listen() first.")}function lt(d){return d===void 0?null:d}function cn(d){if(d!==null)return d}function bn(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function $t(d,b){switch(d){case ae.ParameterStructures.auto:return bn(b)?cn(b):[lt(b)];case ae.ParameterStructures.byName:if(!bn(b))throw new Error("Received parameters by name but param is not an object literal.");return cn(b);case ae.ParameterStructures.byPosition:return[lt(b)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function wn(d,b){let P,I=d.numberOfParams;switch(I){case 0:P=void 0;break;case 1:P=$t(d.parameterStructures,b[0]);break;default:P=[];for(let ee=0;ee<b.length&&ee<I;ee++)P.push(lt(b[ee]));if(b.length<I)for(let ee=b.length;ee<I;ee++)P.push(null);break}return P}let ot={sendNotification:(d,...b)=>{st();let P,I;if(et.string(d)){P=d;let Y=b[0],ie=0,oe=ae.ParameterStructures.auto;ae.ParameterStructures.is(Y)&&(ie=1,oe=Y);let V=b.length,te=V-ie;switch(te){case 0:I=void 0;break;case 1:I=$t(oe,b[ie]);break;default:if(oe===ae.ParameterStructures.byName)throw new Error(`Received ${te} parameters for 'by Name' notification parameter structure.`);I=b.slice(ie,V).map(Q=>lt(Q));break}}else{let Y=b;P=d.method,I=wn(d,Y)}let ee={jsonrpc:u,method:P,params:I};return an(ee),e.write(ee).catch(Y=>{throw i.error("Sending notification failed."),Y})},onNotification:(d,b)=>{st();let P;return et.func(d)?C=d:b&&(et.string(d)?(P=d,y.set(d,{type:void 0,handler:b})):(P=d.method,y.set(d.method,{type:d,handler:b}))),{dispose:()=>{P!==void 0?y.delete(P):C=void 0}}},onProgress:(d,b,P)=>{if(D.has(b))throw new Error(`Progress handler for token ${b} already registered`);return D.set(b,P),{dispose:()=>{D.delete(b)}}},sendProgress:(d,b,P)=>ot.sendNotification(Fi.type,{token:b,value:P}),onUnhandledProgress:Xe.event,sendRequest:(d,...b)=>{st(),At();let P,I,ee;if(et.string(d)){P=d;let V=b[0],te=b[b.length-1],Q=0,de=ae.ParameterStructures.auto;ae.ParameterStructures.is(V)&&(Q=1,de=V);let _e=b.length;Tc.CancellationToken.is(te)&&(_e=_e-1,ee=te);let Le=_e-Q;switch(Le){case 0:I=void 0;break;case 1:I=$t(de,b[Q]);break;default:if(de===ae.ParameterStructures.byName)throw new Error(`Received ${Le} parameters for 'by Name' request parameter structure.`);I=b.slice(Q,_e).map(Wn=>lt(Wn));break}}else{let V=b;P=d.method,I=wn(d,V);let te=d.numberOfParams;ee=Tc.CancellationToken.is(V[te])?V[te]:void 0}let Y=s++,ie;ee&&(ie=ee.onCancellationRequested(()=>{let V=Ne.sender.sendCancellation(ot,Y);return V===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Y}`),Promise.resolve()):V.catch(()=>{i.log(`Sending cancellation messages for id ${Y} failed`)})}));let oe={jsonrpc:u,id:Y,method:P,params:I};return On(oe),typeof Ne.sender.enableCancellation=="function"&&Ne.sender.enableCancellation(oe),new Promise(async(V,te)=>{let Q=Le=>{V(Le),Ne.sender.cleanup(Y),ie?.dispose()},de=Le=>{te(Le),Ne.sender.cleanup(Y),ie?.dispose()},_e={method:P,timerStart:Date.now(),resolve:Q,reject:de};try{k.set(Y,_e),await e.write(oe)}catch(Le){throw k.delete(Y),_e.reject(new ae.ResponseError(ae.ErrorCodes.MessageWriteError,Le.message?Le.message:"Unknown reason")),i.error("Sending request failed."),Le}})},onRequest:(d,b)=>{st();let P=null;return qc.is(d)?(P=void 0,h=d):et.string(d)?(P=null,b!==void 0&&(P=d,g.set(d,{handler:b,type:void 0}))):b!==void 0&&(P=d.method,g.set(d.method,{type:d,handler:b})),{dispose:()=>{P!==null&&(P!==void 0?g.delete(P):h=void 0)}}},hasPendingResponse:()=>k.size>0,trace:async(d,b,P)=>{let I=!1,ee=dn.Text;P!==void 0&&(et.boolean(P)?I=P:(I=P.sendNotification||!1,ee=P.traceFormat||dn.Text)),M=d,W=ee,M===ke.Off?z=void 0:z=b,I&&!Fe()&&!dt()&&await ot.sendNotification(kc.type,{value:ke.toString(d)})},onError:B.event,onClose:se.event,onUnhandledNotification:Ce.event,onDispose:ze.event,end:()=>{e.end()},dispose:()=>{if(dt())return;le=In.Disposed,ze.fire(void 0);let d=new ae.ResponseError(ae.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let b of k.values())b.reject(d);k=new Map,$=new Map,A=new Set,q=new Hh.LinkedMap,et.func(e.dispose)&&e.dispose(),et.func(n.dispose)&&n.dispose()},listen:()=>{st(),yt(),le=In.Listening,n.listen(Hn)},inspect:()=>{(0,$h.default)().console.log("inspect")}};return ot.onNotification(xs.type,d=>{if(M===ke.Off||!z)return;let b=M===ke.Verbose||M===ke.Compact;z.log(d.message,b?d.verbose:void 0)}),ot.onNotification(Fi.type,d=>{let b=D.get(d.token);b?b(d.value):Xe.fire(d)}),ot}ge.createMessageConnection=z_});var js=O(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.ProgressType=N.ProgressToken=N.createMessageConnection=N.NullLogger=N.ConnectionOptions=N.ConnectionStrategy=N.AbstractMessageBuffer=N.WriteableStreamMessageWriter=N.AbstractMessageWriter=N.MessageWriter=N.ReadableStreamMessageReader=N.AbstractMessageReader=N.MessageReader=N.SharedArrayReceiverStrategy=N.SharedArraySenderStrategy=N.CancellationToken=N.CancellationTokenSource=N.Emitter=N.Event=N.Disposable=N.LRUCache=N.Touch=N.LinkedMap=N.ParameterStructures=N.NotificationType9=N.NotificationType8=N.NotificationType7=N.NotificationType6=N.NotificationType5=N.NotificationType4=N.NotificationType3=N.NotificationType2=N.NotificationType1=N.NotificationType0=N.NotificationType=N.ErrorCodes=N.ResponseError=N.RequestType9=N.RequestType8=N.RequestType7=N.RequestType6=N.RequestType5=N.RequestType4=N.RequestType3=N.RequestType2=N.RequestType1=N.RequestType0=N.RequestType=N.Message=N.RAL=void 0;N.MessageStrategy=N.CancellationStrategy=N.CancellationSenderStrategy=N.CancellationReceiverStrategy=N.ConnectionError=N.ConnectionErrors=N.LogTraceNotification=N.SetTraceNotification=N.TraceFormat=N.TraceValues=N.Trace=void 0;var We=ic();Object.defineProperty(N,"Message",{enumerable:!0,get:function(){return We.Message}});Object.defineProperty(N,"RequestType",{enumerable:!0,get:function(){return We.RequestType}});Object.defineProperty(N,"RequestType0",{enumerable:!0,get:function(){return We.RequestType0}});Object.defineProperty(N,"RequestType1",{enumerable:!0,get:function(){return We.RequestType1}});Object.defineProperty(N,"RequestType2",{enumerable:!0,get:function(){return We.RequestType2}});Object.defineProperty(N,"RequestType3",{enumerable:!0,get:function(){return We.RequestType3}});Object.defineProperty(N,"RequestType4",{enumerable:!0,get:function(){return We.RequestType4}});Object.defineProperty(N,"RequestType5",{enumerable:!0,get:function(){return We.RequestType5}});Object.defineProperty(N,"RequestType6",{enumerable:!0,get:function(){return We.RequestType6}});Object.defineProperty(N,"RequestType7",{enumerable:!0,get:function(){return We.RequestType7}});Object.defineProperty(N,"RequestType8",{enumerable:!0,get:function(){return We.RequestType8}});Object.defineProperty(N,"RequestType9",{enumerable:!0,get:function(){return We.RequestType9}});Object.defineProperty(N,"ResponseError",{enumerable:!0,get:function(){return We.ResponseError}});Object.defineProperty(N,"ErrorCodes",{enumerable:!0,get:function(){return We.ErrorCodes}});Object.defineProperty(N,"NotificationType",{enumerable:!0,get:function(){return We.NotificationType}});Object.defineProperty(N,"NotificationType0",{enumerable:!0,get:function(){return We.NotificationType0}});Object.defineProperty(N,"NotificationType1",{enumerable:!0,get:function(){return We.NotificationType1}});Object.defineProperty(N,"NotificationType2",{enumerable:!0,get:function(){return We.NotificationType2}});Object.defineProperty(N,"NotificationType3",{enumerable:!0,get:function(){return We.NotificationType3}});Object.defineProperty(N,"NotificationType4",{enumerable:!0,get:function(){return We.NotificationType4}});Object.defineProperty(N,"NotificationType5",{enumerable:!0,get:function(){return We.NotificationType5}});Object.defineProperty(N,"NotificationType6",{enumerable:!0,get:function(){return We.NotificationType6}});Object.defineProperty(N,"NotificationType7",{enumerable:!0,get:function(){return We.NotificationType7}});Object.defineProperty(N,"NotificationType8",{enumerable:!0,get:function(){return We.NotificationType8}});Object.defineProperty(N,"NotificationType9",{enumerable:!0,get:function(){return We.NotificationType9}});Object.defineProperty(N,"ParameterStructures",{enumerable:!0,get:function(){return We.ParameterStructures}});var Ic=oc();Object.defineProperty(N,"LinkedMap",{enumerable:!0,get:function(){return Ic.LinkedMap}});Object.defineProperty(N,"LRUCache",{enumerable:!0,get:function(){return Ic.LRUCache}});Object.defineProperty(N,"Touch",{enumerable:!0,get:function(){return Ic.Touch}});var V_=qh();Object.defineProperty(N,"Disposable",{enumerable:!0,get:function(){return V_.Disposable}});var zh=Br();Object.defineProperty(N,"Event",{enumerable:!0,get:function(){return zh.Event}});Object.defineProperty(N,"Emitter",{enumerable:!0,get:function(){return zh.Emitter}});var Vh=Ps();Object.defineProperty(N,"CancellationTokenSource",{enumerable:!0,get:function(){return Vh.CancellationTokenSource}});Object.defineProperty(N,"CancellationToken",{enumerable:!0,get:function(){return Vh.CancellationToken}});var Bh=Oh();Object.defineProperty(N,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Bh.SharedArraySenderStrategy}});Object.defineProperty(N,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Bh.SharedArrayReceiverStrategy}});var Nc=Ih();Object.defineProperty(N,"MessageReader",{enumerable:!0,get:function(){return Nc.MessageReader}});Object.defineProperty(N,"AbstractMessageReader",{enumerable:!0,get:function(){return Nc.AbstractMessageReader}});Object.defineProperty(N,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Nc.ReadableStreamMessageReader}});var Fc=jh();Object.defineProperty(N,"MessageWriter",{enumerable:!0,get:function(){return Fc.MessageWriter}});Object.defineProperty(N,"AbstractMessageWriter",{enumerable:!0,get:function(){return Fc.AbstractMessageWriter}});Object.defineProperty(N,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Fc.WriteableStreamMessageWriter}});var B_=Ah();Object.defineProperty(N,"AbstractMessageBuffer",{enumerable:!0,get:function(){return B_.AbstractMessageBuffer}});var Pt=Kh();Object.defineProperty(N,"ConnectionStrategy",{enumerable:!0,get:function(){return Pt.ConnectionStrategy}});Object.defineProperty(N,"ConnectionOptions",{enumerable:!0,get:function(){return Pt.ConnectionOptions}});Object.defineProperty(N,"NullLogger",{enumerable:!0,get:function(){return Pt.NullLogger}});Object.defineProperty(N,"createMessageConnection",{enumerable:!0,get:function(){return Pt.createMessageConnection}});Object.defineProperty(N,"ProgressToken",{enumerable:!0,get:function(){return Pt.ProgressToken}});Object.defineProperty(N,"ProgressType",{enumerable:!0,get:function(){return Pt.ProgressType}});Object.defineProperty(N,"Trace",{enumerable:!0,get:function(){return Pt.Trace}});Object.defineProperty(N,"TraceValues",{enumerable:!0,get:function(){return Pt.TraceValues}});Object.defineProperty(N,"TraceFormat",{enumerable:!0,get:function(){return Pt.TraceFormat}});Object.defineProperty(N,"SetTraceNotification",{enumerable:!0,get:function(){return Pt.SetTraceNotification}});Object.defineProperty(N,"LogTraceNotification",{enumerable:!0,get:function(){return Pt.LogTraceNotification}});Object.defineProperty(N,"ConnectionErrors",{enumerable:!0,get:function(){return Pt.ConnectionErrors}});Object.defineProperty(N,"ConnectionError",{enumerable:!0,get:function(){return Pt.ConnectionError}});Object.defineProperty(N,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Pt.CancellationReceiverStrategy}});Object.defineProperty(N,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Pt.CancellationSenderStrategy}});Object.defineProperty(N,"CancellationStrategy",{enumerable:!0,get:function(){return Pt.CancellationStrategy}});Object.defineProperty(N,"MessageStrategy",{enumerable:!0,get:function(){return Pt.MessageStrategy}});var G_=ar();N.RAL=G_.default});var Jh=O(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});var Gh=require("util"),Jn=js(),As=class n extends Jn.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Gh.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};As.emptyBuffer=Buffer.allocUnsafe(0);var Mc=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Jn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Jn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Jn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Jn.Disposable.create(()=>this.stream.off("data",e))}},Lc=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Jn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Jn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Jn.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},Xh=Object.freeze({messageBuffer:Object.freeze({create:n=>new As(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Gh.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Mc(n),asWritableStream:n=>new Lc(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function jc(){return Xh}(function(n){function e(){Jn.RAL.install(Xh)}n.install=e})(jc||(jc={}));Ac.default=jc});var Zh=O(De=>{"use strict";var X_=De&&De.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),J_=De&&De.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&X_(e,n,t)};Object.defineProperty(De,"__esModule",{value:!0});De.createMessageConnection=De.createServerSocketTransport=De.createClientSocketTransport=De.createServerPipeTransport=De.createClientPipeTransport=De.generateRandomPipeName=De.StreamMessageWriter=De.StreamMessageReader=De.SocketMessageWriter=De.SocketMessageReader=De.PortMessageWriter=De.PortMessageReader=De.IPCMessageWriter=De.IPCMessageReader=void 0;var Yr=Jh();Yr.default.install();var Qh=require("path"),Q_=require("os"),Y_=require("crypto"),Us=require("net"),ln=js();J_(js(),De);var $c=class extends ln.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),ln.Disposable.create(()=>this.process.off("message",e))}};De.IPCMessageReader=$c;var Hc=class extends ln.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};De.IPCMessageWriter=Hc;var Uc=class extends ln.AbstractMessageReader{constructor(e){super(),this.onData=new ln.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};De.PortMessageReader=Uc;var Wc=class extends ln.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};De.PortMessageWriter=Wc;var Er=class extends ln.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,Yr.default)().stream.asReadableStream(e),t)}};De.SocketMessageReader=Er;var qr=class extends ln.WriteableStreamMessageWriter{constructor(e,t){super((0,Yr.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};De.SocketMessageWriter=qr;var $s=class extends ln.ReadableStreamMessageReader{constructor(e,t){super((0,Yr.default)().stream.asReadableStream(e),t)}};De.StreamMessageReader=$s;var Hs=class extends ln.WriteableStreamMessageWriter{constructor(e,t){super((0,Yr.default)().stream.asWritableStream(e),t)}};De.StreamMessageWriter=Hs;var Yh=process.env.XDG_RUNTIME_DIR,Z_=new Map([["linux",107],["darwin",103]]);function eb(){let n=(0,Y_.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;Yh?e=Qh.join(Yh,`vscode-ipc-${n}.sock`):e=Qh.join(Q_.tmpdir(),`vscode-${n}.sock`);let t=Z_.get(process.platform);return t!==void 0&&e.length>t&&(0,Yr.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}De.generateRandomPipeName=eb;function tb(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,Us.createServer)(a=>{o.close(),t([new Er(a,e),new qr(a,e)])});o.on("error",s),o.listen(n,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}De.createClientPipeTransport=tb;function nb(n,e="utf-8"){let t=(0,Us.createConnection)(n);return[new Er(t,e),new qr(t,e)]}De.createServerPipeTransport=nb;function rb(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,Us.createServer)(a=>{o.close(),t([new Er(a,e),new qr(a,e)])});o.on("error",s),o.listen(n,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}De.createClientSocketTransport=rb;function ib(n,e="utf-8"){let t=(0,Us.createConnection)(n,"127.0.0.1");return[new Er(t,e),new qr(t,e)]}De.createServerSocketTransport=ib;function sb(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function ob(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function ab(n,e,t,r){t||(t=ln.NullLogger);let i=sb(n)?new $s(n):n,s=ob(e)?new Hs(e):e;return ln.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,ln.createMessageConnection)(i,s,t,r)}De.createMessageConnection=ab});var Rn=O(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.asPromise=at.thenable=at.typedArray=at.stringArray=at.array=at.func=at.error=at.number=at.string=at.boolean=void 0;function cb(n){return n===!0||n===!1}at.boolean=cb;function ep(n){return typeof n=="string"||n instanceof String}at.string=ep;function ub(n){return typeof n=="number"||n instanceof Number}at.number=ub;function db(n){return n instanceof Error}at.error=db;function tp(n){return typeof n=="function"}at.func=tp;function np(n){return Array.isArray(n)}at.array=np;function lb(n){return np(n)&&n.every(e=>ep(e))}at.stringArray=lb;function fb(n,e){return Array.isArray(n)&&n.every(e)}at.typedArray=fb;function rp(n){return n&&tp(n.then)}at.thenable=rp;function hb(n){return n instanceof Promise?n:rp(n)?new Promise((e,t)=>{n.then(r=>e(r),r=>t(r))}):Promise.resolve(n)}at.asPromise=hb});var Zr=O(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.stringArray=xt.array=xt.func=xt.error=xt.number=xt.string=xt.boolean=void 0;function pb(n){return n===!0||n===!1}xt.boolean=pb;function ip(n){return typeof n=="string"||n instanceof String}xt.string=ip;function gb(n){return typeof n=="number"||n instanceof Number}xt.number=gb;function mb(n){return n instanceof Error}xt.error=mb;function yb(n){return typeof n=="function"}xt.func=yb;function sp(n){return Array.isArray(n)}xt.array=sp;function vb(n){return sp(n)&&n.every(e=>ip(e))}xt.stringArray=vb});var pu=O(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.Message=re.NotificationType9=re.NotificationType8=re.NotificationType7=re.NotificationType6=re.NotificationType5=re.NotificationType4=re.NotificationType3=re.NotificationType2=re.NotificationType1=re.NotificationType0=re.NotificationType=re.RequestType9=re.RequestType8=re.RequestType7=re.RequestType6=re.RequestType5=re.RequestType4=re.RequestType3=re.RequestType2=re.RequestType1=re.RequestType=re.RequestType0=re.AbstractMessageSignature=re.ParameterStructures=re.ResponseError=re.ErrorCodes=void 0;var kr=Zr(),Kc;(function(n){n.ParseError=-32700,n.InvalidRequest=-32600,n.MethodNotFound=-32601,n.InvalidParams=-32602,n.InternalError=-32603,n.jsonrpcReservedErrorRangeStart=-32099,n.serverErrorStart=-32099,n.MessageWriteError=-32099,n.MessageReadError=-32098,n.PendingResponseRejected=-32097,n.ConnectionInactive=-32096,n.ServerNotInitialized=-32002,n.UnknownErrorCode=-32001,n.jsonrpcReservedErrorRangeEnd=-32e3,n.serverErrorEnd=-32e3})(Kc||(re.ErrorCodes=Kc={}));var zc=class n extends Error{constructor(e,t,r){super(t),this.code=kr.number(e)?e:Kc.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,n.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};re.ResponseError=zc;var Vt=class n{constructor(e){this.kind=e}static is(e){return e===n.auto||e===n.byName||e===n.byPosition}toString(){return this.kind}};re.ParameterStructures=Vt;Vt.auto=new Vt("auto");Vt.byPosition=new Vt("byPosition");Vt.byName=new Vt("byName");var Be=class{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return Vt.auto}};re.AbstractMessageSignature=Be;var Vc=class extends Be{constructor(e){super(e,0)}};re.RequestType0=Vc;var Bc=class extends Be{constructor(e,t=Vt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};re.RequestType=Bc;var Gc=class extends Be{constructor(e,t=Vt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};re.RequestType1=Gc;var Xc=class extends Be{constructor(e){super(e,2)}};re.RequestType2=Xc;var Jc=class extends Be{constructor(e){super(e,3)}};re.RequestType3=Jc;var Qc=class extends Be{constructor(e){super(e,4)}};re.RequestType4=Qc;var Yc=class extends Be{constructor(e){super(e,5)}};re.RequestType5=Yc;var Zc=class extends Be{constructor(e){super(e,6)}};re.RequestType6=Zc;var eu=class extends Be{constructor(e){super(e,7)}};re.RequestType7=eu;var tu=class extends Be{constructor(e){super(e,8)}};re.RequestType8=tu;var nu=class extends Be{constructor(e){super(e,9)}};re.RequestType9=nu;var ru=class extends Be{constructor(e,t=Vt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};re.NotificationType=ru;var iu=class extends Be{constructor(e){super(e,0)}};re.NotificationType0=iu;var su=class extends Be{constructor(e,t=Vt.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}};re.NotificationType1=su;var ou=class extends Be{constructor(e){super(e,2)}};re.NotificationType2=ou;var au=class extends Be{constructor(e){super(e,3)}};re.NotificationType3=au;var cu=class extends Be{constructor(e){super(e,4)}};re.NotificationType4=cu;var uu=class extends Be{constructor(e){super(e,5)}};re.NotificationType5=uu;var du=class extends Be{constructor(e){super(e,6)}};re.NotificationType6=du;var lu=class extends Be{constructor(e){super(e,7)}};re.NotificationType7=lu;var fu=class extends Be{constructor(e){super(e,8)}};re.NotificationType8=fu;var hu=class extends Be{constructor(e){super(e,9)}};re.NotificationType9=hu;var op;(function(n){function e(i){let s=i;return s&&kr.string(s.method)&&(kr.string(s.id)||kr.number(s.id))}n.isRequest=e;function t(i){let s=i;return s&&kr.string(s.method)&&i.id===void 0}n.isNotification=t;function r(i){let s=i;return s&&(s.result!==void 0||!!s.error)&&(kr.string(s.id)||kr.number(s.id)||s.id===null)}n.isResponse=r})(op||(re.Message=op={}))});var mu=O(dr=>{"use strict";var ap;Object.defineProperty(dr,"__esModule",{value:!0});dr.LRUCache=dr.LinkedMap=dr.Touch=void 0;var It;(function(n){n.None=0,n.First=1,n.AsOld=n.First,n.Last=2,n.AsNew=n.Last})(It||(dr.Touch=It={}));var Ws=class{constructor(){this[ap]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=It.None){let r=this._map.get(e);if(r)return t!==It.None&&this.touch(r,t),r.value}set(e,t,r=It.None){let i=this._map.get(e);if(i)i.value=t,r!==It.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case It.None:this.addItemLast(i);break;case It.First:this.addItemFirst(i);break;case It.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let r=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.key,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}values(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:t.value,done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}entries(){let e=this._state,t=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){let i={value:[t.key,t.value],done:!1};return t=t.next,i}else return{value:void 0,done:!0}}};return r}[(ap=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,r=this.size;for(;t&&r>e;)this._map.delete(t.key),t=t.next,r--;this._head=t,this._size=r,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,r=e.previous;if(!t||!r)throw new Error("Invalid list");t.previous=r,r.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==It.First&&t!==It.Last)){if(t===It.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===It.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,r)=>{e.push([r,t])}),e}fromJSON(e){this.clear();for(let[t,r]of e)this.set(t,r)}};dr.LinkedMap=Ws;var gu=class extends Ws{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=It.AsNew){return super.get(e,t)}peek(e){return super.get(e,It.None)}set(e,t){return super.set(e,t,It.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};dr.LRUCache=gu});var up=O(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Disposable=void 0;var cp;(function(n){function e(t){return{dispose:t}}n.create=e})(cp||(Ks.Disposable=cp={}))});var lr=O(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var yu;function vu(){if(yu===void 0)throw new Error("No runtime abstraction layer installed");return yu}(function(n){function e(t){if(t===void 0)throw new Error("No runtime abstraction layer provided");yu=t}n.install=e})(vu||(vu={}));Cu.default=vu});var ti=O(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.Emitter=ei.Event=void 0;var Cb=lr(),dp;(function(n){let e={dispose(){}};n.None=function(){return e}})(dp||(ei.Event=dp={}));var _u=class{add(e,t=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let r=!1;for(let i=0,s=this._callbacks.length;i<s;i++)if(this._callbacks[i]===e)if(this._contexts[i]===t){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let t=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=r.length;s<o;s++)try{t.push(r[s].apply(i[s],e))}catch(a){(0,Cb.default)().console.error(a)}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},zs=class n{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,r)=>{this._callbacks||(this._callbacks=new _u),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),i.dispose=n._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};ei.Emitter=zs;zs._noop=function(){}});var Gs=O(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.CancellationTokenSource=ni.CancellationToken=void 0;var _b=lr(),bb=Zr(),bu=ti(),Vs;(function(n){n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:bu.Event.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:bu.Event.None});function e(t){let r=t;return r&&(r===n.None||r===n.Cancelled||bb.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}n.is=e})(Vs||(ni.CancellationToken=Vs={}));var wb=Object.freeze(function(n,e){let t=(0,_b.default)().timer.setTimeout(n.bind(e),0);return{dispose(){t.dispose()}}}),Bs=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?wb:(this._emitter||(this._emitter=new bu.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},wu=class{get token(){return this._token||(this._token=new Bs),this._token}cancel(){this._token?this._token.cancel():this._token=Vs.Cancelled}dispose(){this._token?this._token instanceof Bs&&this._token.dispose():this._token=Vs.None}};ni.CancellationTokenSource=wu});var lp=O(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});ri.SharedArrayReceiverStrategy=ri.SharedArraySenderStrategy=void 0;var Rb=Gs(),ji;(function(n){n.Continue=0,n.Cancelled=1})(ji||(ji={}));var Ru=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let t=new SharedArrayBuffer(4),r=new Int32Array(t,0,1);r[0]=ji.Continue,this.buffers.set(e.id,t),e.$cancellationData=t}async sendCancellation(e,t){let r=this.buffers.get(t);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,ji.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};ri.SharedArraySenderStrategy=Ru;var Su=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===ji.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Du=class{constructor(e){this.token=new Su(e)}cancel(){}dispose(){}},Tu=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let t=e.$cancellationData;return t===void 0?new Rb.CancellationTokenSource:new Du(t)}};ri.SharedArrayReceiverStrategy=Tu});var Eu=O(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.Semaphore=void 0;var Sb=lr(),Pu=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Sb.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Xs.Semaphore=Pu});var hp=O(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ReadableStreamMessageReader=fr.AbstractMessageReader=fr.MessageReader=void 0;var ku=lr(),ii=Zr(),qu=ti(),Db=Eu(),fp;(function(n){function e(t){let r=t;return r&&ii.func(r.listen)&&ii.func(r.dispose)&&ii.func(r.onError)&&ii.func(r.onClose)&&ii.func(r.onPartialMessage)}n.is=e})(fp||(fr.MessageReader=fp={}));var Js=class{constructor(){this.errorEmitter=new qu.Emitter,this.closeEmitter=new qu.Emitter,this.partialMessageEmitter=new qu.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${ii.string(e.message)?e.message:"unknown"}`)}};fr.AbstractMessageReader=Js;var Ou;(function(n){function e(t){let r,i,s,o=new Map,a,u=new Map;if(t===void 0||typeof t=="string")r=t??"utf-8";else{if(r=t.charset??"utf-8",t.contentDecoder!==void 0&&(s=t.contentDecoder,o.set(s.name,s)),t.contentDecoders!==void 0)for(let h of t.contentDecoders)o.set(h.name,h);if(t.contentTypeDecoder!==void 0&&(a=t.contentTypeDecoder,u.set(a.name,a)),t.contentTypeDecoders!==void 0)for(let h of t.contentTypeDecoders)u.set(h.name,h)}return a===void 0&&(a=(0,ku.default)().applicationJson.decoder,u.set(a.name,a)),{charset:r,contentDecoder:s,contentDecoders:o,contentTypeDecoder:a,contentTypeDecoders:u}}n.fromOptions=e})(Ou||(Ou={}));var xu=class extends Js{constructor(e,t){super(),this.readable=e,this.options=Ou.fromOptions(t),this.buffer=(0,ku.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Db.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let t=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),t}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let s=parseInt(i);if(isNaN(s)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=s}let t=this.buffer.tryReadBody(this.nextMessageLength);if(t===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(t):t,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(t){this.fireError(t)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,ku.default)().timer.setTimeout((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};fr.ReadableStreamMessageReader=xu});var vp=O(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.WriteableStreamMessageWriter=hr.AbstractMessageWriter=hr.MessageWriter=void 0;var pp=lr(),Ai=Zr(),Tb=Eu(),gp=ti(),Pb="Content-Length: ",mp=`\r
`,yp;(function(n){function e(t){let r=t;return r&&Ai.func(r.dispose)&&Ai.func(r.onClose)&&Ai.func(r.onError)&&Ai.func(r.write)}n.is=e})(yp||(hr.MessageWriter=yp={}));var Qs=class{constructor(){this.errorEmitter=new gp.Emitter,this.closeEmitter=new gp.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,r){this.errorEmitter.fire([this.asError(e),t,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ai.string(e.message)?e.message:"unknown"}`)}};hr.AbstractMessageWriter=Qs;var Iu;(function(n){function e(t){return t===void 0||typeof t=="string"?{charset:t??"utf-8",contentTypeEncoder:(0,pp.default)().applicationJson.encoder}:{charset:t.charset??"utf-8",contentEncoder:t.contentEncoder,contentTypeEncoder:t.contentTypeEncoder??(0,pp.default)().applicationJson.encoder}}n.fromOptions=e})(Iu||(Iu={}));var Nu=class extends Qs{constructor(e,t){super(),this.writable=e,this.options=Iu.fromOptions(t),this.errorCount=0,this.writeSemaphore=new Tb.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Pb,r.byteLength.toString(),mp),i.push(mp),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,t,r){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}};hr.WriteableStreamMessageWriter=Nu});var Cp=O(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.AbstractMessageBuffer=void 0;var Eb=13,qb=10,kb=`\r
`,Fu=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let t=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let t=0,r=0,i=0,s=0;e:for(;r<this._chunks.length;){let h=this._chunks[r];for(i=0;i<h.length;){switch(h[i]){case Eb:switch(t){case 0:t=1;break;case 2:t=3;break;default:t=0}break;case qb:switch(t){case 1:t=2;break;case 3:t=4,i++;break e;default:t=0}break;default:t=0}i++}s+=h.byteLength,r++}if(t!==4)return;let o=this._read(s+i),a=new Map,u=this.toString(o,"ascii").split(kb);if(u.length<2)return a;for(let h=0;h<u.length-2;h++){let g=u[h],C=g.indexOf(":");if(C===-1)throw new Error(`Message header must separate key and value using ':'
${g}`);let y=g.substr(0,C),D=g.substr(C+1).trim();a.set(e?y.toLowerCase():y,D)}return a}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let s=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(s)}if(this._chunks[0].byteLength>e){let s=this._chunks[0],o=this.asNative(s,e);return this._chunks[0]=s.slice(e),this._totalLength-=e,o}let t=this.allocNative(e),r=0,i=0;for(;e>0;){let s=this._chunks[i];if(s.byteLength>e){let o=s.slice(0,e);t.set(o,r),r+=e,this._chunks[i]=s.slice(e),this._totalLength-=e,e-=e}else t.set(s,r),r+=s.byteLength,this._chunks.shift(),this._totalLength-=s.byteLength,e-=s.byteLength}return t}};Ys.AbstractMessageBuffer=Fu});var Sp=O(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.createMessageConnection=me.ConnectionOptions=me.MessageStrategy=me.CancellationStrategy=me.CancellationSenderStrategy=me.CancellationReceiverStrategy=me.RequestCancellationReceiverStrategy=me.IdCancellationReceiverStrategy=me.ConnectionStrategy=me.ConnectionError=me.ConnectionErrors=me.LogTraceNotification=me.SetTraceNotification=me.TraceFormat=me.TraceValues=me.Trace=me.NullLogger=me.ProgressType=me.ProgressToken=void 0;var _p=lr(),tt=Zr(),ce=pu(),bp=mu(),$i=ti(),Mu=Gs(),Wi;(function(n){n.type=new ce.NotificationType("$/cancelRequest")})(Wi||(Wi={}));var Lu;(function(n){function e(t){return typeof t=="string"||typeof t=="number"}n.is=e})(Lu||(me.ProgressToken=Lu={}));var Hi;(function(n){n.type=new ce.NotificationType("$/progress")})(Hi||(Hi={}));var ju=class{constructor(){}};me.ProgressType=ju;var Au;(function(n){function e(t){return tt.func(t)}n.is=e})(Au||(Au={}));me.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var Oe;(function(n){n[n.Off=0]="Off",n[n.Messages=1]="Messages",n[n.Compact=2]="Compact",n[n.Verbose=3]="Verbose"})(Oe||(me.Trace=Oe={}));var wp;(function(n){n.Off="off",n.Messages="messages",n.Compact="compact",n.Verbose="verbose"})(wp||(me.TraceValues=wp={}));(function(n){function e(r){if(!tt.string(r))return n.Off;switch(r=r.toLowerCase(),r){case"off":return n.Off;case"messages":return n.Messages;case"compact":return n.Compact;case"verbose":return n.Verbose;default:return n.Off}}n.fromString=e;function t(r){switch(r){case n.Off:return"off";case n.Messages:return"messages";case n.Compact:return"compact";case n.Verbose:return"verbose";default:return"off"}}n.toString=t})(Oe||(me.Trace=Oe={}));var fn;(function(n){n.Text="text",n.JSON="json"})(fn||(me.TraceFormat=fn={}));(function(n){function e(t){return tt.string(t)?(t=t.toLowerCase(),t==="json"?n.JSON:n.Text):n.Text}n.fromString=e})(fn||(me.TraceFormat=fn={}));var $u;(function(n){n.type=new ce.NotificationType("$/setTrace")})($u||(me.SetTraceNotification=$u={}));var Zs;(function(n){n.type=new ce.NotificationType("$/logTrace")})(Zs||(me.LogTraceNotification=Zs={}));var Ui;(function(n){n[n.Closed=1]="Closed",n[n.Disposed=2]="Disposed",n[n.AlreadyListening=3]="AlreadyListening"})(Ui||(me.ConnectionErrors=Ui={}));var si=class n extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,n.prototype)}};me.ConnectionError=si;var Hu;(function(n){function e(t){let r=t;return r&&tt.func(r.cancelUndispatched)}n.is=e})(Hu||(me.ConnectionStrategy=Hu={}));var eo;(function(n){function e(t){let r=t;return r&&(r.kind===void 0||r.kind==="id")&&tt.func(r.createCancellationTokenSource)&&(r.dispose===void 0||tt.func(r.dispose))}n.is=e})(eo||(me.IdCancellationReceiverStrategy=eo={}));var Uu;(function(n){function e(t){let r=t;return r&&r.kind==="request"&&tt.func(r.createCancellationTokenSource)&&(r.dispose===void 0||tt.func(r.dispose))}n.is=e})(Uu||(me.RequestCancellationReceiverStrategy=Uu={}));var to;(function(n){n.Message=Object.freeze({createCancellationTokenSource(t){return new Mu.CancellationTokenSource}});function e(t){return eo.is(t)||Uu.is(t)}n.is=e})(to||(me.CancellationReceiverStrategy=to={}));var no;(function(n){n.Message=Object.freeze({sendCancellation(t,r){return t.sendNotification(Wi.type,{id:r})},cleanup(t){}});function e(t){let r=t;return r&&tt.func(r.sendCancellation)&&tt.func(r.cleanup)}n.is=e})(no||(me.CancellationSenderStrategy=no={}));var ro;(function(n){n.Message=Object.freeze({receiver:to.Message,sender:no.Message});function e(t){let r=t;return r&&to.is(r.receiver)&&no.is(r.sender)}n.is=e})(ro||(me.CancellationStrategy=ro={}));var io;(function(n){function e(t){let r=t;return r&&tt.func(r.handleMessage)}n.is=e})(io||(me.MessageStrategy=io={}));var Rp;(function(n){function e(t){let r=t;return r&&(ro.is(r.cancellationStrategy)||Hu.is(r.connectionStrategy)||io.is(r.messageStrategy))}n.is=e})(Rp||(me.ConnectionOptions=Rp={}));var Nn;(function(n){n[n.New=1]="New",n[n.Listening=2]="Listening",n[n.Closed=3]="Closed",n[n.Disposed=4]="Disposed"})(Nn||(Nn={}));function Ob(n,e,t,r){let i=t!==void 0?t:me.NullLogger,s=0,o=0,a=0,u="2.0",h,g=new Map,C,y=new Map,D=new Map,v,q=new bp.LinkedMap,k=new Map,A=new Set,$=new Map,M=Oe.Off,W=fn.Text,z,le=Nn.New,B=new $i.Emitter,se=new $i.Emitter,Ce=new $i.Emitter,Xe=new $i.Emitter,ze=new $i.Emitter,Ne=r&&r.cancellationStrategy?r.cancellationStrategy:ro.Message;function jt(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function St(d){return d===null?"res-unknown-"+(++a).toString():"res-"+d.toString()}function pt(){return"not-"+(++o).toString()}function gt(d,b){ce.Message.isRequest(b)?d.set(jt(b.id),b):ce.Message.isResponse(b)?d.set(St(b.id),b):d.set(pt(),b)}function en(d){}function tn(){return le===Nn.Listening}function Fe(){return le===Nn.Closed}function dt(){return le===Nn.Disposed}function Ct(){(le===Nn.New||le===Nn.Listening)&&(le=Nn.Closed,se.fire(void 0))}function mt(d){B.fire([d,void 0,void 0])}function $n(d){B.fire(d)}n.onClose(Ct),n.onError(mt),e.onClose(Ct),e.onError($n);function nn(){v||q.size===0||(v=(0,_p.default)().timer.setImmediate(()=>{v=void 0,kn()}))}function rn(d){ce.Message.isRequest(d)?vn(d):ce.Message.isNotification(d)?on(d):ce.Message.isResponse(d)?sn(d):Cn(d)}function kn(){if(q.size===0)return;let d=q.shift();try{let b=r?.messageStrategy;io.is(b)?b.handleMessage(d,rn):rn(d)}finally{nn()}}let Hn=d=>{try{if(ce.Message.isNotification(d)&&d.method===Wi.type.method){let b=d.params.id,P=jt(b),I=q.get(P);if(ce.Message.isRequest(I)){let Y=r?.connectionStrategy,ie=Y&&Y.cancelUndispatched?Y.cancelUndispatched(I,en):void 0;if(ie&&(ie.error!==void 0||ie.result!==void 0)){q.delete(P),$.delete(b),ie.id=I.id,Dt(ie,d.method,Date.now()),e.write(ie).catch(()=>i.error("Sending response for canceled message failed."));return}}let ee=$.get(b);if(ee!==void 0){ee.cancel(),qt(d);return}else A.add(b)}gt(q,d)}finally{nn()}};function vn(d){if(dt())return;function b(V,te,Q){let de={jsonrpc:u,id:d.id};V instanceof ce.ResponseError?de.error=V.toJson():de.result=V===void 0?null:V,Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}function P(V,te,Q){let de={jsonrpc:u,id:d.id,error:V.toJson()};Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}function I(V,te,Q){V===void 0&&(V=null);let de={jsonrpc:u,id:d.id,result:V};Dt(de,te,Q),e.write(de).catch(()=>i.error("Sending response failed."))}Un(d);let ee=g.get(d.method),Y,ie;ee&&(Y=ee.type,ie=ee.handler);let oe=Date.now();if(ie||h){let V=d.id??String(Date.now()),te=eo.is(Ne.receiver)?Ne.receiver.createCancellationTokenSource(V):Ne.receiver.createCancellationTokenSource(d);d.id!==null&&A.has(d.id)&&te.cancel(),d.id!==null&&$.set(V,te);try{let Q;if(ie)if(d.params===void 0){if(Y!==void 0&&Y.numberOfParams!==0){P(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${d.method} defines ${Y.numberOfParams} params but received none.`),d.method,oe);return}Q=ie(te.token)}else if(Array.isArray(d.params)){if(Y!==void 0&&Y.parameterStructures===ce.ParameterStructures.byName){P(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,oe);return}Q=ie(...d.params,te.token)}else{if(Y!==void 0&&Y.parameterStructures===ce.ParameterStructures.byPosition){P(new ce.ResponseError(ce.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,oe);return}Q=ie(d.params,te.token)}else h&&(Q=h(d.method,d.params,te.token));let de=Q;Q?de.then?de.then(_e=>{$.delete(V),b(_e,d.method,oe)},_e=>{$.delete(V),_e instanceof ce.ResponseError?P(_e,d.method,oe):_e&&tt.string(_e.message)?P(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${_e.message}`),d.method,oe):P(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,oe)}):($.delete(V),b(Q,d.method,oe)):($.delete(V),I(Q,d.method,oe))}catch(Q){$.delete(V),Q instanceof ce.ResponseError?b(Q,d.method,oe):Q&&tt.string(Q.message)?P(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Q.message}`),d.method,oe):P(new ce.ResponseError(ce.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,oe)}}else P(new ce.ResponseError(ce.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,oe)}function sn(d){if(!dt())if(d.id===null)d.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let b=d.id,P=k.get(b);if(_n(d,P),P!==void 0){k.delete(b);try{if(d.error){let I=d.error;P.reject(new ce.ResponseError(I.code,I.message,I.data))}else if(d.result!==void 0)P.resolve(d.result);else throw new Error("Should never happen.")}catch(I){I.message?i.error(`Response handler '${P.method}' failed with message: ${I.message}`):i.error(`Response handler '${P.method}' failed unexpectedly.`)}}}}function on(d){if(dt())return;let b,P;if(d.method===Wi.type.method){let I=d.params.id;A.delete(I),qt(d);return}else{let I=y.get(d.method);I&&(P=I.handler,b=I.type)}if(P||C)try{if(qt(d),P)if(d.params===void 0)b!==void 0&&b.numberOfParams!==0&&b.parameterStructures!==ce.ParameterStructures.byName&&i.error(`Notification ${d.method} defines ${b.numberOfParams} params but received none.`),P();else if(Array.isArray(d.params)){let I=d.params;d.method===Hi.type.method&&I.length===2&&Lu.is(I[0])?P({token:I[0],value:I[1]}):(b!==void 0&&(b.parameterStructures===ce.ParameterStructures.byName&&i.error(`Notification ${d.method} defines parameters by name but received parameters by position`),b.numberOfParams!==d.params.length&&i.error(`Notification ${d.method} defines ${b.numberOfParams} params but received ${I.length} arguments`)),P(...I))}else b!==void 0&&b.parameterStructures===ce.ParameterStructures.byPosition&&i.error(`Notification ${d.method} defines parameters by position but received parameters by name`),P(d.params);else C&&C(d.method,d.params)}catch(I){I.message?i.error(`Notification handler '${d.method}' failed with message: ${I.message}`):i.error(`Notification handler '${d.method}' failed unexpectedly.`)}else Ce.fire(d)}function Cn(d){if(!d){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);let b=d;if(tt.string(b.id)||tt.number(b.id)){let P=b.id,I=k.get(P);I&&I.reject(new Error("The received response has neither a result nor an error property."))}}function Me(d){if(d!=null)switch(M){case Oe.Verbose:return JSON.stringify(d,null,4);case Oe.Compact:return JSON.stringify(d);default:return}}function On(d){if(!(M===Oe.Off||!z))if(W===fn.Text){let b;(M===Oe.Verbose||M===Oe.Compact)&&d.params&&(b=`Params: ${Me(d.params)}

`),z.log(`Sending request '${d.method} - (${d.id})'.`,b)}else Ae("send-request",d)}function an(d){if(!(M===Oe.Off||!z))if(W===fn.Text){let b;(M===Oe.Verbose||M===Oe.Compact)&&(d.params?b=`Params: ${Me(d.params)}

`:b=`No parameters provided.

`),z.log(`Sending notification '${d.method}'.`,b)}else Ae("send-notification",d)}function Dt(d,b,P){if(!(M===Oe.Off||!z))if(W===fn.Text){let I;(M===Oe.Verbose||M===Oe.Compact)&&(d.error&&d.error.data?I=`Error data: ${Me(d.error.data)}

`:d.result?I=`Result: ${Me(d.result)}

`:d.error===void 0&&(I=`No result returned.

`)),z.log(`Sending response '${b} - (${d.id})'. Processing request took ${Date.now()-P}ms`,I)}else Ae("send-response",d)}function Un(d){if(!(M===Oe.Off||!z))if(W===fn.Text){let b;(M===Oe.Verbose||M===Oe.Compact)&&d.params&&(b=`Params: ${Me(d.params)}

`),z.log(`Received request '${d.method} - (${d.id})'.`,b)}else Ae("receive-request",d)}function qt(d){if(!(M===Oe.Off||!z||d.method===Zs.type.method))if(W===fn.Text){let b;(M===Oe.Verbose||M===Oe.Compact)&&(d.params?b=`Params: ${Me(d.params)}

`:b=`No parameters provided.

`),z.log(`Received notification '${d.method}'.`,b)}else Ae("receive-notification",d)}function _n(d,b){if(!(M===Oe.Off||!z))if(W===fn.Text){let P;if((M===Oe.Verbose||M===Oe.Compact)&&(d.error&&d.error.data?P=`Error data: ${Me(d.error.data)}

`:d.result?P=`Result: ${Me(d.result)}

`:d.error===void 0&&(P=`No result returned.

`)),b){let I=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";z.log(`Received response '${b.method} - (${d.id})' in ${Date.now()-b.timerStart}ms.${I}`,P)}else z.log(`Received response ${d.id} without active response promise.`,P)}else Ae("receive-response",d)}function Ae(d,b){if(!z||M===Oe.Off)return;let P={isLSPMessage:!0,type:d,message:b,timestamp:Date.now()};z.log(P)}function st(){if(Fe())throw new si(Ui.Closed,"Connection is closed.");if(dt())throw new si(Ui.Disposed,"Connection is disposed.")}function yt(){if(tn())throw new si(Ui.AlreadyListening,"Connection is already listening")}function At(){if(!tn())throw new Error("Call listen() first.")}function lt(d){return d===void 0?null:d}function cn(d){if(d!==null)return d}function bn(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function $t(d,b){switch(d){case ce.ParameterStructures.auto:return bn(b)?cn(b):[lt(b)];case ce.ParameterStructures.byName:if(!bn(b))throw new Error("Received parameters by name but param is not an object literal.");return cn(b);case ce.ParameterStructures.byPosition:return[lt(b)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function wn(d,b){let P,I=d.numberOfParams;switch(I){case 0:P=void 0;break;case 1:P=$t(d.parameterStructures,b[0]);break;default:P=[];for(let ee=0;ee<b.length&&ee<I;ee++)P.push(lt(b[ee]));if(b.length<I)for(let ee=b.length;ee<I;ee++)P.push(null);break}return P}let ot={sendNotification:(d,...b)=>{st();let P,I;if(tt.string(d)){P=d;let Y=b[0],ie=0,oe=ce.ParameterStructures.auto;ce.ParameterStructures.is(Y)&&(ie=1,oe=Y);let V=b.length,te=V-ie;switch(te){case 0:I=void 0;break;case 1:I=$t(oe,b[ie]);break;default:if(oe===ce.ParameterStructures.byName)throw new Error(`Received ${te} parameters for 'by Name' notification parameter structure.`);I=b.slice(ie,V).map(Q=>lt(Q));break}}else{let Y=b;P=d.method,I=wn(d,Y)}let ee={jsonrpc:u,method:P,params:I};return an(ee),e.write(ee).catch(Y=>{throw i.error("Sending notification failed."),Y})},onNotification:(d,b)=>{st();let P;return tt.func(d)?C=d:b&&(tt.string(d)?(P=d,y.set(d,{type:void 0,handler:b})):(P=d.method,y.set(d.method,{type:d,handler:b}))),{dispose:()=>{P!==void 0?y.delete(P):C=void 0}}},onProgress:(d,b,P)=>{if(D.has(b))throw new Error(`Progress handler for token ${b} already registered`);return D.set(b,P),{dispose:()=>{D.delete(b)}}},sendProgress:(d,b,P)=>ot.sendNotification(Hi.type,{token:b,value:P}),onUnhandledProgress:Xe.event,sendRequest:(d,...b)=>{st(),At();let P,I,ee;if(tt.string(d)){P=d;let V=b[0],te=b[b.length-1],Q=0,de=ce.ParameterStructures.auto;ce.ParameterStructures.is(V)&&(Q=1,de=V);let _e=b.length;Mu.CancellationToken.is(te)&&(_e=_e-1,ee=te);let Le=_e-Q;switch(Le){case 0:I=void 0;break;case 1:I=$t(de,b[Q]);break;default:if(de===ce.ParameterStructures.byName)throw new Error(`Received ${Le} parameters for 'by Name' request parameter structure.`);I=b.slice(Q,_e).map(Wn=>lt(Wn));break}}else{let V=b;P=d.method,I=wn(d,V);let te=d.numberOfParams;ee=Mu.CancellationToken.is(V[te])?V[te]:void 0}let Y=s++,ie;ee&&(ie=ee.onCancellationRequested(()=>{let V=Ne.sender.sendCancellation(ot,Y);return V===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Y}`),Promise.resolve()):V.catch(()=>{i.log(`Sending cancellation messages for id ${Y} failed`)})}));let oe={jsonrpc:u,id:Y,method:P,params:I};return On(oe),typeof Ne.sender.enableCancellation=="function"&&Ne.sender.enableCancellation(oe),new Promise(async(V,te)=>{let Q=Le=>{V(Le),Ne.sender.cleanup(Y),ie?.dispose()},de=Le=>{te(Le),Ne.sender.cleanup(Y),ie?.dispose()},_e={method:P,timerStart:Date.now(),resolve:Q,reject:de};try{await e.write(oe),k.set(Y,_e)}catch(Le){throw i.error("Sending request failed."),_e.reject(new ce.ResponseError(ce.ErrorCodes.MessageWriteError,Le.message?Le.message:"Unknown reason")),Le}})},onRequest:(d,b)=>{st();let P=null;return Au.is(d)?(P=void 0,h=d):tt.string(d)?(P=null,b!==void 0&&(P=d,g.set(d,{handler:b,type:void 0}))):b!==void 0&&(P=d.method,g.set(d.method,{type:d,handler:b})),{dispose:()=>{P!==null&&(P!==void 0?g.delete(P):h=void 0)}}},hasPendingResponse:()=>k.size>0,trace:async(d,b,P)=>{let I=!1,ee=fn.Text;P!==void 0&&(tt.boolean(P)?I=P:(I=P.sendNotification||!1,ee=P.traceFormat||fn.Text)),M=d,W=ee,M===Oe.Off?z=void 0:z=b,I&&!Fe()&&!dt()&&await ot.sendNotification($u.type,{value:Oe.toString(d)})},onError:B.event,onClose:se.event,onUnhandledNotification:Ce.event,onDispose:ze.event,end:()=>{e.end()},dispose:()=>{if(dt())return;le=Nn.Disposed,ze.fire(void 0);let d=new ce.ResponseError(ce.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let b of k.values())b.reject(d);k=new Map,$=new Map,A=new Set,q=new bp.LinkedMap,tt.func(e.dispose)&&e.dispose(),tt.func(n.dispose)&&n.dispose()},listen:()=>{st(),yt(),le=Nn.Listening,n.listen(Hn)},inspect:()=>{(0,_p.default)().console.log("inspect")}};return ot.onNotification(Zs.type,d=>{if(M===Oe.Off||!z)return;let b=M===Oe.Verbose||M===Oe.Compact;z.log(d.message,b?d.verbose:void 0)}),ot.onNotification(Hi.type,d=>{let b=D.get(d.token);b?b(d.value):Xe.fire(d)}),ot}me.createMessageConnection=Ob});var so=O(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.ProgressType=F.ProgressToken=F.createMessageConnection=F.NullLogger=F.ConnectionOptions=F.ConnectionStrategy=F.AbstractMessageBuffer=F.WriteableStreamMessageWriter=F.AbstractMessageWriter=F.MessageWriter=F.ReadableStreamMessageReader=F.AbstractMessageReader=F.MessageReader=F.SharedArrayReceiverStrategy=F.SharedArraySenderStrategy=F.CancellationToken=F.CancellationTokenSource=F.Emitter=F.Event=F.Disposable=F.LRUCache=F.Touch=F.LinkedMap=F.ParameterStructures=F.NotificationType9=F.NotificationType8=F.NotificationType7=F.NotificationType6=F.NotificationType5=F.NotificationType4=F.NotificationType3=F.NotificationType2=F.NotificationType1=F.NotificationType0=F.NotificationType=F.ErrorCodes=F.ResponseError=F.RequestType9=F.RequestType8=F.RequestType7=F.RequestType6=F.RequestType5=F.RequestType4=F.RequestType3=F.RequestType2=F.RequestType1=F.RequestType0=F.RequestType=F.Message=F.RAL=void 0;F.MessageStrategy=F.CancellationStrategy=F.CancellationSenderStrategy=F.CancellationReceiverStrategy=F.ConnectionError=F.ConnectionErrors=F.LogTraceNotification=F.SetTraceNotification=F.TraceFormat=F.TraceValues=F.Trace=void 0;var Ke=pu();Object.defineProperty(F,"Message",{enumerable:!0,get:function(){return Ke.Message}});Object.defineProperty(F,"RequestType",{enumerable:!0,get:function(){return Ke.RequestType}});Object.defineProperty(F,"RequestType0",{enumerable:!0,get:function(){return Ke.RequestType0}});Object.defineProperty(F,"RequestType1",{enumerable:!0,get:function(){return Ke.RequestType1}});Object.defineProperty(F,"RequestType2",{enumerable:!0,get:function(){return Ke.RequestType2}});Object.defineProperty(F,"RequestType3",{enumerable:!0,get:function(){return Ke.RequestType3}});Object.defineProperty(F,"RequestType4",{enumerable:!0,get:function(){return Ke.RequestType4}});Object.defineProperty(F,"RequestType5",{enumerable:!0,get:function(){return Ke.RequestType5}});Object.defineProperty(F,"RequestType6",{enumerable:!0,get:function(){return Ke.RequestType6}});Object.defineProperty(F,"RequestType7",{enumerable:!0,get:function(){return Ke.RequestType7}});Object.defineProperty(F,"RequestType8",{enumerable:!0,get:function(){return Ke.RequestType8}});Object.defineProperty(F,"RequestType9",{enumerable:!0,get:function(){return Ke.RequestType9}});Object.defineProperty(F,"ResponseError",{enumerable:!0,get:function(){return Ke.ResponseError}});Object.defineProperty(F,"ErrorCodes",{enumerable:!0,get:function(){return Ke.ErrorCodes}});Object.defineProperty(F,"NotificationType",{enumerable:!0,get:function(){return Ke.NotificationType}});Object.defineProperty(F,"NotificationType0",{enumerable:!0,get:function(){return Ke.NotificationType0}});Object.defineProperty(F,"NotificationType1",{enumerable:!0,get:function(){return Ke.NotificationType1}});Object.defineProperty(F,"NotificationType2",{enumerable:!0,get:function(){return Ke.NotificationType2}});Object.defineProperty(F,"NotificationType3",{enumerable:!0,get:function(){return Ke.NotificationType3}});Object.defineProperty(F,"NotificationType4",{enumerable:!0,get:function(){return Ke.NotificationType4}});Object.defineProperty(F,"NotificationType5",{enumerable:!0,get:function(){return Ke.NotificationType5}});Object.defineProperty(F,"NotificationType6",{enumerable:!0,get:function(){return Ke.NotificationType6}});Object.defineProperty(F,"NotificationType7",{enumerable:!0,get:function(){return Ke.NotificationType7}});Object.defineProperty(F,"NotificationType8",{enumerable:!0,get:function(){return Ke.NotificationType8}});Object.defineProperty(F,"NotificationType9",{enumerable:!0,get:function(){return Ke.NotificationType9}});Object.defineProperty(F,"ParameterStructures",{enumerable:!0,get:function(){return Ke.ParameterStructures}});var Wu=mu();Object.defineProperty(F,"LinkedMap",{enumerable:!0,get:function(){return Wu.LinkedMap}});Object.defineProperty(F,"LRUCache",{enumerable:!0,get:function(){return Wu.LRUCache}});Object.defineProperty(F,"Touch",{enumerable:!0,get:function(){return Wu.Touch}});var xb=up();Object.defineProperty(F,"Disposable",{enumerable:!0,get:function(){return xb.Disposable}});var Dp=ti();Object.defineProperty(F,"Event",{enumerable:!0,get:function(){return Dp.Event}});Object.defineProperty(F,"Emitter",{enumerable:!0,get:function(){return Dp.Emitter}});var Tp=Gs();Object.defineProperty(F,"CancellationTokenSource",{enumerable:!0,get:function(){return Tp.CancellationTokenSource}});Object.defineProperty(F,"CancellationToken",{enumerable:!0,get:function(){return Tp.CancellationToken}});var Pp=lp();Object.defineProperty(F,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Pp.SharedArraySenderStrategy}});Object.defineProperty(F,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Pp.SharedArrayReceiverStrategy}});var Ku=hp();Object.defineProperty(F,"MessageReader",{enumerable:!0,get:function(){return Ku.MessageReader}});Object.defineProperty(F,"AbstractMessageReader",{enumerable:!0,get:function(){return Ku.AbstractMessageReader}});Object.defineProperty(F,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return Ku.ReadableStreamMessageReader}});var zu=vp();Object.defineProperty(F,"MessageWriter",{enumerable:!0,get:function(){return zu.MessageWriter}});Object.defineProperty(F,"AbstractMessageWriter",{enumerable:!0,get:function(){return zu.AbstractMessageWriter}});Object.defineProperty(F,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return zu.WriteableStreamMessageWriter}});var Ib=Cp();Object.defineProperty(F,"AbstractMessageBuffer",{enumerable:!0,get:function(){return Ib.AbstractMessageBuffer}});var Et=Sp();Object.defineProperty(F,"ConnectionStrategy",{enumerable:!0,get:function(){return Et.ConnectionStrategy}});Object.defineProperty(F,"ConnectionOptions",{enumerable:!0,get:function(){return Et.ConnectionOptions}});Object.defineProperty(F,"NullLogger",{enumerable:!0,get:function(){return Et.NullLogger}});Object.defineProperty(F,"createMessageConnection",{enumerable:!0,get:function(){return Et.createMessageConnection}});Object.defineProperty(F,"ProgressToken",{enumerable:!0,get:function(){return Et.ProgressToken}});Object.defineProperty(F,"ProgressType",{enumerable:!0,get:function(){return Et.ProgressType}});Object.defineProperty(F,"Trace",{enumerable:!0,get:function(){return Et.Trace}});Object.defineProperty(F,"TraceValues",{enumerable:!0,get:function(){return Et.TraceValues}});Object.defineProperty(F,"TraceFormat",{enumerable:!0,get:function(){return Et.TraceFormat}});Object.defineProperty(F,"SetTraceNotification",{enumerable:!0,get:function(){return Et.SetTraceNotification}});Object.defineProperty(F,"LogTraceNotification",{enumerable:!0,get:function(){return Et.LogTraceNotification}});Object.defineProperty(F,"ConnectionErrors",{enumerable:!0,get:function(){return Et.ConnectionErrors}});Object.defineProperty(F,"ConnectionError",{enumerable:!0,get:function(){return Et.ConnectionError}});Object.defineProperty(F,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return Et.CancellationReceiverStrategy}});Object.defineProperty(F,"CancellationSenderStrategy",{enumerable:!0,get:function(){return Et.CancellationSenderStrategy}});Object.defineProperty(F,"CancellationStrategy",{enumerable:!0,get:function(){return Et.CancellationStrategy}});Object.defineProperty(F,"MessageStrategy",{enumerable:!0,get:function(){return Et.MessageStrategy}});var Nb=lr();F.RAL=Nb.default});var kp=O(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});var Ep=require("util"),Qn=so(),oo=class n extends Qn.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return n.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new Ep.TextDecoder(t).decode(e)}asNative(e,t){return t===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}};oo.emptyBuffer=Buffer.allocUnsafe(0);var Vu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Qn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Qn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Qn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Qn.Disposable.create(()=>this.stream.off("data",e))}},Bu=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Qn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Qn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Qn.Disposable.create(()=>this.stream.off("end",e))}write(e,t){return new Promise((r,i)=>{let s=o=>{o==null?r():i(o)};typeof e=="string"?this.stream.write(e,t,s):this.stream.write(e,s)})}end(){this.stream.end()}},qp=Object.freeze({messageBuffer:Object.freeze({create:n=>new oo(n)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(n,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(n,void 0,0),e.charset))}catch(t){return Promise.reject(t)}}}),decoder:Object.freeze({name:"application/json",decode:(n,e)=>{try{return n instanceof Buffer?Promise.resolve(JSON.parse(n.toString(e.charset))):Promise.resolve(JSON.parse(new Ep.TextDecoder(e.charset).decode(n)))}catch(t){return Promise.reject(t)}}})}),stream:Object.freeze({asReadableStream:n=>new Vu(n),asWritableStream:n=>new Bu(n)}),console,timer:Object.freeze({setTimeout(n,e,...t){let r=setTimeout(n,e,...t);return{dispose:()=>clearTimeout(r)}},setImmediate(n,...e){let t=setImmediate(n,...e);return{dispose:()=>clearImmediate(t)}},setInterval(n,e,...t){let r=setInterval(n,e,...t);return{dispose:()=>clearInterval(r)}}})});function Gu(){return qp}(function(n){function e(){Qn.RAL.install(qp)}n.install=e})(Gu||(Gu={}));Xu.default=Gu});var Ir=O(Te=>{"use strict";var Fb=Te&&Te.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Mb=Te&&Te.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Fb(e,n,t)};Object.defineProperty(Te,"__esModule",{value:!0});Te.createMessageConnection=Te.createServerSocketTransport=Te.createClientSocketTransport=Te.createServerPipeTransport=Te.createClientPipeTransport=Te.generateRandomPipeName=Te.StreamMessageWriter=Te.StreamMessageReader=Te.SocketMessageWriter=Te.SocketMessageReader=Te.PortMessageWriter=Te.PortMessageReader=Te.IPCMessageWriter=Te.IPCMessageReader=void 0;var oi=kp();oi.default.install();var Op=require("path"),Lb=require("os"),jb=require("crypto"),uo=require("net"),hn=so();Mb(so(),Te);var Ju=class extends hn.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),hn.Disposable.create(()=>this.process.off("message",e))}};Te.IPCMessageReader=Ju;var Qu=class extends hn.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",r=>this.fireError(r)),t.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0}),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Te.IPCMessageWriter=Qu;var Yu=class extends hn.AbstractMessageReader{constructor(e){super(),this.onData=new hn.Emitter,e.on("close",()=>this.fireClose),e.on("error",t=>this.fireError(t)),e.on("message",t=>{this.onData.fire(t)})}listen(e){return this.onData.event(e)}};Te.PortMessageReader=Yu;var Zu=class extends hn.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",t=>this.fireError(t))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}};Te.PortMessageWriter=Zu;var Or=class extends hn.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,oi.default)().stream.asReadableStream(e),t)}};Te.SocketMessageReader=Or;var xr=class extends hn.WriteableStreamMessageWriter{constructor(e,t){super((0,oi.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Te.SocketMessageWriter=xr;var ao=class extends hn.ReadableStreamMessageReader{constructor(e,t){super((0,oi.default)().stream.asReadableStream(e),t)}};Te.StreamMessageReader=ao;var co=class extends hn.WriteableStreamMessageWriter{constructor(e,t){super((0,oi.default)().stream.asWritableStream(e),t)}};Te.StreamMessageWriter=co;var xp=process.env.XDG_RUNTIME_DIR,Ab=new Map([["linux",107],["darwin",103]]);function $b(){let n=(0,jb.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${n}-sock`;let e;xp?e=Op.join(xp,`vscode-ipc-${n}.sock`):e=Op.join(Lb.tmpdir(),`vscode-${n}.sock`);let t=Ab.get(process.platform);return t!==void 0&&e.length>t&&(0,oi.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${t} characters.`),e}Te.generateRandomPipeName=$b;function Hb(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,uo.createServer)(a=>{o.close(),t([new Or(a,e),new xr(a,e)])});o.on("error",s),o.listen(n,()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Te.createClientPipeTransport=Hb;function Ub(n,e="utf-8"){let t=(0,uo.createConnection)(n);return[new Or(t,e),new xr(t,e)]}Te.createServerPipeTransport=Ub;function Wb(n,e="utf-8"){let t,r=new Promise((i,s)=>{t=i});return new Promise((i,s)=>{let o=(0,uo.createServer)(a=>{o.close(),t([new Or(a,e),new xr(a,e)])});o.on("error",s),o.listen(n,"127.0.0.1",()=>{o.removeListener("error",s),i({onConnected:()=>r})})})}Te.createClientSocketTransport=Wb;function Kb(n,e="utf-8"){let t=(0,uo.createConnection)(n,"127.0.0.1");return[new Or(t,e),new xr(t,e)]}Te.createServerSocketTransport=Kb;function zb(n){let e=n;return e.read!==void 0&&e.addListener!==void 0}function Vb(n){let e=n;return e.write!==void 0&&e.addListener!==void 0}function Bb(n,e,t,r){t||(t=hn.NullLogger);let i=zb(n)?new ao(n):n,s=Vb(e)?new co(e):e;return hn.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,hn.createMessageConnection)(i,s,t,r)}Te.createMessageConnection=Bb});var ed=O((WT,Ip)=>{"use strict";Ip.exports=Ir()});var fo=O((Np,lo)=>{(function(n){if(typeof lo=="object"&&typeof lo.exports=="object"){var e=n(require,Np);e!==void 0&&(lo.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],n)})(function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var t;(function(p){function w(R){return typeof R=="string"}p.is=w})(t||(e.DocumentUri=t={}));var r;(function(p){function w(R){return typeof R=="string"}p.is=w})(r||(e.URI=r={}));var i;(function(p){p.MIN_VALUE=-2147483648,p.MAX_VALUE=2147483647;function w(R){return typeof R=="number"&&p.MIN_VALUE<=R&&R<=p.MAX_VALUE}p.is=w})(i||(e.integer=i={}));var s;(function(p){p.MIN_VALUE=0,p.MAX_VALUE=2147483647;function w(R){return typeof R=="number"&&p.MIN_VALUE<=R&&R<=p.MAX_VALUE}p.is=w})(s||(e.uinteger=s={}));var o;(function(p){function w(m,l){return m===Number.MAX_VALUE&&(m=s.MAX_VALUE),l===Number.MAX_VALUE&&(l=s.MAX_VALUE),{line:m,character:l}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&T.uinteger(l.line)&&T.uinteger(l.character)}p.is=R})(o||(e.Position=o={}));var a;(function(p){function w(m,l,E,L){if(T.uinteger(m)&&T.uinteger(l)&&T.uinteger(E)&&T.uinteger(L))return{start:o.create(m,l),end:o.create(E,L)};if(o.is(m)&&o.is(l))return{start:m,end:l};throw new Error("Range#create called with invalid arguments[".concat(m,", ").concat(l,", ").concat(E,", ").concat(L,"]"))}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&o.is(l.start)&&o.is(l.end)}p.is=R})(a||(e.Range=a={}));var u;(function(p){function w(m,l){return{uri:m,range:l}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&a.is(l.range)&&(T.string(l.uri)||T.undefined(l.uri))}p.is=R})(u||(e.Location=u={}));var h;(function(p){function w(m,l,E,L){return{targetUri:m,targetRange:l,targetSelectionRange:E,originSelectionRange:L}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&a.is(l.targetRange)&&T.string(l.targetUri)&&a.is(l.targetSelectionRange)&&(a.is(l.originSelectionRange)||T.undefined(l.originSelectionRange))}p.is=R})(h||(e.LocationLink=h={}));var g;(function(p){function w(m,l,E,L){return{red:m,green:l,blue:E,alpha:L}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&T.numberRange(l.red,0,1)&&T.numberRange(l.green,0,1)&&T.numberRange(l.blue,0,1)&&T.numberRange(l.alpha,0,1)}p.is=R})(g||(e.Color=g={}));var C;(function(p){function w(m,l){return{range:m,color:l}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&a.is(l.range)&&g.is(l.color)}p.is=R})(C||(e.ColorInformation=C={}));var y;(function(p){function w(m,l,E){return{label:m,textEdit:l,additionalTextEdits:E}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&T.string(l.label)&&(T.undefined(l.textEdit)||z.is(l))&&(T.undefined(l.additionalTextEdits)||T.typedArray(l.additionalTextEdits,z.is))}p.is=R})(y||(e.ColorPresentation=y={}));var D;(function(p){p.Comment="comment",p.Imports="imports",p.Region="region"})(D||(e.FoldingRangeKind=D={}));var v;(function(p){function w(m,l,E,L,fe,Je){var $e={startLine:m,endLine:l};return T.defined(E)&&($e.startCharacter=E),T.defined(L)&&($e.endCharacter=L),T.defined(fe)&&($e.kind=fe),T.defined(Je)&&($e.collapsedText=Je),$e}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&T.uinteger(l.startLine)&&T.uinteger(l.startLine)&&(T.undefined(l.startCharacter)||T.uinteger(l.startCharacter))&&(T.undefined(l.endCharacter)||T.uinteger(l.endCharacter))&&(T.undefined(l.kind)||T.string(l.kind))}p.is=R})(v||(e.FoldingRange=v={}));var q;(function(p){function w(m,l){return{location:m,message:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&u.is(l.location)&&T.string(l.message)}p.is=R})(q||(e.DiagnosticRelatedInformation=q={}));var k;(function(p){p.Error=1,p.Warning=2,p.Information=3,p.Hint=4})(k||(e.DiagnosticSeverity=k={}));var A;(function(p){p.Unnecessary=1,p.Deprecated=2})(A||(e.DiagnosticTag=A={}));var $;(function(p){function w(R){var m=R;return T.objectLiteral(m)&&T.string(m.href)}p.is=w})($||(e.CodeDescription=$={}));var M;(function(p){function w(m,l,E,L,fe,Je){var $e={range:m,message:l};return T.defined(E)&&($e.severity=E),T.defined(L)&&($e.code=L),T.defined(fe)&&($e.source=fe),T.defined(Je)&&($e.relatedInformation=Je),$e}p.create=w;function R(m){var l,E=m;return T.defined(E)&&a.is(E.range)&&T.string(E.message)&&(T.number(E.severity)||T.undefined(E.severity))&&(T.integer(E.code)||T.string(E.code)||T.undefined(E.code))&&(T.undefined(E.codeDescription)||T.string((l=E.codeDescription)===null||l===void 0?void 0:l.href))&&(T.string(E.source)||T.undefined(E.source))&&(T.undefined(E.relatedInformation)||T.typedArray(E.relatedInformation,q.is))}p.is=R})(M||(e.Diagnostic=M={}));var W;(function(p){function w(m,l){for(var E=[],L=2;L<arguments.length;L++)E[L-2]=arguments[L];var fe={title:m,command:l};return T.defined(E)&&E.length>0&&(fe.arguments=E),fe}p.create=w;function R(m){var l=m;return T.defined(l)&&T.string(l.title)&&T.string(l.command)}p.is=R})(W||(e.Command=W={}));var z;(function(p){function w(E,L){return{range:E,newText:L}}p.replace=w;function R(E,L){return{range:{start:E,end:E},newText:L}}p.insert=R;function m(E){return{range:E,newText:""}}p.del=m;function l(E){var L=E;return T.objectLiteral(L)&&T.string(L.newText)&&a.is(L.range)}p.is=l})(z||(e.TextEdit=z={}));var le;(function(p){function w(m,l,E){var L={label:m};return l!==void 0&&(L.needsConfirmation=l),E!==void 0&&(L.description=E),L}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&T.string(l.label)&&(T.boolean(l.needsConfirmation)||l.needsConfirmation===void 0)&&(T.string(l.description)||l.description===void 0)}p.is=R})(le||(e.ChangeAnnotation=le={}));var B;(function(p){function w(R){var m=R;return T.string(m)}p.is=w})(B||(e.ChangeAnnotationIdentifier=B={}));var se;(function(p){function w(E,L,fe){return{range:E,newText:L,annotationId:fe}}p.replace=w;function R(E,L,fe){return{range:{start:E,end:E},newText:L,annotationId:fe}}p.insert=R;function m(E,L){return{range:E,newText:"",annotationId:L}}p.del=m;function l(E){var L=E;return z.is(L)&&(le.is(L.annotationId)||B.is(L.annotationId))}p.is=l})(se||(e.AnnotatedTextEdit=se={}));var Ce;(function(p){function w(m,l){return{textDocument:m,edits:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&Fe.is(l.textDocument)&&Array.isArray(l.edits)}p.is=R})(Ce||(e.TextDocumentEdit=Ce={}));var Xe;(function(p){function w(m,l,E){var L={kind:"create",uri:m};return l!==void 0&&(l.overwrite!==void 0||l.ignoreIfExists!==void 0)&&(L.options=l),E!==void 0&&(L.annotationId=E),L}p.create=w;function R(m){var l=m;return l&&l.kind==="create"&&T.string(l.uri)&&(l.options===void 0||(l.options.overwrite===void 0||T.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||T.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||B.is(l.annotationId))}p.is=R})(Xe||(e.CreateFile=Xe={}));var ze;(function(p){function w(m,l,E,L){var fe={kind:"rename",oldUri:m,newUri:l};return E!==void 0&&(E.overwrite!==void 0||E.ignoreIfExists!==void 0)&&(fe.options=E),L!==void 0&&(fe.annotationId=L),fe}p.create=w;function R(m){var l=m;return l&&l.kind==="rename"&&T.string(l.oldUri)&&T.string(l.newUri)&&(l.options===void 0||(l.options.overwrite===void 0||T.boolean(l.options.overwrite))&&(l.options.ignoreIfExists===void 0||T.boolean(l.options.ignoreIfExists)))&&(l.annotationId===void 0||B.is(l.annotationId))}p.is=R})(ze||(e.RenameFile=ze={}));var Ne;(function(p){function w(m,l,E){var L={kind:"delete",uri:m};return l!==void 0&&(l.recursive!==void 0||l.ignoreIfNotExists!==void 0)&&(L.options=l),E!==void 0&&(L.annotationId=E),L}p.create=w;function R(m){var l=m;return l&&l.kind==="delete"&&T.string(l.uri)&&(l.options===void 0||(l.options.recursive===void 0||T.boolean(l.options.recursive))&&(l.options.ignoreIfNotExists===void 0||T.boolean(l.options.ignoreIfNotExists)))&&(l.annotationId===void 0||B.is(l.annotationId))}p.is=R})(Ne||(e.DeleteFile=Ne={}));var jt;(function(p){function w(R){var m=R;return m&&(m.changes!==void 0||m.documentChanges!==void 0)&&(m.documentChanges===void 0||m.documentChanges.every(function(l){return T.string(l.kind)?Xe.is(l)||ze.is(l)||Ne.is(l):Ce.is(l)}))}p.is=w})(jt||(e.WorkspaceEdit=jt={}));var St=function(){function p(w,R){this.edits=w,this.changeAnnotations=R}return p.prototype.insert=function(w,R,m){var l,E;if(m===void 0?l=z.insert(w,R):B.is(m)?(E=m,l=se.insert(w,R,m)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(m),l=se.insert(w,R,E)),this.edits.push(l),E!==void 0)return E},p.prototype.replace=function(w,R,m){var l,E;if(m===void 0?l=z.replace(w,R):B.is(m)?(E=m,l=se.replace(w,R,m)):(this.assertChangeAnnotations(this.changeAnnotations),E=this.changeAnnotations.manage(m),l=se.replace(w,R,E)),this.edits.push(l),E!==void 0)return E},p.prototype.delete=function(w,R){var m,l;if(R===void 0?m=z.del(w):B.is(R)?(l=R,m=se.del(w,R)):(this.assertChangeAnnotations(this.changeAnnotations),l=this.changeAnnotations.manage(R),m=se.del(w,l)),this.edits.push(m),l!==void 0)return l},p.prototype.add=function(w){this.edits.push(w)},p.prototype.all=function(){return this.edits},p.prototype.clear=function(){this.edits.splice(0,this.edits.length)},p.prototype.assertChangeAnnotations=function(w){if(w===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},p}(),pt=function(){function p(w){this._annotations=w===void 0?Object.create(null):w,this._counter=0,this._size=0}return p.prototype.all=function(){return this._annotations},Object.defineProperty(p.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),p.prototype.manage=function(w,R){var m;if(B.is(w)?m=w:(m=this.nextId(),R=w),this._annotations[m]!==void 0)throw new Error("Id ".concat(m," is already in use."));if(R===void 0)throw new Error("No annotation provided for id ".concat(m));return this._annotations[m]=R,this._size++,m},p.prototype.nextId=function(){return this._counter++,this._counter.toString()},p}(),gt=function(){function p(w){var R=this;this._textEditChanges=Object.create(null),w!==void 0?(this._workspaceEdit=w,w.documentChanges?(this._changeAnnotations=new pt(w.changeAnnotations),w.changeAnnotations=this._changeAnnotations.all(),w.documentChanges.forEach(function(m){if(Ce.is(m)){var l=new St(m.edits,R._changeAnnotations);R._textEditChanges[m.textDocument.uri]=l}})):w.changes&&Object.keys(w.changes).forEach(function(m){var l=new St(w.changes[m]);R._textEditChanges[m]=l})):this._workspaceEdit={}}return Object.defineProperty(p.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),p.prototype.getTextEditChange=function(w){if(Fe.is(w)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var R={uri:w.uri,version:w.version},m=this._textEditChanges[R.uri];if(!m){var l=[],E={textDocument:R,edits:l};this._workspaceEdit.documentChanges.push(E),m=new St(l,this._changeAnnotations),this._textEditChanges[R.uri]=m}return m}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var m=this._textEditChanges[w];if(!m){var l=[];this._workspaceEdit.changes[w]=l,m=new St(l),this._textEditChanges[w]=m}return m}},p.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new pt,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},p.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},p.prototype.createFile=function(w,R,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;le.is(R)||B.is(R)?l=R:m=R;var E,L;if(l===void 0?E=Xe.create(w,m):(L=B.is(l)?l:this._changeAnnotations.manage(l),E=Xe.create(w,m,L)),this._workspaceEdit.documentChanges.push(E),L!==void 0)return L},p.prototype.renameFile=function(w,R,m,l){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var E;le.is(m)||B.is(m)?E=m:l=m;var L,fe;if(E===void 0?L=ze.create(w,R,l):(fe=B.is(E)?E:this._changeAnnotations.manage(E),L=ze.create(w,R,l,fe)),this._workspaceEdit.documentChanges.push(L),fe!==void 0)return fe},p.prototype.deleteFile=function(w,R,m){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var l;le.is(R)||B.is(R)?l=R:m=R;var E,L;if(l===void 0?E=Ne.create(w,m):(L=B.is(l)?l:this._changeAnnotations.manage(l),E=Ne.create(w,m,L)),this._workspaceEdit.documentChanges.push(E),L!==void 0)return L},p}();e.WorkspaceChange=gt;var en;(function(p){function w(m){return{uri:m}}p.create=w;function R(m){var l=m;return T.defined(l)&&T.string(l.uri)}p.is=R})(en||(e.TextDocumentIdentifier=en={}));var tn;(function(p){function w(m,l){return{uri:m,version:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&T.string(l.uri)&&T.integer(l.version)}p.is=R})(tn||(e.VersionedTextDocumentIdentifier=tn={}));var Fe;(function(p){function w(m,l){return{uri:m,version:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&T.string(l.uri)&&(l.version===null||T.integer(l.version))}p.is=R})(Fe||(e.OptionalVersionedTextDocumentIdentifier=Fe={}));var dt;(function(p){function w(m,l,E,L){return{uri:m,languageId:l,version:E,text:L}}p.create=w;function R(m){var l=m;return T.defined(l)&&T.string(l.uri)&&T.string(l.languageId)&&T.integer(l.version)&&T.string(l.text)}p.is=R})(dt||(e.TextDocumentItem=dt={}));var Ct;(function(p){p.PlainText="plaintext",p.Markdown="markdown";function w(R){var m=R;return m===p.PlainText||m===p.Markdown}p.is=w})(Ct||(e.MarkupKind=Ct={}));var mt;(function(p){function w(R){var m=R;return T.objectLiteral(R)&&Ct.is(m.kind)&&T.string(m.value)}p.is=w})(mt||(e.MarkupContent=mt={}));var $n;(function(p){p.Text=1,p.Method=2,p.Function=3,p.Constructor=4,p.Field=5,p.Variable=6,p.Class=7,p.Interface=8,p.Module=9,p.Property=10,p.Unit=11,p.Value=12,p.Enum=13,p.Keyword=14,p.Snippet=15,p.Color=16,p.File=17,p.Reference=18,p.Folder=19,p.EnumMember=20,p.Constant=21,p.Struct=22,p.Event=23,p.Operator=24,p.TypeParameter=25})($n||(e.CompletionItemKind=$n={}));var nn;(function(p){p.PlainText=1,p.Snippet=2})(nn||(e.InsertTextFormat=nn={}));var rn;(function(p){p.Deprecated=1})(rn||(e.CompletionItemTag=rn={}));var kn;(function(p){function w(m,l,E){return{newText:m,insert:l,replace:E}}p.create=w;function R(m){var l=m;return l&&T.string(l.newText)&&a.is(l.insert)&&a.is(l.replace)}p.is=R})(kn||(e.InsertReplaceEdit=kn={}));var Hn;(function(p){p.asIs=1,p.adjustIndentation=2})(Hn||(e.InsertTextMode=Hn={}));var vn;(function(p){function w(R){var m=R;return m&&(T.string(m.detail)||m.detail===void 0)&&(T.string(m.description)||m.description===void 0)}p.is=w})(vn||(e.CompletionItemLabelDetails=vn={}));var sn;(function(p){function w(R){return{label:R}}p.create=w})(sn||(e.CompletionItem=sn={}));var on;(function(p){function w(R,m){return{items:R||[],isIncomplete:!!m}}p.create=w})(on||(e.CompletionList=on={}));var Cn;(function(p){function w(m){return m.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}p.fromPlainText=w;function R(m){var l=m;return T.string(l)||T.objectLiteral(l)&&T.string(l.language)&&T.string(l.value)}p.is=R})(Cn||(e.MarkedString=Cn={}));var Me;(function(p){function w(R){var m=R;return!!m&&T.objectLiteral(m)&&(mt.is(m.contents)||Cn.is(m.contents)||T.typedArray(m.contents,Cn.is))&&(R.range===void 0||a.is(R.range))}p.is=w})(Me||(e.Hover=Me={}));var On;(function(p){function w(R,m){return m?{label:R,documentation:m}:{label:R}}p.create=w})(On||(e.ParameterInformation=On={}));var an;(function(p){function w(R,m){for(var l=[],E=2;E<arguments.length;E++)l[E-2]=arguments[E];var L={label:R};return T.defined(m)&&(L.documentation=m),T.defined(l)?L.parameters=l:L.parameters=[],L}p.create=w})(an||(e.SignatureInformation=an={}));var Dt;(function(p){p.Text=1,p.Read=2,p.Write=3})(Dt||(e.DocumentHighlightKind=Dt={}));var Un;(function(p){function w(R,m){var l={range:R};return T.number(m)&&(l.kind=m),l}p.create=w})(Un||(e.DocumentHighlight=Un={}));var qt;(function(p){p.File=1,p.Module=2,p.Namespace=3,p.Package=4,p.Class=5,p.Method=6,p.Property=7,p.Field=8,p.Constructor=9,p.Enum=10,p.Interface=11,p.Function=12,p.Variable=13,p.Constant=14,p.String=15,p.Number=16,p.Boolean=17,p.Array=18,p.Object=19,p.Key=20,p.Null=21,p.EnumMember=22,p.Struct=23,p.Event=24,p.Operator=25,p.TypeParameter=26})(qt||(e.SymbolKind=qt={}));var _n;(function(p){p.Deprecated=1})(_n||(e.SymbolTag=_n={}));var Ae;(function(p){function w(R,m,l,E,L){var fe={name:R,kind:m,location:{uri:E,range:l}};return L&&(fe.containerName=L),fe}p.create=w})(Ae||(e.SymbolInformation=Ae={}));var st;(function(p){function w(R,m,l,E){return E!==void 0?{name:R,kind:m,location:{uri:l,range:E}}:{name:R,kind:m,location:{uri:l}}}p.create=w})(st||(e.WorkspaceSymbol=st={}));var yt;(function(p){function w(m,l,E,L,fe,Je){var $e={name:m,detail:l,kind:E,range:L,selectionRange:fe};return Je!==void 0&&($e.children=Je),$e}p.create=w;function R(m){var l=m;return l&&T.string(l.name)&&T.number(l.kind)&&a.is(l.range)&&a.is(l.selectionRange)&&(l.detail===void 0||T.string(l.detail))&&(l.deprecated===void 0||T.boolean(l.deprecated))&&(l.children===void 0||Array.isArray(l.children))&&(l.tags===void 0||Array.isArray(l.tags))}p.is=R})(yt||(e.DocumentSymbol=yt={}));var At;(function(p){p.Empty="",p.QuickFix="quickfix",p.Refactor="refactor",p.RefactorExtract="refactor.extract",p.RefactorInline="refactor.inline",p.RefactorRewrite="refactor.rewrite",p.Source="source",p.SourceOrganizeImports="source.organizeImports",p.SourceFixAll="source.fixAll"})(At||(e.CodeActionKind=At={}));var lt;(function(p){p.Invoked=1,p.Automatic=2})(lt||(e.CodeActionTriggerKind=lt={}));var cn;(function(p){function w(m,l,E){var L={diagnostics:m};return l!=null&&(L.only=l),E!=null&&(L.triggerKind=E),L}p.create=w;function R(m){var l=m;return T.defined(l)&&T.typedArray(l.diagnostics,M.is)&&(l.only===void 0||T.typedArray(l.only,T.string))&&(l.triggerKind===void 0||l.triggerKind===lt.Invoked||l.triggerKind===lt.Automatic)}p.is=R})(cn||(e.CodeActionContext=cn={}));var bn;(function(p){function w(m,l,E){var L={title:m},fe=!0;return typeof l=="string"?(fe=!1,L.kind=l):W.is(l)?L.command=l:L.edit=l,fe&&E!==void 0&&(L.kind=E),L}p.create=w;function R(m){var l=m;return l&&T.string(l.title)&&(l.diagnostics===void 0||T.typedArray(l.diagnostics,M.is))&&(l.kind===void 0||T.string(l.kind))&&(l.edit!==void 0||l.command!==void 0)&&(l.command===void 0||W.is(l.command))&&(l.isPreferred===void 0||T.boolean(l.isPreferred))&&(l.edit===void 0||jt.is(l.edit))}p.is=R})(bn||(e.CodeAction=bn={}));var $t;(function(p){function w(m,l){var E={range:m};return T.defined(l)&&(E.data=l),E}p.create=w;function R(m){var l=m;return T.defined(l)&&a.is(l.range)&&(T.undefined(l.command)||W.is(l.command))}p.is=R})($t||(e.CodeLens=$t={}));var wn;(function(p){function w(m,l){return{tabSize:m,insertSpaces:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&T.uinteger(l.tabSize)&&T.boolean(l.insertSpaces)}p.is=R})(wn||(e.FormattingOptions=wn={}));var ot;(function(p){function w(m,l,E){return{range:m,target:l,data:E}}p.create=w;function R(m){var l=m;return T.defined(l)&&a.is(l.range)&&(T.undefined(l.target)||T.string(l.target))}p.is=R})(ot||(e.DocumentLink=ot={}));var d;(function(p){function w(m,l){return{range:m,parent:l}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&a.is(l.range)&&(l.parent===void 0||p.is(l.parent))}p.is=R})(d||(e.SelectionRange=d={}));var b;(function(p){p.namespace="namespace",p.type="type",p.class="class",p.enum="enum",p.interface="interface",p.struct="struct",p.typeParameter="typeParameter",p.parameter="parameter",p.variable="variable",p.property="property",p.enumMember="enumMember",p.event="event",p.function="function",p.method="method",p.macro="macro",p.keyword="keyword",p.modifier="modifier",p.comment="comment",p.string="string",p.number="number",p.regexp="regexp",p.operator="operator",p.decorator="decorator"})(b||(e.SemanticTokenTypes=b={}));var P;(function(p){p.declaration="declaration",p.definition="definition",p.readonly="readonly",p.static="static",p.deprecated="deprecated",p.abstract="abstract",p.async="async",p.modification="modification",p.documentation="documentation",p.defaultLibrary="defaultLibrary"})(P||(e.SemanticTokenModifiers=P={}));var I;(function(p){function w(R){var m=R;return T.objectLiteral(m)&&(m.resultId===void 0||typeof m.resultId=="string")&&Array.isArray(m.data)&&(m.data.length===0||typeof m.data[0]=="number")}p.is=w})(I||(e.SemanticTokens=I={}));var ee;(function(p){function w(m,l){return{range:m,text:l}}p.create=w;function R(m){var l=m;return l!=null&&a.is(l.range)&&T.string(l.text)}p.is=R})(ee||(e.InlineValueText=ee={}));var Y;(function(p){function w(m,l,E){return{range:m,variableName:l,caseSensitiveLookup:E}}p.create=w;function R(m){var l=m;return l!=null&&a.is(l.range)&&T.boolean(l.caseSensitiveLookup)&&(T.string(l.variableName)||l.variableName===void 0)}p.is=R})(Y||(e.InlineValueVariableLookup=Y={}));var ie;(function(p){function w(m,l){return{range:m,expression:l}}p.create=w;function R(m){var l=m;return l!=null&&a.is(l.range)&&(T.string(l.expression)||l.expression===void 0)}p.is=R})(ie||(e.InlineValueEvaluatableExpression=ie={}));var oe;(function(p){function w(m,l){return{frameId:m,stoppedLocation:l}}p.create=w;function R(m){var l=m;return T.defined(l)&&a.is(m.stoppedLocation)}p.is=R})(oe||(e.InlineValueContext=oe={}));var V;(function(p){p.Type=1,p.Parameter=2;function w(R){return R===1||R===2}p.is=w})(V||(e.InlayHintKind=V={}));var te;(function(p){function w(m){return{value:m}}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&(l.tooltip===void 0||T.string(l.tooltip)||mt.is(l.tooltip))&&(l.location===void 0||u.is(l.location))&&(l.command===void 0||W.is(l.command))}p.is=R})(te||(e.InlayHintLabelPart=te={}));var Q;(function(p){function w(m,l,E){var L={position:m,label:l};return E!==void 0&&(L.kind=E),L}p.create=w;function R(m){var l=m;return T.objectLiteral(l)&&o.is(l.position)&&(T.string(l.label)||T.typedArray(l.label,te.is))&&(l.kind===void 0||V.is(l.kind))&&l.textEdits===void 0||T.typedArray(l.textEdits,z.is)&&(l.tooltip===void 0||T.string(l.tooltip)||mt.is(l.tooltip))&&(l.paddingLeft===void 0||T.boolean(l.paddingLeft))&&(l.paddingRight===void 0||T.boolean(l.paddingRight))}p.is=R})(Q||(e.InlayHint=Q={}));var de;(function(p){function w(R){return{kind:"snippet",value:R}}p.createSnippet=w})(de||(e.StringValue=de={}));var _e;(function(p){function w(R,m,l,E){return{insertText:R,filterText:m,range:l,command:E}}p.create=w})(_e||(e.InlineCompletionItem=_e={}));var Le;(function(p){function w(R){return{items:R}}p.create=w})(Le||(e.InlineCompletionList=Le={}));var Wn;(function(p){p.Invoked=0,p.Automatic=1})(Wn||(e.InlineCompletionTriggerKind=Wn={}));var sr;(function(p){function w(R,m){return{range:R,text:m}}p.create=w})(sr||(e.SelectedCompletionInfo=sr={}));var f;(function(p){function w(R,m){return{triggerKind:R,selectedCompletionInfo:m}}p.create=w})(f||(e.InlineCompletionContext=f={}));var x;(function(p){function w(R){var m=R;return T.objectLiteral(m)&&r.is(m.uri)&&T.string(m.name)}p.is=w})(x||(e.WorkspaceFolder=x={})),e.EOL=[`
`,`\r
`,"\r"];var J;(function(p){function w(E,L,fe,Je){return new qe(E,L,fe,Je)}p.create=w;function R(E){var L=E;return!!(T.defined(L)&&T.string(L.uri)&&(T.undefined(L.languageId)||T.string(L.languageId))&&T.uinteger(L.lineCount)&&T.func(L.getText)&&T.func(L.positionAt)&&T.func(L.offsetAt))}p.is=R;function m(E,L){for(var fe=E.getText(),Je=l(L,function(Kn,c){var S=Kn.range.start.line-c.range.start.line;return S===0?Kn.range.start.character-c.range.start.character:S}),$e=fe.length,Kt=Je.length-1;Kt>=0;Kt--){var un=Je[Kt],xn=E.offsetAt(un.range.start),we=E.offsetAt(un.range.end);if(we<=$e)fe=fe.substring(0,xn)+un.newText+fe.substring(we,fe.length);else throw new Error("Overlapping edit");$e=xn}return fe}p.applyEdits=m;function l(E,L){if(E.length<=1)return E;var fe=E.length/2|0,Je=E.slice(0,fe),$e=E.slice(fe);l(Je,L),l($e,L);for(var Kt=0,un=0,xn=0;Kt<Je.length&&un<$e.length;){var we=L(Je[Kt],$e[un]);we<=0?E[xn++]=Je[Kt++]:E[xn++]=$e[un++]}for(;Kt<Je.length;)E[xn++]=Je[Kt++];for(;un<$e.length;)E[xn++]=$e[un++];return E}})(J||(e.TextDocument=J={}));var qe=function(){function p(w,R,m,l){this._uri=w,this._languageId=R,this._version=m,this._content=l,this._lineOffsets=void 0}return Object.defineProperty(p.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),p.prototype.getText=function(w){if(w){var R=this.offsetAt(w.start),m=this.offsetAt(w.end);return this._content.substring(R,m)}return this._content},p.prototype.update=function(w,R){this._content=w.text,this._version=R,this._lineOffsets=void 0},p.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var w=[],R=this._content,m=!0,l=0;l<R.length;l++){m&&(w.push(l),m=!1);var E=R.charAt(l);m=E==="\r"||E===`
`,E==="\r"&&l+1<R.length&&R.charAt(l+1)===`
`&&l++}m&&R.length>0&&w.push(R.length),this._lineOffsets=w}return this._lineOffsets},p.prototype.positionAt=function(w){w=Math.max(Math.min(w,this._content.length),0);var R=this.getLineOffsets(),m=0,l=R.length;if(l===0)return o.create(0,w);for(;m<l;){var E=Math.floor((m+l)/2);R[E]>w?l=E:m=E+1}var L=m-1;return o.create(L,w-R[L])},p.prototype.offsetAt=function(w){var R=this.getLineOffsets();if(w.line>=R.length)return this._content.length;if(w.line<0)return 0;var m=R[w.line],l=w.line+1<R.length?R[w.line+1]:this._content.length;return Math.max(Math.min(m+w.character,l),m)},Object.defineProperty(p.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),p}(),T;(function(p){var w=Object.prototype.toString;function R(we){return typeof we<"u"}p.defined=R;function m(we){return typeof we>"u"}p.undefined=m;function l(we){return we===!0||we===!1}p.boolean=l;function E(we){return w.call(we)==="[object String]"}p.string=E;function L(we){return w.call(we)==="[object Number]"}p.number=L;function fe(we,Kn,c){return w.call(we)==="[object Number]"&&Kn<=we&&we<=c}p.numberRange=fe;function Je(we){return w.call(we)==="[object Number]"&&-2147483648<=we&&we<=2147483647}p.integer=Je;function $e(we){return w.call(we)==="[object Number]"&&0<=we&&we<=2147483647}p.uinteger=$e;function Kt(we){return w.call(we)==="[object Function]"}p.func=Kt;function un(we){return we!==null&&typeof we=="object"}p.objectLiteral=un;function xn(we,Kn){return Array.isArray(we)&&we.every(Kn)}p.typedArray=xn})(T||(T={}))})});var Qe=O(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.ProtocolNotificationType=Bt.ProtocolNotificationType0=Bt.ProtocolRequestType=Bt.ProtocolRequestType0=Bt.RegistrationType=Bt.MessageDirection=void 0;var ai=Ir(),Fp;(function(n){n.clientToServer="clientToServer",n.serverToClient="serverToClient",n.both="both"})(Fp||(Bt.MessageDirection=Fp={}));var td=class{constructor(e){this.method=e}};Bt.RegistrationType=td;var nd=class extends ai.RequestType0{constructor(e){super(e)}};Bt.ProtocolRequestType0=nd;var rd=class extends ai.RequestType{constructor(e){super(e,ai.ParameterStructures.byName)}};Bt.ProtocolRequestType=rd;var id=class extends ai.NotificationType0{constructor(e){super(e)}};Bt.ProtocolNotificationType0=id;var sd=class extends ai.NotificationType{constructor(e){super(e,ai.ParameterStructures.byName)}};Bt.ProtocolNotificationType=sd});var ho=O(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.objectLiteral=ft.typedArray=ft.stringArray=ft.array=ft.func=ft.error=ft.number=ft.string=ft.boolean=void 0;function Gb(n){return n===!0||n===!1}ft.boolean=Gb;function Mp(n){return typeof n=="string"||n instanceof String}ft.string=Mp;function Xb(n){return typeof n=="number"||n instanceof Number}ft.number=Xb;function Jb(n){return n instanceof Error}ft.error=Jb;function Qb(n){return typeof n=="function"}ft.func=Qb;function Lp(n){return Array.isArray(n)}ft.array=Lp;function Yb(n){return Lp(n)&&n.every(e=>Mp(e))}ft.stringArray=Yb;function Zb(n,e){return Array.isArray(n)&&n.every(e)}ft.typedArray=Zb;function ew(n){return n!==null&&typeof n=="object"}ft.objectLiteral=ew});var $p=O(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.ImplementationRequest=void 0;var jp=Qe(),Ap;(function(n){n.method="textDocument/implementation",n.messageDirection=jp.MessageDirection.clientToServer,n.type=new jp.ProtocolRequestType(n.method)})(Ap||(po.ImplementationRequest=Ap={}))});var Wp=O(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.TypeDefinitionRequest=void 0;var Hp=Qe(),Up;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=Hp.MessageDirection.clientToServer,n.type=new Hp.ProtocolRequestType(n.method)})(Up||(go.TypeDefinitionRequest=Up={}))});var Vp=O(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.DidChangeWorkspaceFoldersNotification=ci.WorkspaceFoldersRequest=void 0;var mo=Qe(),Kp;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=mo.MessageDirection.serverToClient,n.type=new mo.ProtocolRequestType0(n.method)})(Kp||(ci.WorkspaceFoldersRequest=Kp={}));var zp;(function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=mo.MessageDirection.clientToServer,n.type=new mo.ProtocolNotificationType(n.method)})(zp||(ci.DidChangeWorkspaceFoldersNotification=zp={}))});var Xp=O(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.ConfigurationRequest=void 0;var Bp=Qe(),Gp;(function(n){n.method="workspace/configuration",n.messageDirection=Bp.MessageDirection.serverToClient,n.type=new Bp.ProtocolRequestType(n.method)})(Gp||(yo.ConfigurationRequest=Gp={}))});var Yp=O(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.ColorPresentationRequest=ui.DocumentColorRequest=void 0;var vo=Qe(),Jp;(function(n){n.method="textDocument/documentColor",n.messageDirection=vo.MessageDirection.clientToServer,n.type=new vo.ProtocolRequestType(n.method)})(Jp||(ui.DocumentColorRequest=Jp={}));var Qp;(function(n){n.method="textDocument/colorPresentation",n.messageDirection=vo.MessageDirection.clientToServer,n.type=new vo.ProtocolRequestType(n.method)})(Qp||(ui.ColorPresentationRequest=Qp={}))});var tg=O(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.FoldingRangeRefreshRequest=di.FoldingRangeRequest=void 0;var Co=Qe(),Zp;(function(n){n.method="textDocument/foldingRange",n.messageDirection=Co.MessageDirection.clientToServer,n.type=new Co.ProtocolRequestType(n.method)})(Zp||(di.FoldingRangeRequest=Zp={}));var eg;(function(n){n.method="workspace/foldingRange/refresh",n.messageDirection=Co.MessageDirection.serverToClient,n.type=new Co.ProtocolRequestType0(n.method)})(eg||(di.FoldingRangeRefreshRequest=eg={}))});var ig=O(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.DeclarationRequest=void 0;var ng=Qe(),rg;(function(n){n.method="textDocument/declaration",n.messageDirection=ng.MessageDirection.clientToServer,n.type=new ng.ProtocolRequestType(n.method)})(rg||(_o.DeclarationRequest=rg={}))});var ag=O(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.SelectionRangeRequest=void 0;var sg=Qe(),og;(function(n){n.method="textDocument/selectionRange",n.messageDirection=sg.MessageDirection.clientToServer,n.type=new sg.ProtocolRequestType(n.method)})(og||(bo.SelectionRangeRequest=og={}))});var lg=O(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.WorkDoneProgressCancelNotification=pr.WorkDoneProgressCreateRequest=pr.WorkDoneProgress=void 0;var tw=Ir(),wo=Qe(),cg;(function(n){n.type=new tw.ProgressType;function e(t){return t===n.type}n.is=e})(cg||(pr.WorkDoneProgress=cg={}));var ug;(function(n){n.method="window/workDoneProgress/create",n.messageDirection=wo.MessageDirection.serverToClient,n.type=new wo.ProtocolRequestType(n.method)})(ug||(pr.WorkDoneProgressCreateRequest=ug={}));var dg;(function(n){n.method="window/workDoneProgress/cancel",n.messageDirection=wo.MessageDirection.clientToServer,n.type=new wo.ProtocolNotificationType(n.method)})(dg||(pr.WorkDoneProgressCancelNotification=dg={}))});var gg=O(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.CallHierarchyOutgoingCallsRequest=gr.CallHierarchyIncomingCallsRequest=gr.CallHierarchyPrepareRequest=void 0;var li=Qe(),fg;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=li.MessageDirection.clientToServer,n.type=new li.ProtocolRequestType(n.method)})(fg||(gr.CallHierarchyPrepareRequest=fg={}));var hg;(function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=li.MessageDirection.clientToServer,n.type=new li.ProtocolRequestType(n.method)})(hg||(gr.CallHierarchyIncomingCallsRequest=hg={}));var pg;(function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=li.MessageDirection.clientToServer,n.type=new li.ProtocolRequestType(n.method)})(pg||(gr.CallHierarchyOutgoingCallsRequest=pg={}))});var bg=O(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.SemanticTokensRefreshRequest=Gt.SemanticTokensRangeRequest=Gt.SemanticTokensDeltaRequest=Gt.SemanticTokensRequest=Gt.SemanticTokensRegistrationType=Gt.TokenFormat=void 0;var Yn=Qe(),mg;(function(n){n.Relative="relative"})(mg||(Gt.TokenFormat=mg={}));var Ki;(function(n){n.method="textDocument/semanticTokens",n.type=new Yn.RegistrationType(n.method)})(Ki||(Gt.SemanticTokensRegistrationType=Ki={}));var yg;(function(n){n.method="textDocument/semanticTokens/full",n.messageDirection=Yn.MessageDirection.clientToServer,n.type=new Yn.ProtocolRequestType(n.method),n.registrationMethod=Ki.method})(yg||(Gt.SemanticTokensRequest=yg={}));var vg;(function(n){n.method="textDocument/semanticTokens/full/delta",n.messageDirection=Yn.MessageDirection.clientToServer,n.type=new Yn.ProtocolRequestType(n.method),n.registrationMethod=Ki.method})(vg||(Gt.SemanticTokensDeltaRequest=vg={}));var Cg;(function(n){n.method="textDocument/semanticTokens/range",n.messageDirection=Yn.MessageDirection.clientToServer,n.type=new Yn.ProtocolRequestType(n.method),n.registrationMethod=Ki.method})(Cg||(Gt.SemanticTokensRangeRequest=Cg={}));var _g;(function(n){n.method="workspace/semanticTokens/refresh",n.messageDirection=Yn.MessageDirection.serverToClient,n.type=new Yn.ProtocolRequestType0(n.method)})(_g||(Gt.SemanticTokensRefreshRequest=_g={}))});var Sg=O(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.ShowDocumentRequest=void 0;var wg=Qe(),Rg;(function(n){n.method="window/showDocument",n.messageDirection=wg.MessageDirection.serverToClient,n.type=new wg.ProtocolRequestType(n.method)})(Rg||(Ro.ShowDocumentRequest=Rg={}))});var Pg=O(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.LinkedEditingRangeRequest=void 0;var Dg=Qe(),Tg;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=Dg.MessageDirection.clientToServer,n.type=new Dg.ProtocolRequestType(n.method)})(Tg||(So.LinkedEditingRangeRequest=Tg={}))});var Fg=O(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.WillDeleteFilesRequest=Nt.DidDeleteFilesNotification=Nt.DidRenameFilesNotification=Nt.WillRenameFilesRequest=Nt.DidCreateFilesNotification=Nt.WillCreateFilesRequest=Nt.FileOperationPatternKind=void 0;var Sn=Qe(),Eg;(function(n){n.file="file",n.folder="folder"})(Eg||(Nt.FileOperationPatternKind=Eg={}));var qg;(function(n){n.method="workspace/willCreateFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolRequestType(n.method)})(qg||(Nt.WillCreateFilesRequest=qg={}));var kg;(function(n){n.method="workspace/didCreateFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolNotificationType(n.method)})(kg||(Nt.DidCreateFilesNotification=kg={}));var Og;(function(n){n.method="workspace/willRenameFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolRequestType(n.method)})(Og||(Nt.WillRenameFilesRequest=Og={}));var xg;(function(n){n.method="workspace/didRenameFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolNotificationType(n.method)})(xg||(Nt.DidRenameFilesNotification=xg={}));var Ig;(function(n){n.method="workspace/didDeleteFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolNotificationType(n.method)})(Ig||(Nt.DidDeleteFilesNotification=Ig={}));var Ng;(function(n){n.method="workspace/willDeleteFiles",n.messageDirection=Sn.MessageDirection.clientToServer,n.type=new Sn.ProtocolRequestType(n.method)})(Ng||(Nt.WillDeleteFilesRequest=Ng={}))});var $g=O(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.MonikerRequest=mr.MonikerKind=mr.UniquenessLevel=void 0;var Mg=Qe(),Lg;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(Lg||(mr.UniquenessLevel=Lg={}));var jg;(function(n){n.$import="import",n.$export="export",n.local="local"})(jg||(mr.MonikerKind=jg={}));var Ag;(function(n){n.method="textDocument/moniker",n.messageDirection=Mg.MessageDirection.clientToServer,n.type=new Mg.ProtocolRequestType(n.method)})(Ag||(mr.MonikerRequest=Ag={}))});var Kg=O(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.TypeHierarchySubtypesRequest=yr.TypeHierarchySupertypesRequest=yr.TypeHierarchyPrepareRequest=void 0;var fi=Qe(),Hg;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=fi.MessageDirection.clientToServer,n.type=new fi.ProtocolRequestType(n.method)})(Hg||(yr.TypeHierarchyPrepareRequest=Hg={}));var Ug;(function(n){n.method="typeHierarchy/supertypes",n.messageDirection=fi.MessageDirection.clientToServer,n.type=new fi.ProtocolRequestType(n.method)})(Ug||(yr.TypeHierarchySupertypesRequest=Ug={}));var Wg;(function(n){n.method="typeHierarchy/subtypes",n.messageDirection=fi.MessageDirection.clientToServer,n.type=new fi.ProtocolRequestType(n.method)})(Wg||(yr.TypeHierarchySubtypesRequest=Wg={}))});var Bg=O(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.InlineValueRefreshRequest=hi.InlineValueRequest=void 0;var Do=Qe(),zg;(function(n){n.method="textDocument/inlineValue",n.messageDirection=Do.MessageDirection.clientToServer,n.type=new Do.ProtocolRequestType(n.method)})(zg||(hi.InlineValueRequest=zg={}));var Vg;(function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=Do.MessageDirection.serverToClient,n.type=new Do.ProtocolRequestType0(n.method)})(Vg||(hi.InlineValueRefreshRequest=Vg={}))});var Qg=O(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.InlayHintRefreshRequest=vr.InlayHintResolveRequest=vr.InlayHintRequest=void 0;var pi=Qe(),Gg;(function(n){n.method="textDocument/inlayHint",n.messageDirection=pi.MessageDirection.clientToServer,n.type=new pi.ProtocolRequestType(n.method)})(Gg||(vr.InlayHintRequest=Gg={}));var Xg;(function(n){n.method="inlayHint/resolve",n.messageDirection=pi.MessageDirection.clientToServer,n.type=new pi.ProtocolRequestType(n.method)})(Xg||(vr.InlayHintResolveRequest=Xg={}));var Jg;(function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=pi.MessageDirection.serverToClient,n.type=new pi.ProtocolRequestType0(n.method)})(Jg||(vr.InlayHintRefreshRequest=Jg={}))});var im=O(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.DiagnosticRefreshRequest=Dn.WorkspaceDiagnosticRequest=Dn.DocumentDiagnosticRequest=Dn.DocumentDiagnosticReportKind=Dn.DiagnosticServerCancellationData=void 0;var rm=Ir(),nw=ho(),gi=Qe(),Yg;(function(n){function e(t){let r=t;return r&&nw.boolean(r.retriggerRequest)}n.is=e})(Yg||(Dn.DiagnosticServerCancellationData=Yg={}));var Zg;(function(n){n.Full="full",n.Unchanged="unchanged"})(Zg||(Dn.DocumentDiagnosticReportKind=Zg={}));var em;(function(n){n.method="textDocument/diagnostic",n.messageDirection=gi.MessageDirection.clientToServer,n.type=new gi.ProtocolRequestType(n.method),n.partialResult=new rm.ProgressType})(em||(Dn.DocumentDiagnosticRequest=em={}));var tm;(function(n){n.method="workspace/diagnostic",n.messageDirection=gi.MessageDirection.clientToServer,n.type=new gi.ProtocolRequestType(n.method),n.partialResult=new rm.ProgressType})(tm||(Dn.WorkspaceDiagnosticRequest=tm={}));var nm;(function(n){n.method="workspace/diagnostic/refresh",n.messageDirection=gi.MessageDirection.serverToClient,n.type=new gi.ProtocolRequestType0(n.method)})(nm||(Dn.DiagnosticRefreshRequest=nm={}))});var lm=O(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.DidCloseNotebookDocumentNotification=ct.DidSaveNotebookDocumentNotification=ct.DidChangeNotebookDocumentNotification=ct.NotebookCellArrayChange=ct.DidOpenNotebookDocumentNotification=ct.NotebookDocumentSyncRegistrationType=ct.NotebookDocument=ct.NotebookCell=ct.ExecutionSummary=ct.NotebookCellKind=void 0;var zi=fo(),Fn=ho(),Vn=Qe(),od;(function(n){n.Markup=1,n.Code=2;function e(t){return t===1||t===2}n.is=e})(od||(ct.NotebookCellKind=od={}));var ad;(function(n){function e(i,s){let o={executionOrder:i};return(s===!0||s===!1)&&(o.success=s),o}n.create=e;function t(i){let s=i;return Fn.objectLiteral(s)&&zi.uinteger.is(s.executionOrder)&&(s.success===void 0||Fn.boolean(s.success))}n.is=t;function r(i,s){return i===s?!0:i==null||s===null||s===void 0?!1:i.executionOrder===s.executionOrder&&i.success===s.success}n.equals=r})(ad||(ct.ExecutionSummary=ad={}));var To;(function(n){function e(s,o){return{kind:s,document:o}}n.create=e;function t(s){let o=s;return Fn.objectLiteral(o)&&od.is(o.kind)&&zi.DocumentUri.is(o.document)&&(o.metadata===void 0||Fn.objectLiteral(o.metadata))}n.is=t;function r(s,o){let a=new Set;return s.document!==o.document&&a.add("document"),s.kind!==o.kind&&a.add("kind"),s.executionSummary!==o.executionSummary&&a.add("executionSummary"),(s.metadata!==void 0||o.metadata!==void 0)&&!i(s.metadata,o.metadata)&&a.add("metadata"),(s.executionSummary!==void 0||o.executionSummary!==void 0)&&!ad.equals(s.executionSummary,o.executionSummary)&&a.add("executionSummary"),a}n.diff=r;function i(s,o){if(s===o)return!0;if(s==null||o===null||o===void 0||typeof s!=typeof o||typeof s!="object")return!1;let a=Array.isArray(s),u=Array.isArray(o);if(a!==u)return!1;if(a&&u){if(s.length!==o.length)return!1;for(let h=0;h<s.length;h++)if(!i(s[h],o[h]))return!1}if(Fn.objectLiteral(s)&&Fn.objectLiteral(o)){let h=Object.keys(s),g=Object.keys(o);if(h.length!==g.length||(h.sort(),g.sort(),!i(h,g)))return!1;for(let C=0;C<h.length;C++){let y=h[C];if(!i(s[y],o[y]))return!1}}return!0}})(To||(ct.NotebookCell=To={}));var sm;(function(n){function e(r,i,s,o){return{uri:r,notebookType:i,version:s,cells:o}}n.create=e;function t(r){let i=r;return Fn.objectLiteral(i)&&Fn.string(i.uri)&&zi.integer.is(i.version)&&Fn.typedArray(i.cells,To.is)}n.is=t})(sm||(ct.NotebookDocument=sm={}));var mi;(function(n){n.method="notebookDocument/sync",n.messageDirection=Vn.MessageDirection.clientToServer,n.type=new Vn.RegistrationType(n.method)})(mi||(ct.NotebookDocumentSyncRegistrationType=mi={}));var om;(function(n){n.method="notebookDocument/didOpen",n.messageDirection=Vn.MessageDirection.clientToServer,n.type=new Vn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(om||(ct.DidOpenNotebookDocumentNotification=om={}));var am;(function(n){function e(r){let i=r;return Fn.objectLiteral(i)&&zi.uinteger.is(i.start)&&zi.uinteger.is(i.deleteCount)&&(i.cells===void 0||Fn.typedArray(i.cells,To.is))}n.is=e;function t(r,i,s){let o={start:r,deleteCount:i};return s!==void 0&&(o.cells=s),o}n.create=t})(am||(ct.NotebookCellArrayChange=am={}));var cm;(function(n){n.method="notebookDocument/didChange",n.messageDirection=Vn.MessageDirection.clientToServer,n.type=new Vn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(cm||(ct.DidChangeNotebookDocumentNotification=cm={}));var um;(function(n){n.method="notebookDocument/didSave",n.messageDirection=Vn.MessageDirection.clientToServer,n.type=new Vn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(um||(ct.DidSaveNotebookDocumentNotification=um={}));var dm;(function(n){n.method="notebookDocument/didClose",n.messageDirection=Vn.MessageDirection.clientToServer,n.type=new Vn.ProtocolNotificationType(n.method),n.registrationMethod=mi.method})(dm||(ct.DidCloseNotebookDocumentNotification=dm={}))});var pm=O(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.InlineCompletionRequest=void 0;var fm=Qe(),hm;(function(n){n.method="textDocument/inlineCompletion",n.messageDirection=fm.MessageDirection.clientToServer,n.type=new fm.ProtocolRequestType(n.method)})(hm||(Po.InlineCompletionRequest=hm={}))});var Py=O(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0});_.WorkspaceSymbolRequest=_.CodeActionResolveRequest=_.CodeActionRequest=_.DocumentSymbolRequest=_.DocumentHighlightRequest=_.ReferencesRequest=_.DefinitionRequest=_.SignatureHelpRequest=_.SignatureHelpTriggerKind=_.HoverRequest=_.CompletionResolveRequest=_.CompletionRequest=_.CompletionTriggerKind=_.PublishDiagnosticsNotification=_.WatchKind=_.RelativePattern=_.FileChangeType=_.DidChangeWatchedFilesNotification=_.WillSaveTextDocumentWaitUntilRequest=_.WillSaveTextDocumentNotification=_.TextDocumentSaveReason=_.DidSaveTextDocumentNotification=_.DidCloseTextDocumentNotification=_.DidChangeTextDocumentNotification=_.TextDocumentContentChangeEvent=_.DidOpenTextDocumentNotification=_.TextDocumentSyncKind=_.TelemetryEventNotification=_.LogMessageNotification=_.ShowMessageRequest=_.ShowMessageNotification=_.MessageType=_.DidChangeConfigurationNotification=_.ExitNotification=_.ShutdownRequest=_.InitializedNotification=_.InitializeErrorCodes=_.InitializeRequest=_.WorkDoneProgressOptions=_.TextDocumentRegistrationOptions=_.StaticRegistrationOptions=_.PositionEncodingKind=_.FailureHandlingKind=_.ResourceOperationKind=_.UnregistrationRequest=_.RegistrationRequest=_.DocumentSelector=_.NotebookCellTextDocumentFilter=_.NotebookDocumentFilter=_.TextDocumentFilter=void 0;_.MonikerRequest=_.MonikerKind=_.UniquenessLevel=_.WillDeleteFilesRequest=_.DidDeleteFilesNotification=_.WillRenameFilesRequest=_.DidRenameFilesNotification=_.WillCreateFilesRequest=_.DidCreateFilesNotification=_.FileOperationPatternKind=_.LinkedEditingRangeRequest=_.ShowDocumentRequest=_.SemanticTokensRegistrationType=_.SemanticTokensRefreshRequest=_.SemanticTokensRangeRequest=_.SemanticTokensDeltaRequest=_.SemanticTokensRequest=_.TokenFormat=_.CallHierarchyPrepareRequest=_.CallHierarchyOutgoingCallsRequest=_.CallHierarchyIncomingCallsRequest=_.WorkDoneProgressCancelNotification=_.WorkDoneProgressCreateRequest=_.WorkDoneProgress=_.SelectionRangeRequest=_.DeclarationRequest=_.FoldingRangeRefreshRequest=_.FoldingRangeRequest=_.ColorPresentationRequest=_.DocumentColorRequest=_.ConfigurationRequest=_.DidChangeWorkspaceFoldersNotification=_.WorkspaceFoldersRequest=_.TypeDefinitionRequest=_.ImplementationRequest=_.ApplyWorkspaceEditRequest=_.ExecuteCommandRequest=_.PrepareRenameRequest=_.RenameRequest=_.PrepareSupportDefaultBehavior=_.DocumentOnTypeFormattingRequest=_.DocumentRangesFormattingRequest=_.DocumentRangeFormattingRequest=_.DocumentFormattingRequest=_.DocumentLinkResolveRequest=_.DocumentLinkRequest=_.CodeLensRefreshRequest=_.CodeLensResolveRequest=_.CodeLensRequest=_.WorkspaceSymbolResolveRequest=void 0;_.InlineCompletionRequest=_.DidCloseNotebookDocumentNotification=_.DidSaveNotebookDocumentNotification=_.DidChangeNotebookDocumentNotification=_.NotebookCellArrayChange=_.DidOpenNotebookDocumentNotification=_.NotebookDocumentSyncRegistrationType=_.NotebookDocument=_.NotebookCell=_.ExecutionSummary=_.NotebookCellKind=_.DiagnosticRefreshRequest=_.WorkspaceDiagnosticRequest=_.DocumentDiagnosticRequest=_.DocumentDiagnosticReportKind=_.DiagnosticServerCancellationData=_.InlayHintRefreshRequest=_.InlayHintResolveRequest=_.InlayHintRequest=_.InlineValueRefreshRequest=_.InlineValueRequest=_.TypeHierarchySupertypesRequest=_.TypeHierarchySubtypesRequest=_.TypeHierarchyPrepareRequest=void 0;var U=Qe(),gm=fo(),bt=ho(),rw=$p();Object.defineProperty(_,"ImplementationRequest",{enumerable:!0,get:function(){return rw.ImplementationRequest}});var iw=Wp();Object.defineProperty(_,"TypeDefinitionRequest",{enumerable:!0,get:function(){return iw.TypeDefinitionRequest}});var Ry=Vp();Object.defineProperty(_,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Ry.WorkspaceFoldersRequest}});Object.defineProperty(_,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Ry.DidChangeWorkspaceFoldersNotification}});var sw=Xp();Object.defineProperty(_,"ConfigurationRequest",{enumerable:!0,get:function(){return sw.ConfigurationRequest}});var Sy=Yp();Object.defineProperty(_,"DocumentColorRequest",{enumerable:!0,get:function(){return Sy.DocumentColorRequest}});Object.defineProperty(_,"ColorPresentationRequest",{enumerable:!0,get:function(){return Sy.ColorPresentationRequest}});var Dy=tg();Object.defineProperty(_,"FoldingRangeRequest",{enumerable:!0,get:function(){return Dy.FoldingRangeRequest}});Object.defineProperty(_,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Dy.FoldingRangeRefreshRequest}});var ow=ig();Object.defineProperty(_,"DeclarationRequest",{enumerable:!0,get:function(){return ow.DeclarationRequest}});var aw=ag();Object.defineProperty(_,"SelectionRangeRequest",{enumerable:!0,get:function(){return aw.SelectionRangeRequest}});var fd=lg();Object.defineProperty(_,"WorkDoneProgress",{enumerable:!0,get:function(){return fd.WorkDoneProgress}});Object.defineProperty(_,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return fd.WorkDoneProgressCreateRequest}});Object.defineProperty(_,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return fd.WorkDoneProgressCancelNotification}});var hd=gg();Object.defineProperty(_,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return hd.CallHierarchyIncomingCallsRequest}});Object.defineProperty(_,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return hd.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(_,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return hd.CallHierarchyPrepareRequest}});var yi=bg();Object.defineProperty(_,"TokenFormat",{enumerable:!0,get:function(){return yi.TokenFormat}});Object.defineProperty(_,"SemanticTokensRequest",{enumerable:!0,get:function(){return yi.SemanticTokensRequest}});Object.defineProperty(_,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return yi.SemanticTokensDeltaRequest}});Object.defineProperty(_,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return yi.SemanticTokensRangeRequest}});Object.defineProperty(_,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return yi.SemanticTokensRefreshRequest}});Object.defineProperty(_,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return yi.SemanticTokensRegistrationType}});var cw=Sg();Object.defineProperty(_,"ShowDocumentRequest",{enumerable:!0,get:function(){return cw.ShowDocumentRequest}});var uw=Pg();Object.defineProperty(_,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return uw.LinkedEditingRangeRequest}});var Nr=Fg();Object.defineProperty(_,"FileOperationPatternKind",{enumerable:!0,get:function(){return Nr.FileOperationPatternKind}});Object.defineProperty(_,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Nr.DidCreateFilesNotification}});Object.defineProperty(_,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Nr.WillCreateFilesRequest}});Object.defineProperty(_,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Nr.DidRenameFilesNotification}});Object.defineProperty(_,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Nr.WillRenameFilesRequest}});Object.defineProperty(_,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Nr.DidDeleteFilesNotification}});Object.defineProperty(_,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Nr.WillDeleteFilesRequest}});var pd=$g();Object.defineProperty(_,"UniquenessLevel",{enumerable:!0,get:function(){return pd.UniquenessLevel}});Object.defineProperty(_,"MonikerKind",{enumerable:!0,get:function(){return pd.MonikerKind}});Object.defineProperty(_,"MonikerRequest",{enumerable:!0,get:function(){return pd.MonikerRequest}});var gd=Kg();Object.defineProperty(_,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return gd.TypeHierarchyPrepareRequest}});Object.defineProperty(_,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return gd.TypeHierarchySubtypesRequest}});Object.defineProperty(_,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return gd.TypeHierarchySupertypesRequest}});var Ty=Bg();Object.defineProperty(_,"InlineValueRequest",{enumerable:!0,get:function(){return Ty.InlineValueRequest}});Object.defineProperty(_,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Ty.InlineValueRefreshRequest}});var md=Qg();Object.defineProperty(_,"InlayHintRequest",{enumerable:!0,get:function(){return md.InlayHintRequest}});Object.defineProperty(_,"InlayHintResolveRequest",{enumerable:!0,get:function(){return md.InlayHintResolveRequest}});Object.defineProperty(_,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return md.InlayHintRefreshRequest}});var Vi=im();Object.defineProperty(_,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Vi.DiagnosticServerCancellationData}});Object.defineProperty(_,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Vi.DocumentDiagnosticReportKind}});Object.defineProperty(_,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Vi.DocumentDiagnosticRequest}});Object.defineProperty(_,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Vi.WorkspaceDiagnosticRequest}});Object.defineProperty(_,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Vi.DiagnosticRefreshRequest}});var Bn=lm();Object.defineProperty(_,"NotebookCellKind",{enumerable:!0,get:function(){return Bn.NotebookCellKind}});Object.defineProperty(_,"ExecutionSummary",{enumerable:!0,get:function(){return Bn.ExecutionSummary}});Object.defineProperty(_,"NotebookCell",{enumerable:!0,get:function(){return Bn.NotebookCell}});Object.defineProperty(_,"NotebookDocument",{enumerable:!0,get:function(){return Bn.NotebookDocument}});Object.defineProperty(_,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Bn.NotebookDocumentSyncRegistrationType}});Object.defineProperty(_,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Bn.DidOpenNotebookDocumentNotification}});Object.defineProperty(_,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Bn.NotebookCellArrayChange}});Object.defineProperty(_,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Bn.DidChangeNotebookDocumentNotification}});Object.defineProperty(_,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Bn.DidSaveNotebookDocumentNotification}});Object.defineProperty(_,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Bn.DidCloseNotebookDocumentNotification}});var dw=pm();Object.defineProperty(_,"InlineCompletionRequest",{enumerable:!0,get:function(){return dw.InlineCompletionRequest}});var cd;(function(n){function e(t){let r=t;return bt.string(r)||bt.string(r.language)||bt.string(r.scheme)||bt.string(r.pattern)}n.is=e})(cd||(_.TextDocumentFilter=cd={}));var ud;(function(n){function e(t){let r=t;return bt.objectLiteral(r)&&(bt.string(r.notebookType)||bt.string(r.scheme)||bt.string(r.pattern))}n.is=e})(ud||(_.NotebookDocumentFilter=ud={}));var dd;(function(n){function e(t){let r=t;return bt.objectLiteral(r)&&(bt.string(r.notebook)||ud.is(r.notebook))&&(r.language===void 0||bt.string(r.language))}n.is=e})(dd||(_.NotebookCellTextDocumentFilter=dd={}));var ld;(function(n){function e(t){if(!Array.isArray(t))return!1;for(let r of t)if(!bt.string(r)&&!cd.is(r)&&!dd.is(r))return!1;return!0}n.is=e})(ld||(_.DocumentSelector=ld={}));var mm;(function(n){n.method="client/registerCapability",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolRequestType(n.method)})(mm||(_.RegistrationRequest=mm={}));var ym;(function(n){n.method="client/unregisterCapability",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolRequestType(n.method)})(ym||(_.UnregistrationRequest=ym={}));var vm;(function(n){n.Create="create",n.Rename="rename",n.Delete="delete"})(vm||(_.ResourceOperationKind=vm={}));var Cm;(function(n){n.Abort="abort",n.Transactional="transactional",n.TextOnlyTransactional="textOnlyTransactional",n.Undo="undo"})(Cm||(_.FailureHandlingKind=Cm={}));var _m;(function(n){n.UTF8="utf-8",n.UTF16="utf-16",n.UTF32="utf-32"})(_m||(_.PositionEncodingKind=_m={}));var bm;(function(n){function e(t){let r=t;return r&&bt.string(r.id)&&r.id.length>0}n.hasId=e})(bm||(_.StaticRegistrationOptions=bm={}));var wm;(function(n){function e(t){let r=t;return r&&(r.documentSelector===null||ld.is(r.documentSelector))}n.is=e})(wm||(_.TextDocumentRegistrationOptions=wm={}));var Rm;(function(n){function e(r){let i=r;return bt.objectLiteral(i)&&(i.workDoneProgress===void 0||bt.boolean(i.workDoneProgress))}n.is=e;function t(r){let i=r;return i&&bt.boolean(i.workDoneProgress)}n.hasWorkDoneProgress=t})(Rm||(_.WorkDoneProgressOptions=Rm={}));var Sm;(function(n){n.method="initialize",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Sm||(_.InitializeRequest=Sm={}));var Dm;(function(n){n.unknownProtocolVersion=1})(Dm||(_.InitializeErrorCodes=Dm={}));var Tm;(function(n){n.method="initialized",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(Tm||(_.InitializedNotification=Tm={}));var Pm;(function(n){n.method="shutdown",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType0(n.method)})(Pm||(_.ShutdownRequest=Pm={}));var Em;(function(n){n.method="exit",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType0(n.method)})(Em||(_.ExitNotification=Em={}));var qm;(function(n){n.method="workspace/didChangeConfiguration",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(qm||(_.DidChangeConfigurationNotification=qm={}));var km;(function(n){n.Error=1,n.Warning=2,n.Info=3,n.Log=4,n.Debug=5})(km||(_.MessageType=km={}));var Om;(function(n){n.method="window/showMessage",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolNotificationType(n.method)})(Om||(_.ShowMessageNotification=Om={}));var xm;(function(n){n.method="window/showMessageRequest",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolRequestType(n.method)})(xm||(_.ShowMessageRequest=xm={}));var Im;(function(n){n.method="window/logMessage",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolNotificationType(n.method)})(Im||(_.LogMessageNotification=Im={}));var Nm;(function(n){n.method="telemetry/event",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolNotificationType(n.method)})(Nm||(_.TelemetryEventNotification=Nm={}));var Fm;(function(n){n.None=0,n.Full=1,n.Incremental=2})(Fm||(_.TextDocumentSyncKind=Fm={}));var Mm;(function(n){n.method="textDocument/didOpen",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(Mm||(_.DidOpenTextDocumentNotification=Mm={}));var Lm;(function(n){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}n.isIncremental=e;function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}n.isFull=t})(Lm||(_.TextDocumentContentChangeEvent=Lm={}));var jm;(function(n){n.method="textDocument/didChange",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(jm||(_.DidChangeTextDocumentNotification=jm={}));var Am;(function(n){n.method="textDocument/didClose",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(Am||(_.DidCloseTextDocumentNotification=Am={}));var $m;(function(n){n.method="textDocument/didSave",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})($m||(_.DidSaveTextDocumentNotification=$m={}));var Hm;(function(n){n.Manual=1,n.AfterDelay=2,n.FocusOut=3})(Hm||(_.TextDocumentSaveReason=Hm={}));var Um;(function(n){n.method="textDocument/willSave",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(Um||(_.WillSaveTextDocumentNotification=Um={}));var Wm;(function(n){n.method="textDocument/willSaveWaitUntil",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Wm||(_.WillSaveTextDocumentWaitUntilRequest=Wm={}));var Km;(function(n){n.method="workspace/didChangeWatchedFiles",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolNotificationType(n.method)})(Km||(_.DidChangeWatchedFilesNotification=Km={}));var zm;(function(n){n.Created=1,n.Changed=2,n.Deleted=3})(zm||(_.FileChangeType=zm={}));var Vm;(function(n){function e(t){let r=t;return bt.objectLiteral(r)&&(gm.URI.is(r.baseUri)||gm.WorkspaceFolder.is(r.baseUri))&&bt.string(r.pattern)}n.is=e})(Vm||(_.RelativePattern=Vm={}));var Bm;(function(n){n.Create=1,n.Change=2,n.Delete=4})(Bm||(_.WatchKind=Bm={}));var Gm;(function(n){n.method="textDocument/publishDiagnostics",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolNotificationType(n.method)})(Gm||(_.PublishDiagnosticsNotification=Gm={}));var Xm;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.TriggerForIncompleteCompletions=3})(Xm||(_.CompletionTriggerKind=Xm={}));var Jm;(function(n){n.method="textDocument/completion",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Jm||(_.CompletionRequest=Jm={}));var Qm;(function(n){n.method="completionItem/resolve",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Qm||(_.CompletionResolveRequest=Qm={}));var Ym;(function(n){n.method="textDocument/hover",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Ym||(_.HoverRequest=Ym={}));var Zm;(function(n){n.Invoked=1,n.TriggerCharacter=2,n.ContentChange=3})(Zm||(_.SignatureHelpTriggerKind=Zm={}));var ey;(function(n){n.method="textDocument/signatureHelp",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(ey||(_.SignatureHelpRequest=ey={}));var ty;(function(n){n.method="textDocument/definition",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(ty||(_.DefinitionRequest=ty={}));var ny;(function(n){n.method="textDocument/references",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(ny||(_.ReferencesRequest=ny={}));var ry;(function(n){n.method="textDocument/documentHighlight",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(ry||(_.DocumentHighlightRequest=ry={}));var iy;(function(n){n.method="textDocument/documentSymbol",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(iy||(_.DocumentSymbolRequest=iy={}));var sy;(function(n){n.method="textDocument/codeAction",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(sy||(_.CodeActionRequest=sy={}));var oy;(function(n){n.method="codeAction/resolve",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(oy||(_.CodeActionResolveRequest=oy={}));var ay;(function(n){n.method="workspace/symbol",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(ay||(_.WorkspaceSymbolRequest=ay={}));var cy;(function(n){n.method="workspaceSymbol/resolve",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(cy||(_.WorkspaceSymbolResolveRequest=cy={}));var uy;(function(n){n.method="textDocument/codeLens",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(uy||(_.CodeLensRequest=uy={}));var dy;(function(n){n.method="codeLens/resolve",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(dy||(_.CodeLensResolveRequest=dy={}));var ly;(function(n){n.method="workspace/codeLens/refresh",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolRequestType0(n.method)})(ly||(_.CodeLensRefreshRequest=ly={}));var fy;(function(n){n.method="textDocument/documentLink",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(fy||(_.DocumentLinkRequest=fy={}));var hy;(function(n){n.method="documentLink/resolve",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(hy||(_.DocumentLinkResolveRequest=hy={}));var py;(function(n){n.method="textDocument/formatting",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(py||(_.DocumentFormattingRequest=py={}));var gy;(function(n){n.method="textDocument/rangeFormatting",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(gy||(_.DocumentRangeFormattingRequest=gy={}));var my;(function(n){n.method="textDocument/rangesFormatting",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(my||(_.DocumentRangesFormattingRequest=my={}));var yy;(function(n){n.method="textDocument/onTypeFormatting",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(yy||(_.DocumentOnTypeFormattingRequest=yy={}));var vy;(function(n){n.Identifier=1})(vy||(_.PrepareSupportDefaultBehavior=vy={}));var Cy;(function(n){n.method="textDocument/rename",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(Cy||(_.RenameRequest=Cy={}));var _y;(function(n){n.method="textDocument/prepareRename",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(_y||(_.PrepareRenameRequest=_y={}));var by;(function(n){n.method="workspace/executeCommand",n.messageDirection=U.MessageDirection.clientToServer,n.type=new U.ProtocolRequestType(n.method)})(by||(_.ExecuteCommandRequest=by={}));var wy;(function(n){n.method="workspace/applyEdit",n.messageDirection=U.MessageDirection.serverToClient,n.type=new U.ProtocolRequestType("workspace/applyEdit")})(wy||(_.ApplyWorkspaceEditRequest=wy={}))});var qy=O(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.createProtocolConnection=void 0;var Ey=Ir();function lw(n,e,t,r){return Ey.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ey.createMessageConnection)(n,e,t,r)}Eo.createProtocolConnection=lw});var Oy=O(Xt=>{"use strict";var fw=Xt&&Xt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),qo=Xt&&Xt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&fw(e,n,t)};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.LSPErrorCodes=Xt.createProtocolConnection=void 0;qo(Ir(),Xt);qo(fo(),Xt);qo(Qe(),Xt);qo(Py(),Xt);var hw=qy();Object.defineProperty(Xt,"createProtocolConnection",{enumerable:!0,get:function(){return hw.createProtocolConnection}});var ky;(function(n){n.lspReservedErrorRangeStart=-32899,n.RequestFailed=-32803,n.ServerCancelled=-32802,n.ContentModified=-32801,n.RequestCancelled=-32800,n.lspReservedErrorRangeEnd=-32800})(ky||(Xt.LSPErrorCodes=ky={}))});var he=O(Gn=>{"use strict";var pw=Gn&&Gn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),xy=Gn&&Gn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pw(e,n,t)};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.createProtocolConnection=void 0;var gw=ed();xy(ed(),Gn);xy(Oy(),Gn);function mw(n,e,t,r){return(0,gw.createMessageConnection)(n,e,t,r)}Gn.createProtocolConnection=mw});var ko=O(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.forEach=Ft.mapAsync=Ft.map=Ft.clearTestMode=Ft.setTestMode=Ft.Semaphore=Ft.Delayer=void 0;var Gi=he(),yd=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t>=0||this.timeout===void 0)&&(this.timeout=(0,Gi.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};Ft.Delayer=yd;var vd=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((t,r)=>{this._waiting.push({thunk:e,resolve:t,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Gi.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let t=e.thunk();t instanceof Promise?t.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}};Ft.Semaphore=vd;var Cd=!1;function yw(){Cd=!0}Ft.setTestMode=yw;function vw(){Cd=!1}Ft.clearTestMode=vw;var Iy=15,Bi=class{constructor(e=Iy){this.yieldAfter=Cd===!0?Math.max(e,2):Math.max(e,Iy),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,t=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||t<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function Cw(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new Bi(r?.yieldAfter);function o(u){s.start();for(let h=u;h<n.length;h++)if(i[h]=e(n[h]),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let a=o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(u=>{(0,Gi.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}Ft.map=Cw;async function _w(n,e,t,r){if(n.length===0)return[];let i=new Array(n.length),s=new Bi(r?.yieldAfter);async function o(u){s.start();for(let h=u;h<n.length;h++)if(i[h]=await e(n[h],t),s.shouldYield())return r?.yieldCallback&&r.yieldCallback(),h+1;return-1}let a=await o(0);for(;a!==-1&&!(t!==void 0&&t.isCancellationRequested);)a=await new Promise(u=>{(0,Gi.RAL)().timer.setImmediate(()=>{u(o(a))})});return i}Ft.mapAsync=_w;async function bw(n,e,t,r){if(n.length===0)return;let i=new Bi(r?.yieldAfter);function s(a){i.start();for(let u=a;u<n.length;u++)if(e(n[u]),i.shouldYield())return r?.yieldCallback&&r.yieldCallback(),u+1;return-1}let o=s(0);for(;o!==-1&&!(t!==void 0&&t.isCancellationRequested);)o=await new Promise(a=>{(0,Gi.RAL)().timer.setImmediate(()=>{a(s(o))})})}Ft.forEach=bw});var wd=O(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var ww=require("vscode"),_d=class extends ww.CompletionItem{constructor(e){super(e)}};bd.default=_d});var Dd=O(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var Rw=require("vscode"),Rd=class extends Rw.CodeLens{constructor(e){super(e)}};Sd.default=Rd});var Ed=O(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});var Sw=require("vscode"),Td=class extends Sw.DocumentLink{constructor(e,t){super(e,t)}};Pd.default=Td});var Od=O(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});var Dw=require("vscode"),qd=class extends Dw.CodeAction{constructor(e,t){super(e),this.data=t}};kd.default=qd});var Nd=O(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.ProtocolDiagnostic=vi.DiagnosticCode=void 0;var Tw=require("vscode"),xd=Rn(),Ny;(function(n){function e(t){let r=t;return r!=null&&(xd.number(r.value)||xd.string(r.value))&&xd.string(r.target)}n.is=e})(Ny||(vi.DiagnosticCode=Ny={}));var Id=class extends Tw.Diagnostic{constructor(e,t,r,i){super(e,t,r),this.data=i,this.hasDiagnosticCode=!1}};vi.ProtocolDiagnostic=Id});var Ld=O(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var Pw=require("vscode"),Fd=class extends Pw.CallHierarchyItem{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,o),a!==void 0&&(this.data=a)}};Md.default=Fd});var $d=O(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});var Ew=require("vscode"),jd=class extends Ew.TypeHierarchyItem{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s,o),a!==void 0&&(this.data=a)}};Ad.default=jd});var Wd=O(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});var Oo=require("vscode"),Hd=class extends Oo.SymbolInformation{constructor(e,t,r,i,s){let o=!(i instanceof Oo.Uri);super(e,t,r,o?i:new Oo.Location(i,new Oo.Range(0,0,0,0))),this.hasRange=o,s!==void 0&&(this.data=s)}};Ud.default=Hd});var Vd=O(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});var qw=require("vscode"),Kd=class extends qw.InlayHint{constructor(e,t,r){super(e,t,r)}};zd.default=Kd});var jy=O(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.createConverter=void 0;var ht=require("vscode"),pe=he(),Fr=Rn(),Fy=ko(),kw=wd(),Ow=Dd(),xw=Ed(),My=Od(),Ly=Nd(),Iw=Ld(),Nw=$d(),Fw=Wd(),Mw=Vd(),Bd;(function(n){function e(t){let r=t;return r&&!!r.inserting&&!!r.replacing}n.is=e})(Bd||(Bd={}));function Lw(n){let t=n||(f=>f.toString());function r(f){return t(f)}function i(f){return{uri:t(f.uri)}}function s(f){return{uri:t(f.uri),languageId:f.languageId,version:f.version,text:f.getText()}}function o(f){return{uri:t(f.uri),version:f.version}}function a(f){return{textDocument:s(f)}}function u(f){let x=f;return!!x.document&&!!x.contentChanges}function h(f){let x=f;return!!x.uri&&!!x.version}function g(f,x,J){if(h(f))return{textDocument:{uri:t(f.uri),version:f.version},contentChanges:[{text:f.getText()}]};if(u(f)){let qe=x,T=J;return{textDocument:{uri:t(qe),version:T},contentChanges:f.contentChanges.map(w=>{let R=w.range;return{range:{start:{line:R.start.line,character:R.start.character},end:{line:R.end.line,character:R.end.character}},rangeLength:w.rangeLength,text:w.text}})}}else throw Error("Unsupported text document change parameter")}function C(f){return{textDocument:i(f)}}function y(f,x=!1){let J={textDocument:i(f)};return x&&(J.text=f.getText()),J}function D(f){switch(f){case ht.TextDocumentSaveReason.Manual:return pe.TextDocumentSaveReason.Manual;case ht.TextDocumentSaveReason.AfterDelay:return pe.TextDocumentSaveReason.AfterDelay;case ht.TextDocumentSaveReason.FocusOut:return pe.TextDocumentSaveReason.FocusOut}return pe.TextDocumentSaveReason.Manual}function v(f){return{textDocument:i(f.document),reason:D(f.reason)}}function q(f){return{files:f.files.map(x=>({uri:t(x)}))}}function k(f){return{files:f.files.map(x=>({oldUri:t(x.oldUri),newUri:t(x.newUri)}))}}function A(f){return{files:f.files.map(x=>({uri:t(x)}))}}function $(f){return{files:f.files.map(x=>({uri:t(x)}))}}function M(f){return{files:f.files.map(x=>({oldUri:t(x.oldUri),newUri:t(x.newUri)}))}}function W(f){return{files:f.files.map(x=>({uri:t(x)}))}}function z(f,x){return{textDocument:i(f),position:pt(x)}}function le(f){switch(f){case ht.CompletionTriggerKind.TriggerCharacter:return pe.CompletionTriggerKind.TriggerCharacter;case ht.CompletionTriggerKind.TriggerForIncompleteCompletions:return pe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return pe.CompletionTriggerKind.Invoked}}function B(f,x,J){return{textDocument:i(f),position:pt(x),context:{triggerKind:le(J.triggerKind),triggerCharacter:J.triggerCharacter}}}function se(f){switch(f){case ht.SignatureHelpTriggerKind.Invoke:return pe.SignatureHelpTriggerKind.Invoked;case ht.SignatureHelpTriggerKind.TriggerCharacter:return pe.SignatureHelpTriggerKind.TriggerCharacter;case ht.SignatureHelpTriggerKind.ContentChange:return pe.SignatureHelpTriggerKind.ContentChange}}function Ce(f){return{label:f.label}}function Xe(f){return f.map(Ce)}function ze(f){return{label:f.label,parameters:Xe(f.parameters)}}function Ne(f){return f.map(ze)}function jt(f){return f===void 0?f:{signatures:Ne(f.signatures),activeSignature:f.activeSignature,activeParameter:f.activeParameter}}function St(f,x,J){return{textDocument:i(f),position:pt(x),context:{isRetrigger:J.isRetrigger,triggerCharacter:J.triggerCharacter,triggerKind:se(J.triggerKind),activeSignatureHelp:jt(J.activeSignatureHelp)}}}function pt(f){return{line:f.line,character:f.character}}function gt(f){return f==null?f:{line:f.line>pe.uinteger.MAX_VALUE?pe.uinteger.MAX_VALUE:f.line,character:f.character>pe.uinteger.MAX_VALUE?pe.uinteger.MAX_VALUE:f.character}}function en(f,x){return Fy.map(f,gt,x)}function tn(f){return f.map(gt)}function Fe(f){return f==null?f:{start:gt(f.start),end:gt(f.end)}}function dt(f){return f.map(Fe)}function Ct(f){return f==null?f:pe.Location.create(r(f.uri),Fe(f.range))}function mt(f){switch(f){case ht.DiagnosticSeverity.Error:return pe.DiagnosticSeverity.Error;case ht.DiagnosticSeverity.Warning:return pe.DiagnosticSeverity.Warning;case ht.DiagnosticSeverity.Information:return pe.DiagnosticSeverity.Information;case ht.DiagnosticSeverity.Hint:return pe.DiagnosticSeverity.Hint}}function $n(f){if(!f)return;let x=[];for(let J of f){let qe=nn(J);qe!==void 0&&x.push(qe)}return x.length>0?x:void 0}function nn(f){switch(f){case ht.DiagnosticTag.Unnecessary:return pe.DiagnosticTag.Unnecessary;case ht.DiagnosticTag.Deprecated:return pe.DiagnosticTag.Deprecated;default:return}}function rn(f){return{message:f.message,location:Ct(f.location)}}function kn(f){return f.map(rn)}function Hn(f){if(f!=null)return Fr.number(f)||Fr.string(f)?f:{value:f.value,target:r(f.target)}}function vn(f){let x=pe.Diagnostic.create(Fe(f.range),f.message),J=f instanceof Ly.ProtocolDiagnostic?f:void 0;J!==void 0&&J.data!==void 0&&(x.data=J.data);let qe=Hn(f.code);return Ly.DiagnosticCode.is(qe)?J!==void 0&&J.hasDiagnosticCode?x.code=qe:(x.code=qe.value,x.codeDescription={href:qe.target}):x.code=qe,Fr.number(f.severity)&&(x.severity=mt(f.severity)),Array.isArray(f.tags)&&(x.tags=$n(f.tags)),f.relatedInformation&&(x.relatedInformation=kn(f.relatedInformation)),f.source&&(x.source=f.source),x}function sn(f,x){return f==null?f:Fy.map(f,vn,x)}function on(f){return f==null?f:f.map(vn)}function Cn(f,x){switch(f){case"$string":return x;case pe.MarkupKind.PlainText:return{kind:f,value:x};case pe.MarkupKind.Markdown:return{kind:f,value:x.value};default:return`Unsupported Markup content received. Kind is: ${f}`}}function Me(f){switch(f){case ht.CompletionItemTag.Deprecated:return pe.CompletionItemTag.Deprecated}}function On(f){if(f===void 0)return f;let x=[];for(let J of f){let qe=Me(J);qe!==void 0&&x.push(qe)}return x}function an(f,x){return x!==void 0?x:f+1}function Dt(f,x=!1){let J,qe;Fr.string(f.label)?J=f.label:(J=f.label.label,x&&(f.label.detail!==void 0||f.label.description!==void 0)&&(qe={detail:f.label.detail,description:f.label.description}));let T={label:J};qe!==void 0&&(T.labelDetails=qe);let p=f instanceof kw.default?f:void 0;f.detail&&(T.detail=f.detail),f.documentation&&(!p||p.documentationFormat==="$string"?T.documentation=f.documentation:T.documentation=Cn(p.documentationFormat,f.documentation)),f.filterText&&(T.filterText=f.filterText),Un(T,f),Fr.number(f.kind)&&(T.kind=an(f.kind,p&&p.originalItemKind)),f.sortText&&(T.sortText=f.sortText),f.additionalTextEdits&&(T.additionalTextEdits=Ae(f.additionalTextEdits)),f.commitCharacters&&(T.commitCharacters=f.commitCharacters.slice()),f.command&&(T.command=I(f.command)),(f.preselect===!0||f.preselect===!1)&&(T.preselect=f.preselect);let w=On(f.tags);if(p){if(p.data!==void 0&&(T.data=p.data),p.deprecated===!0||p.deprecated===!1){if(p.deprecated===!0&&w!==void 0&&w.length>0){let R=w.indexOf(ht.CompletionItemTag.Deprecated);R!==-1&&w.splice(R,1)}T.deprecated=p.deprecated}p.insertTextMode!==void 0&&(T.insertTextMode=p.insertTextMode)}return w!==void 0&&w.length>0&&(T.tags=w),T.insertTextMode===void 0&&f.keepWhitespace===!0&&(T.insertTextMode=pe.InsertTextMode.adjustIndentation),T}function Un(f,x){let J=pe.InsertTextFormat.PlainText,qe,T;x.textEdit?(qe=x.textEdit.newText,T=x.textEdit.range):x.insertText instanceof ht.SnippetString?(J=pe.InsertTextFormat.Snippet,qe=x.insertText.value):qe=x.insertText,x.range&&(T=x.range),f.insertTextFormat=J,x.fromEdit&&qe!==void 0&&T!==void 0?f.textEdit=qt(qe,T):f.insertText=qe}function qt(f,x){return Bd.is(x)?pe.InsertReplaceEdit.create(f,Fe(x.inserting),Fe(x.replacing)):{newText:f,range:Fe(x)}}function _n(f){return{range:Fe(f.range),newText:f.newText}}function Ae(f){return f==null?f:f.map(_n)}function st(f){return f<=ht.SymbolKind.TypeParameter?f+1:pe.SymbolKind.Property}function yt(f){return f}function At(f){return f.map(yt)}function lt(f,x,J){return{textDocument:i(f),position:pt(x),context:{includeDeclaration:J.includeDeclaration}}}async function cn(f,x){let J=pe.CodeAction.create(f.title);if(f instanceof My.default&&f.data!==void 0&&(J.data=f.data),f.kind!==void 0&&(J.kind=d(f.kind)),f.diagnostics!==void 0&&(J.diagnostics=await sn(f.diagnostics,x)),f.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return f.command!==void 0&&(J.command=I(f.command)),f.isPreferred!==void 0&&(J.isPreferred=f.isPreferred),f.disabled!==void 0&&(J.disabled={reason:f.disabled.reason}),J}function bn(f){let x=pe.CodeAction.create(f.title);if(f instanceof My.default&&f.data!==void 0&&(x.data=f.data),f.kind!==void 0&&(x.kind=d(f.kind)),f.diagnostics!==void 0&&(x.diagnostics=on(f.diagnostics)),f.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return f.command!==void 0&&(x.command=I(f.command)),f.isPreferred!==void 0&&(x.isPreferred=f.isPreferred),f.disabled!==void 0&&(x.disabled={reason:f.disabled.reason}),x}async function $t(f,x){if(f==null)return f;let J;return f.only&&Fr.string(f.only.value)&&(J=[f.only.value]),pe.CodeActionContext.create(await sn(f.diagnostics,x),J,ot(f.triggerKind))}function wn(f){if(f==null)return f;let x;return f.only&&Fr.string(f.only.value)&&(x=[f.only.value]),pe.CodeActionContext.create(on(f.diagnostics),x,ot(f.triggerKind))}function ot(f){switch(f){case ht.CodeActionTriggerKind.Invoke:return pe.CodeActionTriggerKind.Invoked;case ht.CodeActionTriggerKind.Automatic:return pe.CodeActionTriggerKind.Automatic;default:return}}function d(f){if(f!=null)return f.value}function b(f){return f==null?f:pe.InlineValueContext.create(f.frameId,Fe(f.stoppedLocation))}function P(f,x,J){return{context:pe.InlineCompletionContext.create(J.triggerKind,J.selectedCompletionInfo),textDocument:i(f),position:gt(x)}}function I(f){let x=pe.Command.create(f.title,f.command);return f.arguments&&(x.arguments=f.arguments),x}function ee(f){let x=pe.CodeLens.create(Fe(f.range));return f.command&&(x.command=I(f.command)),f instanceof Ow.default&&f.data&&(x.data=f.data),x}function Y(f,x){let J={tabSize:f.tabSize,insertSpaces:f.insertSpaces};return x.trimTrailingWhitespace&&(J.trimTrailingWhitespace=!0),x.trimFinalNewlines&&(J.trimFinalNewlines=!0),x.insertFinalNewline&&(J.insertFinalNewline=!0),J}function ie(f){return{textDocument:i(f)}}function oe(f){return{textDocument:i(f)}}function V(f){let x=pe.DocumentLink.create(Fe(f.range));f.target&&(x.target=r(f.target)),f.tooltip!==void 0&&(x.tooltip=f.tooltip);let J=f instanceof xw.default?f:void 0;return J&&J.data&&(x.data=J.data),x}function te(f){return{textDocument:i(f)}}function Q(f){let x={name:f.name,kind:st(f.kind),uri:r(f.uri),range:Fe(f.range),selectionRange:Fe(f.selectionRange)};return f.detail!==void 0&&f.detail.length>0&&(x.detail=f.detail),f.tags!==void 0&&(x.tags=At(f.tags)),f instanceof Iw.default&&f.data!==void 0&&(x.data=f.data),x}function de(f){let x={name:f.name,kind:st(f.kind),uri:r(f.uri),range:Fe(f.range),selectionRange:Fe(f.selectionRange)};return f.detail!==void 0&&f.detail.length>0&&(x.detail=f.detail),f.tags!==void 0&&(x.tags=At(f.tags)),f instanceof Nw.default&&f.data!==void 0&&(x.data=f.data),x}function _e(f){let x=f instanceof Fw.default?{name:f.name,kind:st(f.kind),location:f.hasRange?Ct(f.location):{uri:t(f.location.uri)},data:f.data}:{name:f.name,kind:st(f.kind),location:Ct(f.location)};return f.tags!==void 0&&(x.tags=At(f.tags)),f.containerName!==""&&(x.containerName=f.containerName),x}function Le(f){let x=typeof f.label=="string"?f.label:f.label.map(Wn),J=pe.InlayHint.create(gt(f.position),x);return f.kind!==void 0&&(J.kind=f.kind),f.textEdits!==void 0&&(J.textEdits=Ae(f.textEdits)),f.tooltip!==void 0&&(J.tooltip=sr(f.tooltip)),f.paddingLeft!==void 0&&(J.paddingLeft=f.paddingLeft),f.paddingRight!==void 0&&(J.paddingRight=f.paddingRight),f instanceof Mw.default&&f.data!==void 0&&(J.data=f.data),J}function Wn(f){let x=pe.InlayHintLabelPart.create(f.value);return f.location!==void 0&&(x.location=Ct(f.location)),f.command!==void 0&&(x.command=I(f.command)),f.tooltip!==void 0&&(x.tooltip=sr(f.tooltip)),x}function sr(f){return typeof f=="string"?f:{kind:pe.MarkupKind.Markdown,value:f.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:s,asVersionedTextDocumentIdentifier:o,asOpenTextDocumentParams:a,asChangeTextDocumentParams:g,asCloseTextDocumentParams:C,asSaveTextDocumentParams:y,asWillSaveTextDocumentParams:v,asDidCreateFilesParams:q,asDidRenameFilesParams:k,asDidDeleteFilesParams:A,asWillCreateFilesParams:$,asWillRenameFilesParams:M,asWillDeleteFilesParams:W,asTextDocumentPositionParams:z,asCompletionParams:B,asSignatureHelpParams:St,asWorkerPosition:pt,asRange:Fe,asRanges:dt,asPosition:gt,asPositions:en,asPositionsSync:tn,asLocation:Ct,asDiagnosticSeverity:mt,asDiagnosticTag:nn,asDiagnostic:vn,asDiagnostics:sn,asDiagnosticsSync:on,asCompletionItem:Dt,asTextEdit:_n,asSymbolKind:st,asSymbolTag:yt,asSymbolTags:At,asReferenceParams:lt,asCodeAction:cn,asCodeActionSync:bn,asCodeActionContext:$t,asCodeActionContextSync:wn,asInlineValueContext:b,asCommand:I,asCodeLens:ee,asFormattingOptions:Y,asDocumentSymbolParams:ie,asCodeLensParams:oe,asDocumentLink:V,asDocumentLinkParams:te,asCallHierarchyItem:Q,asTypeHierarchyItem:de,asInlayHint:Le,asWorkspaceSymbol:_e,asInlineCompletionParams:P}}xo.createConverter=Lw});var Hy=O(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.createConverter=void 0;var K=require("vscode"),ue=he(),Tn=Rn(),Ee=ko(),jw=wd(),Aw=Dd(),$w=Ed(),Hw=Od(),Ay=Nd(),Uw=Ld(),Ww=$d(),Kw=Wd(),zw=Vd(),$y=he(),Io;(function(n){function e(t){let r=t;return r&&Tn.string(r.language)&&Tn.string(r.value)}n.is=e})(Io||(Io={}));function Vw(n,e,t){let i=n||(c=>K.Uri.parse(c));function s(c){return i(c)}function o(c){let S=[];for(let j of c)if(typeof j=="string")S.push(j);else if($y.NotebookCellTextDocumentFilter.is(j))if(typeof j.notebook=="string")S.push({notebookType:j.notebook,language:j.language});else{let Z=j.notebook.notebookType??"*";S.push({notebookType:Z,scheme:j.notebook.scheme,pattern:j.notebook.pattern,language:j.language})}else $y.TextDocumentFilter.is(j)&&S.push({language:j.language,scheme:j.scheme,pattern:j.pattern});return S}async function a(c,S){return Ee.map(c,h,S)}function u(c){let S=new Array(c.length);for(let j=0;j<c.length;j++)S[j]=h(c[j]);return S}function h(c){let S=new Ay.ProtocolDiagnostic(v(c.range),c.message,k(c.severity),c.data);if(c.code!==void 0){if(typeof c.code=="string"||typeof c.code=="number")ue.CodeDescription.is(c.codeDescription)?S.code={value:c.code,target:s(c.codeDescription.href)}:S.code=c.code;else if(Ay.DiagnosticCode.is(c.code)){S.hasDiagnosticCode=!0;let j=c.code;S.code={value:j.value,target:s(j.target)}}}return c.source&&(S.source=c.source),c.relatedInformation&&(S.relatedInformation=g(c.relatedInformation)),Array.isArray(c.tags)&&(S.tags=C(c.tags)),S}function g(c){let S=new Array(c.length);for(let j=0;j<c.length;j++){let Z=c[j];S[j]=new K.DiagnosticRelatedInformation(mt(Z.location),Z.message)}return S}function C(c){if(!c)return;let S=[];for(let j of c){let Z=y(j);Z!==void 0&&S.push(Z)}return S.length>0?S:void 0}function y(c){switch(c){case ue.DiagnosticTag.Unnecessary:return K.DiagnosticTag.Unnecessary;case ue.DiagnosticTag.Deprecated:return K.DiagnosticTag.Deprecated;default:return}}function D(c){return c?new K.Position(c.line,c.character):void 0}function v(c){return c?new K.Range(c.start.line,c.start.character,c.end.line,c.end.character):void 0}async function q(c,S){return Ee.map(c,j=>new K.Range(j.start.line,j.start.character,j.end.line,j.end.character),S)}function k(c){if(c==null)return K.DiagnosticSeverity.Error;switch(c){case ue.DiagnosticSeverity.Error:return K.DiagnosticSeverity.Error;case ue.DiagnosticSeverity.Warning:return K.DiagnosticSeverity.Warning;case ue.DiagnosticSeverity.Information:return K.DiagnosticSeverity.Information;case ue.DiagnosticSeverity.Hint:return K.DiagnosticSeverity.Hint}return K.DiagnosticSeverity.Error}function A(c){if(Tn.string(c))return M(c);if(Io.is(c))return M().appendCodeblock(c.value,c.language);if(Array.isArray(c)){let S=[];for(let j of c){let Z=M();Io.is(j)?Z.appendCodeblock(j.value,j.language):Z.appendMarkdown(j),S.push(Z)}return S}else return M(c)}function $(c){if(Tn.string(c))return c;switch(c.kind){case ue.MarkupKind.Markdown:return M(c.value);case ue.MarkupKind.PlainText:return c.value;default:return`Unsupported Markup content received. Kind is: ${c.kind}`}}function M(c){let S;if(c===void 0||typeof c=="string")S=new K.MarkdownString(c);else switch(c.kind){case ue.MarkupKind.Markdown:S=new K.MarkdownString(c.value);break;case ue.MarkupKind.PlainText:S=new K.MarkdownString,S.appendText(c.value);break;default:S=new K.MarkdownString,S.appendText(`Unsupported Markup content received. Kind is: ${c.kind}`);break}return S.isTrusted=e,S.supportHtml=t,S}function W(c){if(c)return new K.Hover(A(c.contents),v(c.range))}async function z(c,S,j){if(!c)return;if(Array.isArray(c))return Ee.map(c,zn=>Xe(zn,S),j);let Z=c,{defaultRange:_t,commitCharacters:Tt}=le(Z,S),je=await Ee.map(Z.items,zn=>Xe(zn,Tt,_t,Z.itemDefaults?.insertTextMode,Z.itemDefaults?.insertTextFormat,Z.itemDefaults?.data),j);return new K.CompletionList(je,Z.isIncomplete)}function le(c,S){let j=c.itemDefaults?.editRange,Z=c.itemDefaults?.commitCharacters??S;return ue.Range.is(j)?{defaultRange:v(j),commitCharacters:Z}:j!==void 0?{defaultRange:{inserting:v(j.insert),replacing:v(j.replace)},commitCharacters:Z}:{defaultRange:void 0,commitCharacters:Z}}function B(c){return ue.CompletionItemKind.Text<=c&&c<=ue.CompletionItemKind.TypeParameter?[c-1,void 0]:[K.CompletionItemKind.Text,c]}function se(c){switch(c){case ue.CompletionItemTag.Deprecated:return K.CompletionItemTag.Deprecated}}function Ce(c){if(c==null)return[];let S=[];for(let j of c){let Z=se(j);Z!==void 0&&S.push(Z)}return S}function Xe(c,S,j,Z,_t,Tt){let je=Ce(c.tags),zn=ze(c),He=new jw.default(zn);c.detail&&(He.detail=c.detail),c.documentation&&(He.documentation=$(c.documentation),He.documentationFormat=Tn.string(c.documentation)?"$string":c.documentation.kind),c.filterText&&(He.filterText=c.filterText);let _s=Ne(c,j,_t);if(_s&&(He.insertText=_s.text,He.range=_s.range,He.fromEdit=_s.fromEdit),Tn.number(c.kind)){let[__,bh]=B(c.kind);He.kind=__,bh&&(He.originalItemKind=bh)}c.sortText&&(He.sortText=c.sortText),c.additionalTextEdits&&(He.additionalTextEdits=gt(c.additionalTextEdits));let Ch=c.commitCharacters!==void 0?Tn.stringArray(c.commitCharacters)?c.commitCharacters:void 0:S;Ch&&(He.commitCharacters=Ch.slice()),c.command&&(He.command=Ae(c.command)),(c.deprecated===!0||c.deprecated===!1)&&(He.deprecated=c.deprecated,c.deprecated===!0&&je.push(K.CompletionItemTag.Deprecated)),(c.preselect===!0||c.preselect===!1)&&(He.preselect=c.preselect);let _h=c.data??Tt;_h!==void 0&&(He.data=_h),je.length>0&&(He.tags=je);let Ia=c.insertTextMode??Z;return Ia!==void 0&&(He.insertTextMode=Ia,Ia===ue.InsertTextMode.asIs&&(He.keepWhitespace=!0)),He}function ze(c){return ue.CompletionItemLabelDetails.is(c.labelDetails)?{label:c.label,detail:c.labelDetails.detail,description:c.labelDetails.description}:c.label}function Ne(c,S,j){let Z=c.insertTextFormat??j;if(c.textEdit!==void 0||S!==void 0){let[_t,Tt]=c.textEdit!==void 0?jt(c.textEdit):[S,c.textEditText??c.label];return Z===ue.InsertTextFormat.Snippet?{text:new K.SnippetString(Tt),range:_t,fromEdit:!0}:{text:Tt,range:_t,fromEdit:!0}}else return c.insertText?Z===ue.InsertTextFormat.Snippet?{text:new K.SnippetString(c.insertText),fromEdit:!1}:{text:c.insertText,fromEdit:!1}:void 0}function jt(c){return ue.InsertReplaceEdit.is(c)?[{inserting:v(c.insert),replacing:v(c.replace)},c.newText]:[v(c.range),c.newText]}function St(c){if(c)return new K.TextEdit(v(c.range),c.newText)}async function pt(c,S){if(c)return Ee.map(c,St,S)}function gt(c){if(!c)return;let S=new Array(c.length);for(let j=0;j<c.length;j++)S[j]=St(c[j]);return S}async function en(c,S){if(!c)return;let j=new K.SignatureHelp;return Tn.number(c.activeSignature)?j.activeSignature=c.activeSignature:j.activeSignature=0,Tn.number(c.activeParameter)?j.activeParameter=c.activeParameter:j.activeParameter=0,c.signatures&&(j.signatures=await tn(c.signatures,S)),j}async function tn(c,S){return Ee.mapAsync(c,Fe,S)}async function Fe(c,S){let j=new K.SignatureInformation(c.label);return c.documentation!==void 0&&(j.documentation=$(c.documentation)),c.parameters!==void 0&&(j.parameters=await dt(c.parameters,S)),c.activeParameter!==void 0&&(j.activeParameter=c.activeParameter),j}function dt(c,S){return Ee.map(c,Ct,S)}function Ct(c){let S=new K.ParameterInformation(c.label);return c.documentation&&(S.documentation=$(c.documentation)),S}function mt(c){return c?new K.Location(i(c.uri),v(c.range)):void 0}async function $n(c,S){if(c)return kn(c,S)}async function nn(c,S){if(c)return kn(c,S)}function rn(c){if(!c)return;let S={targetUri:i(c.targetUri),targetRange:v(c.targetRange),originSelectionRange:v(c.originSelectionRange),targetSelectionRange:v(c.targetSelectionRange)};if(!S.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return S}async function kn(c,S){if(c)if(Tn.array(c)){if(c.length===0)return[];if(ue.LocationLink.is(c[0])){let j=c;return Ee.map(j,rn,S)}else{let j=c;return Ee.map(j,mt,S)}}else return ue.LocationLink.is(c)?[rn(c)]:mt(c)}async function Hn(c,S){if(c)return Ee.map(c,mt,S)}async function vn(c,S){if(c)return Ee.map(c,sn,S)}function sn(c){let S=new K.DocumentHighlight(v(c.range));return Tn.number(c.kind)&&(S.kind=on(c.kind)),S}function on(c){switch(c){case ue.DocumentHighlightKind.Text:return K.DocumentHighlightKind.Text;case ue.DocumentHighlightKind.Read:return K.DocumentHighlightKind.Read;case ue.DocumentHighlightKind.Write:return K.DocumentHighlightKind.Write}return K.DocumentHighlightKind.Text}async function Cn(c,S){if(c)return Ee.map(c,Dt,S)}function Me(c){return c<=ue.SymbolKind.TypeParameter?c-1:K.SymbolKind.Property}function On(c){switch(c){case ue.SymbolTag.Deprecated:return K.SymbolTag.Deprecated;default:return}}function an(c){if(c==null)return;let S=[];for(let j of c){let Z=On(j);Z!==void 0&&S.push(Z)}return S.length===0?void 0:S}function Dt(c){let S=c.data,j=c.location,Z=j.range===void 0||S!==void 0?new Kw.default(c.name,Me(c.kind),c.containerName??"",j.range===void 0?i(j.uri):new K.Location(i(c.location.uri),v(j.range)),S):new K.SymbolInformation(c.name,Me(c.kind),c.containerName??"",new K.Location(i(c.location.uri),v(j.range)));return _n(Z,c),Z}async function Un(c,S){if(c!=null)return Ee.map(c,qt,S)}function qt(c){let S=new K.DocumentSymbol(c.name,c.detail||"",Me(c.kind),v(c.range),v(c.selectionRange));if(_n(S,c),c.children!==void 0&&c.children.length>0){let j=[];for(let Z of c.children)j.push(qt(Z));S.children=j}return S}function _n(c,S){c.tags=an(S.tags),S.deprecated&&(c.tags?c.tags.includes(K.SymbolTag.Deprecated)||(c.tags=c.tags.concat(K.SymbolTag.Deprecated)):c.tags=[K.SymbolTag.Deprecated])}function Ae(c){let S={title:c.title,command:c.command};return c.arguments&&(S.arguments=c.arguments),S}async function st(c,S){if(c)return Ee.map(c,Ae,S)}let yt=new Map;yt.set(ue.CodeActionKind.Empty,K.CodeActionKind.Empty),yt.set(ue.CodeActionKind.QuickFix,K.CodeActionKind.QuickFix),yt.set(ue.CodeActionKind.Refactor,K.CodeActionKind.Refactor),yt.set(ue.CodeActionKind.RefactorExtract,K.CodeActionKind.RefactorExtract),yt.set(ue.CodeActionKind.RefactorInline,K.CodeActionKind.RefactorInline),yt.set(ue.CodeActionKind.RefactorRewrite,K.CodeActionKind.RefactorRewrite),yt.set(ue.CodeActionKind.Source,K.CodeActionKind.Source),yt.set(ue.CodeActionKind.SourceOrganizeImports,K.CodeActionKind.SourceOrganizeImports);function At(c){if(c==null)return;let S=yt.get(c);if(S)return S;let j=c.split(".");S=K.CodeActionKind.Empty;for(let Z of j)S=S.append(Z);return S}function lt(c){if(c!=null)return c.map(S=>At(S))}async function cn(c,S){if(c==null)return;let j=new Hw.default(c.title,c.data);return c.kind!==void 0&&(j.kind=At(c.kind)),c.diagnostics!==void 0&&(j.diagnostics=u(c.diagnostics)),c.edit!==void 0&&(j.edit=await ot(c.edit,S)),c.command!==void 0&&(j.command=Ae(c.command)),c.isPreferred!==void 0&&(j.isPreferred=c.isPreferred),c.disabled!==void 0&&(j.disabled={reason:c.disabled.reason}),j}function bn(c,S){return Ee.mapAsync(c,async j=>ue.Command.is(j)?Ae(j):cn(j,S),S)}function $t(c){if(!c)return;let S=new Aw.default(v(c.range));return c.command&&(S.command=Ae(c.command)),c.data!==void 0&&c.data!==null&&(S.data=c.data),S}async function wn(c,S){if(c)return Ee.map(c,$t,S)}async function ot(c,S){if(!c)return;let j=new Map;if(c.changeAnnotations!==void 0){let Tt=c.changeAnnotations;await Ee.forEach(Object.keys(Tt),je=>{let zn=d(Tt[je]);j.set(je,zn)},S)}let Z=Tt=>{if(Tt!==void 0)return j.get(Tt)},_t=new K.WorkspaceEdit;if(c.documentChanges){let Tt=c.documentChanges;await Ee.forEach(Tt,je=>{if(ue.CreateFile.is(je))_t.createFile(i(je.uri),je.options,Z(je.annotationId));else if(ue.RenameFile.is(je))_t.renameFile(i(je.oldUri),i(je.newUri),je.options,Z(je.annotationId));else if(ue.DeleteFile.is(je))_t.deleteFile(i(je.uri),je.options,Z(je.annotationId));else if(ue.TextDocumentEdit.is(je)){let zn=i(je.textDocument.uri);for(let He of je.edits)ue.AnnotatedTextEdit.is(He)?_t.replace(zn,v(He.range),He.newText,Z(He.annotationId)):_t.replace(zn,v(He.range),He.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(je,void 0,4)}`)},S)}else if(c.changes){let Tt=c.changes;await Ee.forEach(Object.keys(Tt),je=>{_t.set(i(je),gt(Tt[je]))},S)}return _t}function d(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function b(c){let S=v(c.range),j=c.target?s(c.target):void 0,Z=new $w.default(S,j);return c.tooltip!==void 0&&(Z.tooltip=c.tooltip),c.data!==void 0&&c.data!==null&&(Z.data=c.data),Z}async function P(c,S){if(c)return Ee.map(c,b,S)}function I(c){return new K.Color(c.red,c.green,c.blue,c.alpha)}function ee(c){return new K.ColorInformation(v(c.range),I(c.color))}async function Y(c,S){if(c)return Ee.map(c,ee,S)}function ie(c){let S=new K.ColorPresentation(c.label);return S.additionalTextEdits=gt(c.additionalTextEdits),c.textEdit&&(S.textEdit=St(c.textEdit)),S}async function oe(c,S){if(c)return Ee.map(c,ie,S)}function V(c){if(c)switch(c){case ue.FoldingRangeKind.Comment:return K.FoldingRangeKind.Comment;case ue.FoldingRangeKind.Imports:return K.FoldingRangeKind.Imports;case ue.FoldingRangeKind.Region:return K.FoldingRangeKind.Region}}function te(c){return new K.FoldingRange(c.startLine,c.endLine,V(c.kind))}async function Q(c,S){if(c)return Ee.map(c,te,S)}function de(c){return new K.SelectionRange(v(c.range),c.parent?de(c.parent):void 0)}async function _e(c,S){return Array.isArray(c)?Ee.map(c,de,S):[]}function Le(c){return ue.InlineValueText.is(c)?new K.InlineValueText(v(c.range),c.text):ue.InlineValueVariableLookup.is(c)?new K.InlineValueVariableLookup(v(c.range),c.variableName,c.caseSensitiveLookup):new K.InlineValueEvaluatableExpression(v(c.range),c.expression)}async function Wn(c,S){return Array.isArray(c)?Ee.map(c,Le,S):[]}async function sr(c,S){let j=typeof c.label=="string"?c.label:await Ee.map(c.label,f,S),Z=new zw.default(D(c.position),j);return c.kind!==void 0&&(Z.kind=c.kind),c.textEdits!==void 0&&(Z.textEdits=await pt(c.textEdits,S)),c.tooltip!==void 0&&(Z.tooltip=x(c.tooltip)),c.paddingLeft!==void 0&&(Z.paddingLeft=c.paddingLeft),c.paddingRight!==void 0&&(Z.paddingRight=c.paddingRight),c.data!==void 0&&(Z.data=c.data),Z}function f(c){let S=new K.InlayHintLabelPart(c.value);return c.location!==void 0&&(S.location=mt(c.location)),c.tooltip!==void 0&&(S.tooltip=x(c.tooltip)),c.command!==void 0&&(S.command=Ae(c.command)),S}function x(c){return typeof c=="string"?c:M(c)}async function J(c,S){if(Array.isArray(c))return Ee.mapAsync(c,sr,S)}function qe(c){if(c===null)return;let S=new Uw.default(Me(c.kind),c.name,c.detail||"",s(c.uri),v(c.range),v(c.selectionRange),c.data);return c.tags!==void 0&&(S.tags=an(c.tags)),S}async function T(c,S){if(c!==null)return Ee.map(c,qe,S)}async function p(c,S){return new K.CallHierarchyIncomingCall(qe(c.from),await q(c.fromRanges,S))}async function w(c,S){if(c!==null)return Ee.mapAsync(c,p,S)}async function R(c,S){return new K.CallHierarchyOutgoingCall(qe(c.to),await q(c.fromRanges,S))}async function m(c,S){if(c!==null)return Ee.mapAsync(c,R,S)}async function l(c,S){if(c!=null)return new K.SemanticTokens(new Uint32Array(c.data),c.resultId)}function E(c){return new K.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}async function L(c,S){if(c!=null)return new K.SemanticTokensEdits(c.edits.map(E),c.resultId)}function fe(c){return c}async function Je(c,S){if(c!=null)return new K.LinkedEditingRanges(await q(c.ranges,S),$e(c.wordPattern))}function $e(c){if(c!=null)return new RegExp(c)}function Kt(c){if(c===null)return;let S=new Ww.default(Me(c.kind),c.name,c.detail||"",s(c.uri),v(c.range),v(c.selectionRange),c.data);return c.tags!==void 0&&(S.tags=an(c.tags)),S}async function un(c,S){if(c!==null)return Ee.map(c,Kt,S)}function xn(c){if(Tn.string(c))return c;if(ue.RelativePattern.is(c)){if(ue.URI.is(c.baseUri))return new K.RelativePattern(s(c.baseUri),c.pattern);if(ue.WorkspaceFolder.is(c.baseUri)){let S=K.workspace.getWorkspaceFolder(s(c.baseUri.uri));return S!==void 0?new K.RelativePattern(S,c.pattern):void 0}}}async function we(c,S){if(!c)return;if(Array.isArray(c))return Ee.map(c,_t=>Kn(_t),S);let j=c,Z=await Ee.map(j.items,_t=>Kn(_t),S);return new K.InlineCompletionList(Z)}function Kn(c){let S;typeof c.insertText=="string"?S=c.insertText:S=new K.SnippetString(c.insertText.value);let j;c.command&&(j=Ae(c.command));let Z=new K.InlineCompletionItem(S,v(c.range),j);return c.filterText&&(Z.filterText=c.filterText),Z}return{asUri:s,asDocumentSelector:o,asDiagnostics:a,asDiagnostic:h,asRange:v,asRanges:q,asPosition:D,asDiagnosticSeverity:k,asDiagnosticTag:y,asHover:W,asCompletionResult:z,asCompletionItem:Xe,asTextEdit:St,asTextEdits:pt,asSignatureHelp:en,asSignatureInformations:tn,asSignatureInformation:Fe,asParameterInformations:dt,asParameterInformation:Ct,asDeclarationResult:$n,asDefinitionResult:nn,asLocation:mt,asReferences:Hn,asDocumentHighlights:vn,asDocumentHighlight:sn,asDocumentHighlightKind:on,asSymbolKind:Me,asSymbolTag:On,asSymbolTags:an,asSymbolInformations:Cn,asSymbolInformation:Dt,asDocumentSymbols:Un,asDocumentSymbol:qt,asCommand:Ae,asCommands:st,asCodeAction:cn,asCodeActionKind:At,asCodeActionKinds:lt,asCodeActionResult:bn,asCodeLens:$t,asCodeLenses:wn,asWorkspaceEdit:ot,asDocumentLink:b,asDocumentLinks:P,asFoldingRangeKind:V,asFoldingRange:te,asFoldingRanges:Q,asColor:I,asColorInformation:ee,asColorInformations:Y,asColorPresentation:ie,asColorPresentations:oe,asSelectionRange:de,asSelectionRanges:_e,asInlineValue:Le,asInlineValues:Wn,asInlayHint:sr,asInlayHints:J,asSemanticTokensLegend:fe,asSemanticTokens:l,asSemanticTokensEdit:E,asSemanticTokensEdits:L,asCallHierarchyItem:qe,asCallHierarchyItems:T,asCallHierarchyIncomingCall:p,asCallHierarchyIncomingCalls:w,asCallHierarchyOutgoingCall:R,asCallHierarchyOutgoingCalls:m,asLinkedEditingRanges:Je,asTypeHierarchyItem:Kt,asTypeHierarchyItems:un,asGlobPattern:xn,asInlineCompletionResult:we,asInlineCompletionItem:Kn}}No.createConverter=Vw});var Ye=O(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.generateUuid=Pn.parse=Pn.isUUID=Pn.v4=Pn.empty=void 0;var Xi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Ji=class n extends Xi{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}};Ji._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Ji._timeHighBits=["8","9","a","b"];Pn.empty=new Xi("00000000-0000-0000-0000-000000000000");function Uy(){return new Ji}Pn.v4=Uy;var Bw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Wy(n){return Bw.test(n)}Pn.isUUID=Wy;function Gw(n){if(!Wy(n))throw new Error("invalid uuid");return new Xi(n)}Pn.parse=Gw;function Xw(){return Uy().asHex()}Pn.generateUuid=Xw});var Xd=O(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.ProgressPart=void 0;var Ky=require("vscode"),zy=he(),Vy=Rn(),Gd=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(zy.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&Ky.window.withProgress({location:Ky.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(zy.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,s)=>{this._resolve=i,this._reject=s})})}report(e){if(this._infinite&&Vy.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(Vy.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Fo.ProgressPart=Gd});var Pe=O(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.WorkspaceFeature=wt.TextDocumentLanguageFeature=wt.TextDocumentEventFeature=wt.DynamicDocumentFeature=wt.DynamicFeature=wt.StaticFeature=wt.ensure=wt.LSPCancellationError=void 0;var Mr=require("vscode"),Jd=he(),Ht=Rn(),By=Ye(),Qd=class extends Mr.CancellationError{constructor(e){super(),this.data=e}};wt.LSPCancellationError=Qd;function Jw(n,e){return n[e]===void 0&&(n[e]={}),n[e]}wt.ensure=Jw;var Gy;(function(n){function e(t){let r=t;return r!=null&&Ht.func(r.fillClientCapabilities)&&Ht.func(r.initialize)&&Ht.func(r.getState)&&Ht.func(r.clear)&&(r.fillInitializeParams===void 0||Ht.func(r.fillInitializeParams))}n.is=e})(Gy||(wt.StaticFeature=Gy={}));var Xy;(function(n){function e(t){let r=t;return r!=null&&Ht.func(r.fillClientCapabilities)&&Ht.func(r.initialize)&&Ht.func(r.getState)&&Ht.func(r.clear)&&(r.fillInitializeParams===void 0||Ht.func(r.fillInitializeParams))&&Ht.func(r.register)&&Ht.func(r.unregister)&&r.registrationType!==void 0}n.is=e})(Xy||(wt.DynamicFeature=Xy={}));var Qi=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),t=0;for(let i of e){t++;for(let s of Mr.workspace.textDocuments)if(Mr.languages.match(i,s)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let r=t>0;return{kind:"document",id:this.registrationType.method,registrations:r,matches:!1}}};wt.DynamicDocumentFeature=Qi;var Yd=class extends Qi{static textDocumentFilter(e,t){for(let r of e)if(Mr.languages.match(r,t)>0)return!0;return!1}constructor(e,t,r,i,s,o,a){super(e),this._event=t,this._type=r,this._middleware=i,this._createParams=s,this._textDocument=o,this._selectorFilter=a,this._selectors=new Map,this._onNotificationSent=new Mr.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(t=>{this.callback(t).catch(r=>{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let t=async r=>{let i=this._createParams(r);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(r),this._type,i)};if(this.matches(e)){let r=this._middleware();return r?r(e,i=>t(i)):t(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(Mr.languages.match(t,e)>0)return{send:r=>this.callback(r)}}};wt.TextDocumentEventFeature=Yd;var Zd=class extends Qi{constructor(e,t){super(e),this._registrationType=t,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let t=e.data.registerOptions.documentSelector;t!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(t))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(Jd.TextDocumentRegistrationOptions.is(t)){let r=Jd.StaticRegistrationOptions.hasId(t)?t.id:By.generateUuid(),i=t.documentSelector??e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(Ht.boolean(t)&&t===!0||Jd.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=Ht.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[By.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return Ht.boolean(t)&&t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&&Mr.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(r),e)>0)return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};wt.TextDocumentLanguageFeature=Zd;var el=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&&t.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};wt.WorkspaceFeature=el});var Qy=O((xP,Jy)=>{var Qw=typeof process=="object"&&process&&process.platform==="win32";Jy.exports=Qw?{sep:"\\"}:{sep:"/"}});var nv=O((IP,tv)=>{"use strict";tv.exports=Zy;function Zy(n,e,t){n instanceof RegExp&&(n=Yy(n,t)),e instanceof RegExp&&(e=Yy(e,t));var r=ev(n,e,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function Yy(n,e){var t=e.match(n);return t?t[0]:null}Zy.range=ev;function ev(n,e,t){var r,i,s,o,a,u=t.indexOf(n),h=t.indexOf(e,u+1),g=u;if(u>=0&&h>0){if(n===e)return[u,h];for(r=[],s=t.length;g>=0&&!a;)g==u?(r.push(g),u=t.indexOf(n,g+1)):r.length==1?a=[r.pop(),h]:(i=r.pop(),i<s&&(s=i,o=h),h=t.indexOf(e,g+1)),g=u<h&&u>=0?u:h;r.length&&(a=[s,o])}return a}});var dv=O((NP,uv)=>{var rv=nv();uv.exports=eR;var iv="\0SLASH"+Math.random()+"\0",sv="\0OPEN"+Math.random()+"\0",nl="\0CLOSE"+Math.random()+"\0",ov="\0COMMA"+Math.random()+"\0",av="\0PERIOD"+Math.random()+"\0";function tl(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Yw(n){return n.split("\\\\").join(iv).split("\\{").join(sv).split("\\}").join(nl).split("\\,").join(ov).split("\\.").join(av)}function Zw(n){return n.split(iv).join("\\").split(sv).join("{").split(nl).join("}").split(ov).join(",").split(av).join(".")}function cv(n){if(!n)return[""];var e=[],t=rv("{","}",n);if(!t)return n.split(",");var r=t.pre,i=t.body,s=t.post,o=r.split(",");o[o.length-1]+="{"+i+"}";var a=cv(s);return s.length&&(o[o.length-1]+=a.shift(),o.push.apply(o,a)),e.push.apply(e,o),e}function eR(n){return n?(n.substr(0,2)==="{}"&&(n="\\{\\}"+n.substr(2)),Yi(Yw(n),!0).map(Zw)):[]}function tR(n){return"{"+n+"}"}function nR(n){return/^-?0\d/.test(n)}function rR(n,e){return n<=e}function iR(n,e){return n>=e}function Yi(n,e){var t=[],r=rv("{","}",n);if(!r)return[n];var i=r.pre,s=r.post.length?Yi(r.post,!1):[""];if(/\$$/.test(r.pre))for(var o=0;o<s.length;o++){var a=i+"{"+r.body+"}"+s[o];t.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),h=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),g=u||h,C=r.body.indexOf(",")>=0;if(!g&&!C)return r.post.match(/,.*\}/)?(n=r.pre+"{"+r.body+nl+r.post,Yi(n)):[n];var y;if(g)y=r.body.split(/\.\./);else if(y=cv(r.body),y.length===1&&(y=Yi(y[0],!1).map(tR),y.length===1))return s.map(function(Xe){return r.pre+y[0]+Xe});var D;if(g){var v=tl(y[0]),q=tl(y[1]),k=Math.max(y[0].length,y[1].length),A=y.length==3?Math.abs(tl(y[2])):1,$=rR,M=q<v;M&&(A*=-1,$=iR);var W=y.some(nR);D=[];for(var z=v;$(z,q);z+=A){var le;if(h)le=String.fromCharCode(z),le==="\\"&&(le="");else if(le=String(z),W){var B=k-le.length;if(B>0){var se=new Array(B+1).join("0");z<0?le="-"+se+le.slice(1):le=se+le}}D.push(le)}}else{D=[];for(var Ce=0;Ce<y.length;Ce++)D.push.apply(D,Yi(y[Ce],!1))}for(var Ce=0;Ce<D.length;Ce++)for(var o=0;o<s.length;o++){var a=i+D[Ce]+s[o];(!e||g||a)&&t.push(a)}}return t}});var Lo=O((MP,al)=>{var pn=al.exports=(n,e,t={})=>(Mo(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Ci(e,t).match(n));al.exports=pn;var sl=Qy();pn.sep=sl.sep;var Mn=Symbol("globstar **");pn.GLOBSTAR=Mn;var sR=dv(),lv={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ol="[^/]",rl=ol+"*?",oR="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",aR="(?:(?!(?:\\/|^)\\.).)*?",pv=n=>n.split("").reduce((e,t)=>(e[t]=!0,e),{}),fv=pv("().*{}+?[]^$\\!"),cR=pv("[.("),hv=/\/+/;pn.filter=(n,e={})=>(t,r,i)=>pn(t,n,e);var Cr=(n,e={})=>{let t={};return Object.keys(n).forEach(r=>t[r]=n[r]),Object.keys(e).forEach(r=>t[r]=e[r]),t};pn.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return pn;let e=pn,t=(r,i,s)=>e(r,i,Cr(n,s));return t.Minimatch=class extends e.Minimatch{constructor(i,s){super(i,Cr(n,s))}},t.Minimatch.defaults=r=>e.defaults(Cr(n,r)).Minimatch,t.filter=(r,i)=>e.filter(r,Cr(n,i)),t.defaults=r=>e.defaults(Cr(n,r)),t.makeRe=(r,i)=>e.makeRe(r,Cr(n,i)),t.braceExpand=(r,i)=>e.braceExpand(r,Cr(n,i)),t.match=(r,i,s)=>e.match(r,i,Cr(n,s)),t};pn.braceExpand=(n,e)=>gv(n,e);var gv=(n,e={})=>(Mo(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:sR(n)),uR=1024*64,Mo=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>uR)throw new TypeError("pattern is too long")},il=Symbol("subparse");pn.makeRe=(n,e)=>new Ci(n,e||{}).makeRe();pn.match=(n,e,t={})=>{let r=new Ci(e,t);return n=n.filter(i=>r.match(i)),r.options.nonull&&!n.length&&n.push(e),n};var dR=n=>n.replace(/\\(.)/g,"$1"),lR=n=>n.replace(/\\([^-\]])/g,"$1"),fR=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),hR=n=>n.replace(/[[\]\\]/g,"\\$&"),Ci=class{constructor(e,t){Mo(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(hv)),this.debug(this.pattern,r),r=r.map((i,s,o)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,t=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,r++;r&&(this.pattern=e.slice(r)),this.negate=t}matchOne(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,u=t.length;s<a&&o<u;s++,o++){this.debug("matchOne loop");var h=t[o],g=e[s];if(this.debug(t,h,g),h===!1)return!1;if(h===Mn){this.debug("GLOBSTAR",[t,h,g]);var C=s,y=o+1;if(y===u){for(this.debug("** at the end");s<a;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;C<a;){var D=e[C];if(this.debug(`
globstar while`,e,C,t,y,D),this.matchOne(e.slice(C),t.slice(y),r))return this.debug("globstar found match!",C,a,D),!0;if(D==="."||D===".."||!i.dot&&D.charAt(0)==="."){this.debug("dot detected!",e,C,t,y);break}this.debug("globstar swallow a segment, and continue"),C++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,C,t,y),C===a))}var v;if(typeof h=="string"?(v=g===h,this.debug("string match",h,g,v)):(v=g.match(h),this.debug("pattern match",h,g,v)),!v)return!1}if(s===a&&o===u)return!0;if(s===a)return r;if(o===u)return s===a-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return gv(this.pattern,this.options)}parse(e,t){Mo(e);let r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Mn;if(e==="")return"";let i="",s=!1,o=!1,a=[],u=[],h,g=!1,C=-1,y=-1,D,v,q,k=e.charAt(0)===".",A=r.dot||k,$=()=>k?"":A?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",M=B=>B.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",W=()=>{if(h){switch(h){case"*":i+=rl,s=!0;break;case"?":i+=ol,s=!0;break;default:i+="\\"+h;break}this.debug("clearStateChar %j %j",h,i),h=!1}};for(let B=0,se;B<e.length&&(se=e.charAt(B));B++){if(this.debug("%s	%s %s %j",e,B,i,se),o){if(se==="/")return!1;fv[se]&&(i+="\\"),i+=se,o=!1;continue}switch(se){case"/":return!1;case"\\":if(g&&e.charAt(B+1)==="-"){i+=se;continue}W(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,B,i,se),g){this.debug("  in class"),se==="!"&&B===y+1&&(se="^"),i+=se;continue}this.debug("call clearStateChar %j",h),W(),h=se,r.noext&&W();continue;case"(":{if(g){i+="(";continue}if(!h){i+="\\(";continue}let Ce={type:h,start:B-1,reStart:i.length,open:lv[h].open,close:lv[h].close};this.debug(this.pattern,"	",Ce),a.push(Ce),i+=Ce.open,Ce.start===0&&Ce.type!=="!"&&(k=!0,i+=M(e.slice(B+1))),this.debug("plType %j %j",h,i),h=!1;continue}case")":{let Ce=a[a.length-1];if(g||!Ce){i+="\\)";continue}a.pop(),W(),s=!0,v=Ce,i+=v.close,v.type==="!"&&u.push(Object.assign(v,{reEnd:i.length}));continue}case"|":{let Ce=a[a.length-1];if(g||!Ce){i+="\\|";continue}W(),i+="|",Ce.start===0&&Ce.type!=="!"&&(k=!0,i+=M(e.slice(B+1)));continue}case"[":if(W(),g){i+="\\"+se;continue}g=!0,y=B,C=i.length,i+=se;continue;case"]":if(B===y+1||!g){i+="\\"+se;continue}D=e.substring(y+1,B);try{RegExp("["+hR(lR(D))+"]"),i+=se}catch{i=i.substring(0,C)+"(?:$.)"}s=!0,g=!1;continue;default:W(),fv[se]&&!(se==="^"&&g)&&(i+="\\"),i+=se;break}}for(g&&(D=e.slice(y+1),q=this.parse(D,il),i=i.substring(0,C)+"\\["+q[0],s=s||q[1]),v=a.pop();v;v=a.pop()){let B;B=i.slice(v.reStart+v.open.length),this.debug("setting tail",i,v),B=B.replace(/((?:\\{2}){0,64})(\\?)\|/g,(Ce,Xe,ze)=>(ze||(ze="\\"),Xe+Xe+ze+"|")),this.debug(`tail=%j
   %s`,B,B,v,i);let se=v.type==="*"?rl:v.type==="?"?ol:"\\"+v.type;s=!0,i=i.slice(0,v.reStart)+se+"\\("+B}W(),o&&(i+="\\\\");let z=cR[i.charAt(0)];for(let B=u.length-1;B>-1;B--){let se=u[B],Ce=i.slice(0,se.reStart),Xe=i.slice(se.reStart,se.reEnd-8),ze=i.slice(se.reEnd),Ne=i.slice(se.reEnd-8,se.reEnd)+ze,jt=Ce.split(")").length,St=Ce.split("(").length-jt,pt=ze;for(let en=0;en<St;en++)pt=pt.replace(/\)[+*?]?/,"");ze=pt;let gt=ze===""&&t!==il?"(?:$|\\/)":"";i=Ce+Xe+ze+gt+Ne}if(i!==""&&s&&(i="(?=.)"+i),z&&(i=$()+i),t===il)return[i,s];if(r.nocase&&!s&&(s=e.toUpperCase()!==e.toLowerCase()),!s)return dR(e);let le=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",le),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,r=t.noglobstar?rl:t.dot?oR:aR,i=t.nocase?"i":"",s=e.map(o=>(o=o.map(a=>typeof a=="string"?fR(a):a===Mn?Mn:a._src).reduce((a,u)=>(a[a.length-1]===Mn&&u===Mn||a.push(u),a),[]),o.forEach((a,u)=>{a!==Mn||o[u-1]===Mn||(u===0?o.length>1?o[u+1]="(?:\\/|"+r+"\\/)?"+o[u+1]:o[u]=r:u===o.length-1?o[u-1]+="(?:\\/|"+r+")?":(o[u-1]+="(?:\\/|\\/"+r+"\\/)"+o[u+1],o[u+1]=Mn))}),o.filter(a=>a!==Mn).join("/"))).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch{this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let r=this.options;sl.sep!=="/"&&(e=e.split(sl.sep).join("/")),e=e.split(hv),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let s;for(let o=e.length-1;o>=0&&(s=e[o],!s);o--);for(let o=0;o<i.length;o++){let a=i[o],u=e;if(r.matchBase&&a.length===1&&(u=[s]),this.matchOne(u,a,t))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return pn.defaults(e).Minimatch}};pn.Minimatch=Ci});var gl=O(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.DiagnosticFeature=_r.DiagnosticPullMode=_r.vsdiag=void 0;var pR=Lo(),Re=require("vscode"),ut=he(),gR=Ye(),cl=Pe();function jo(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var En;(function(n){let e;(function(t){t.full="full",t.unChanged="unChanged"})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(En||(_r.vsdiag=En={}));var Ao;(function(n){n.onType="onType",n.onSave="onSave"})(Ao||(_r.DiagnosticPullMode=Ao={}));var Mt;(function(n){n.active="open",n.reschedule="reschedule",n.outDated="drop"})(Mt||(Mt={}));var ul=class n{constructor(){this.open=new Set,this._onOpen=new Re.EventEmitter,this._onClose=new Re.EventEmitter,n.fillTabResources(this.open);let e=t=>{if(t.closed.length===0&&t.opened.length===0)return;let r=this.open,i=new Set;n.fillTabResources(i);let s=new Set,o=new Set(i);for(let a of r.values())i.has(a)?o.delete(a):s.add(a);if(this.open=i,s.size>0){let a=new Set;for(let u of s)a.add(Re.Uri.parse(u));this._onClose.fire(a)}if(o.size>0){let a=new Set;for(let u of o)a.add(Re.Uri.parse(u));this._onOpen.fire(a)}};Re.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=Re.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof Re.Uri?Re.window.activeTextEditor?.document.uri===e:Re.window.activeTextEditor?.document===e}isVisible(e){let t=e instanceof Re.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){let e=new Set;return n.fillTabResources(new Set,e),e}static fillTabResources(e,t){let r=e??new Set;for(let i of Re.window.tabGroups.all)for(let s of i.tabs){let o=s.input,a;o instanceof Re.TabInputText?a=o.uri:o instanceof Re.TabInputTextDiff?a=o.modified:o instanceof Re.TabInputCustom&&(a=o.uri),a!==void 0&&!r.has(a.toString())&&(r.add(a.toString()),t!==void 0&&t.add(a))}}},vt;(function(n){n[n.document=1]="document",n[n.workspace=2]="workspace"})(vt||(vt={}));var Zn;(function(n){function e(t){return t instanceof Re.Uri?t.toString():t.uri.toString()}n.asKey=e})(Zn||(Zn={}));var dl=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===vt.document?this.documentPullStates:this.workspacePullStates,[s,o,a]=t instanceof Re.Uri?[t.toString(),t,r]:[t.uri.toString(),t.uri,t.version],u=i.get(s);return u===void 0&&(u={document:o,pulledVersion:a,resultId:void 0},i.set(s,u)),u}update(e,t,r,i){let s=e===vt.document?this.documentPullStates:this.workspacePullStates,[o,a,u,h]=t instanceof Re.Uri?[t.toString(),t,r,i]:[t.uri.toString(),t.uri,t.version,r],g=s.get(o);g===void 0?(g={document:a,pulledVersion:u,resultId:h},s.set(o,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){let r=Zn.asKey(t);(e===vt.document?this.documentPullStates:this.workspacePullStates).delete(r)}tracks(e,t){let r=Zn.asKey(t);return(e===vt.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){let r=Zn.asKey(t);return(e===vt.document?this.documentPullStates:this.workspacePullStates).get(r)?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&&(r=this.documentPullStates.get(t)),r.resultId!==void 0&&e.push({uri:t,value:r.resultId});return e}},ll=class{constructor(e,t,r){this.client=e,this.tabs=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new Re.EventEmitter,this.provider=this.createProvider(),this.diagnostics=Re.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new dl,this.workspaceErrorCounter=0}knows(e,t){let r=t instanceof Re.Uri?t:t.uri;return this.documentStates.tracks(e,t)||this.openRequests.has(r.toString())}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed)return;let r=e instanceof Re.Uri?e:e.uri;this.pullAsync(e).then(()=>{t&&t()},i=>{this.client.error(`Document pull failed for text document ${r.toString()}`,i,!1)})}async pullAsync(e,t){if(this.isDisposed)return;let r=e instanceof Re.Uri,i=r?e:e.uri,s=i.toString();t=r?t:e.version;let o=this.openRequests.get(s),a=r?this.documentStates.track(vt.document,e,t):this.documentStates.track(vt.document,e);if(o===void 0){let u=new Re.CancellationTokenSource;this.openRequests.set(s,{state:Mt.active,document:e,version:t,tokenSource:u});let h,g;try{h=await this.provider.provideDiagnostics(e,a.resultId,u.token)??{kind:En.DocumentDiagnosticReportKind.full,items:[]}}catch(C){if(C instanceof cl.LSPCancellationError&&ut.DiagnosticServerCancellationData.is(C.data)&&C.data.retriggerRequest===!1&&(g={state:Mt.outDated,document:e}),g===void 0&&C instanceof Re.CancellationError)g={state:Mt.reschedule,document:e};else throw C}if(g=g??this.openRequests.get(s),g===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${s}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(s),!this.tabs.isVisible(e)){this.documentStates.unTrack(vt.document,e);return}if(g.state===Mt.outDated)return;h!==void 0&&(h.kind===En.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,h.items),a.pulledVersion=t,a.resultId=h.resultId),g.state===Mt.reschedule&&this.pull(e)}else o.state===Mt.active?(o.tokenSource.cancel(),this.openRequests.set(s,{state:Mt.reschedule,document:o.document})):o.state===Mt.outDated&&this.openRequests.set(s,{state:Mt.reschedule,document:o.document})}forgetDocument(e){let t=e instanceof Re.Uri?e:e.uri,r=t.toString(),i=this.openRequests.get(r);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(r,{state:Mt.reschedule,document:e}):this.pull(e,()=>{this.forget(vt.document,e)}):(i!==void 0&&(i.state===Mt.active&&i.tokenSource.cancel(),this.openRequests.set(r,{state:Mt.outDated,document:e})),this.diagnostics.delete(t),this.forget(vt.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,ut.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof cl.LSPCancellationError)&&!ut.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,ut.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new Re.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=>({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=>{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===En.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(vt.document,r.uri)||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(vt.workspace,r.uri,r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=>{let s=(a,u,h)=>{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a instanceof Re.Uri?a:a.uri)},previousResultId:u};return this.isDisposed===!0||!this.client.isRunning()?{kind:En.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(ut.DocumentDiagnosticRequest.type,g,h).then(async C=>C==null||this.isDisposed||h.isCancellationRequested?{kind:En.DocumentDiagnosticReportKind.full,items:[]}:C.kind===ut.DocumentDiagnosticReportKind.Full?{kind:En.DocumentDiagnosticReportKind.full,resultId:C.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(C.items,h)}:{kind:En.DocumentDiagnosticReportKind.unChanged,resultId:C.resultId},C=>this.client.handleFailedRequest(ut.DocumentDiagnosticRequest.type,h,C,{kind:En.DocumentDiagnosticReportKind.full,items:[]}))},o=this.client.middleware;return o.provideDiagnostics?o.provideDiagnostics(t,r,i,s):s(t,r,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(t,r,i)=>{let s=async h=>h.kind===ut.DocumentDiagnosticReportKind.Full?{kind:En.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:await this.client.protocol2CodeConverter.asDiagnostics(h.items,r)}:{kind:En.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},o=h=>{let g=[];for(let C of h)g.push({uri:this.client.code2ProtocolConverter.asUri(C.uri),value:C.value});return g},a=(h,g)=>{let C=(0,gR.generateUuid)(),y=this.client.onProgress(ut.WorkspaceDiagnosticRequest.partialResult,C,async v=>{if(v==null){i(null);return}let q={items:[]};for(let k of v.items)try{q.items.push(await s(k))}catch(A){this.client.error("Converting workspace diagnostics failed.",A)}i(q)}),D={identifier:this.options.identifier,previousResultIds:o(h),partialResultToken:C};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(ut.WorkspaceDiagnosticRequest.type,D,g).then(async v=>{if(g.isCancellationRequested)return{items:[]};let q={items:[]};for(let k of v.items)q.items.push(await s(k));return y.dispose(),i(q),{items:[]}},v=>(y.dispose(),this.client.handleFailedRequest(ut.DocumentDiagnosticRequest.type,g,v,{items:[]})))},u=this.client.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===Mt.active&&t.tokenSource.cancel(),this.openRequests.set(e,{state:Mt.outDated,document:t.document});this.diagnostics.dispose()}},fl=class{constructor(e){this.diagnosticRequestor=e,this.documents=new ut.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let t=Zn.asKey(e);this.documents.has(t)||(this.documents.set(t,e,ut.Touch.Last),this.trigger())}remove(e){let t=Zn.asKey(e);this.documents.delete(t),this.documents.size===0?this.stop():t===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,ut.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let t=Zn.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(t,e,ut.Touch.Last),t===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?Zn.asKey(this.endDocument):void 0}},hl=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},s=e.protocol2CodeConverter.asDocumentSelector(r.documentSelector),o=[],a=v=>{let q=r.documentSelector;if(i.match!==void 0)return i.match(q,v);for(let k of q)if(ut.TextDocumentFilter.is(k)){if(typeof k=="string"||k.language!==void 0&&k.language!=="*"||k.scheme!==void 0&&k.scheme!=="*"&&k.scheme!==v.scheme)return!1;if(k.pattern!==void 0){let A=new pR.Minimatch(k.pattern,{noext:!0});if(!A.makeRe()||!A.match(v.fsPath))return!1}}return!0},u=v=>v instanceof Re.Uri?a(v):Re.languages.match(s,v)>0&&t.isVisible(v),h=v=>v instanceof Re.Uri?this.activeTextDocument?.uri.toString()===v.toString():this.activeTextDocument===v;this.diagnosticRequestor=new ll(e,t,r),this.backgroundScheduler=new fl(this.diagnosticRequestor);let g=v=>{!u(v)||!r.interFileDependencies||h(v)||this.backgroundScheduler.add(v)};this.activeTextDocument=Re.window.activeTextEditor?.document,Re.window.onDidChangeActiveTextEditor(v=>{let q=this.activeTextDocument;this.activeTextDocument=v?.document,q!==void 0&&g(q),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let C=e.getFeature(ut.DidOpenTextDocumentNotification.method);o.push(C.onNotificationSent(v=>{let q=v.textDocument;this.diagnosticRequestor.knows(vt.document,q)||u(q)&&this.diagnosticRequestor.pull(q,()=>{g(q)})})),o.push(t.onOpen(v=>{for(let q of v){if(this.diagnosticRequestor.knows(vt.document,q))continue;let k=q.toString(),A;for(let $ of Re.workspace.textDocuments)if(k===$.uri.toString()){A=$;break}A!==void 0&&u(A)&&this.diagnosticRequestor.pull(A,()=>{g(A)})}}));let y=new Set;for(let v of Re.workspace.textDocuments)u(v)&&(this.diagnosticRequestor.pull(v,()=>{g(v)}),y.add(v.uri.toString()));if(i.onTabs===!0)for(let v of t.getTabResources())!y.has(v.toString())&&u(v)&&this.diagnosticRequestor.pull(v,()=>{g(v)});if(i.onChange===!0){let v=e.getFeature(ut.DidChangeTextDocumentNotification.method);o.push(v.onNotificationSent(async q=>{let k=q.textDocument;(i.filter===void 0||!i.filter(k,Ao.onType))&&this.diagnosticRequestor.knows(vt.document,k)&&this.diagnosticRequestor.pull(k,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let v=e.getFeature(ut.DidSaveTextDocumentNotification.method);o.push(v.onNotificationSent(q=>{let k=q.textDocument;(i.filter===void 0||!i.filter(k,Ao.onSave))&&this.diagnosticRequestor.knows(vt.document,k)&&this.diagnosticRequestor.pull(q.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let D=e.getFeature(ut.DidCloseTextDocumentNotification.method);o.push(D.onNotificationSent(v=>{this.cleanUpDocument(v.textDocument)})),t.onClose(v=>{for(let q of v)this.cleanUpDocument(q)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let v of Re.workspace.textDocuments)u(v)&&this.diagnosticRequestor.pull(v)}),r.workspaceDiagnostics===!0&&r.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=Re.Disposable.from(...o,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(vt.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},pl=class extends cl.TextDocumentLanguageFeature{constructor(e){super(e,ut.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=jo(jo(e,"textDocument"),"diagnostic");t.dynamicRegistration=!0,t.relatedDocumentSupport=!1,jo(jo(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,t){this._client.onRequest(ut.DiagnosticRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeDiagnosticsEmitter.fire()});let[i,s]=this.getRegistration(t,e.diagnosticProvider);!i||!s||this.register({id:i,registerOptions:s})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new ul);let t=new hl(this._client,this.tabs,e);return[t.disposable,t]}};_r.DiagnosticFeature=pl});var vv=O(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.NotebookDocumentSyncFeature=void 0;var Lt=require("vscode"),mR=Lo(),er=he(),yR=Ye(),mv=Rn();function yv(n,e){return n[e]===void 0&&(n[e]={}),n[e]}var _i;(function(n){let e;(function(t){function r(y,D){return{version:y.version,uri:D.asUri(y.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(y,D,v){let q=er.NotebookDocument.create(v.asUri(y.uri),y.notebookType,y.version,s(D,v));return Object.keys(y.metadata).length>0&&(q.metadata=o(y.metadata)),q}t.asNotebookDocument=i;function s(y,D){return y.map(v=>a(v,D))}t.asNotebookCells=s;function o(y){return h(new Set,y)}t.asMetadata=o;function a(y,D){let v=er.NotebookCell.create(u(y.kind),D.asUri(y.document.uri));return Object.keys(y.metadata).length>0&&(v.metadata=o(y.metadata)),y.executionSummary!==void 0&&mv.number(y.executionSummary.executionOrder)&&mv.boolean(y.executionSummary.success)&&(v.executionSummary={executionOrder:y.executionSummary.executionOrder,success:y.executionSummary.success}),v}t.asNotebookCell=a;function u(y){switch(y){case Lt.NotebookCellKind.Markup:return er.NotebookCellKind.Markup;case Lt.NotebookCellKind.Code:return er.NotebookCellKind.Code}}function h(y,D){if(y.has(D))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(D)){let v=[];for(let q of D)if(q!==null&&typeof q=="object"||Array.isArray(q))v.push(h(y,q));else{if(q instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");v.push(q)}return v}else{let v=Object.keys(D),q=Object.create(null);for(let k of v){let A=D[k];if(A!==null&&typeof A=="object"||Array.isArray(A))q[k]=h(y,A);else{if(A instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");q[k]=A}}return q}}function g(y,D){let v=D.asChangeTextDocumentParams(y,y.document.uri,y.document.version);return{document:v.textDocument,changes:v.contentChanges}}t.asTextContentChange=g;function C(y,D){let v=Object.create(null);if(y.metadata&&(v.metadata=n.c2p.asMetadata(y.metadata)),y.cells!==void 0){let q=Object.create(null),k=y.cells;k.structure&&(q.structure={array:{start:k.structure.array.start,deleteCount:k.structure.array.deleteCount,cells:k.structure.array.cells!==void 0?k.structure.array.cells.map(A=>n.c2p.asNotebookCell(A,D)):void 0},didOpen:k.structure.didOpen!==void 0?k.structure.didOpen.map(A=>D.asOpenTextDocumentParams(A.document).textDocument):void 0,didClose:k.structure.didClose!==void 0?k.structure.didClose.map(A=>D.asCloseTextDocumentParams(A.document).textDocument):void 0}),k.data!==void 0&&(q.data=k.data.map(A=>n.c2p.asNotebookCell(A,D))),k.textContent!==void 0&&(q.textContent=k.textContent.map(A=>n.c2p.asTextContentChange(A,D))),Object.keys(q).length>0&&(v.cells=q)}return v}t.asNotebookDocumentChangeEvent=C})(e=n.c2p||(n.c2p={}))})(_i||(_i={}));var ml;(function(n){function e(a,u,h){let g=a.length,C=u.length,y=0;for(;y<C&&y<g&&t(a[y],u[y],h);)y++;if(y<C&&y<g){let D=g-1,v=C-1;for(;D>=0&&v>=0&&t(a[D],u[v],h);)D--,v--;let q=D+1-y,k=y===v+1?void 0:u.slice(y,v+1);return k!==void 0?{start:y,deleteCount:q,cells:k}:{start:y,deleteCount:q}}else return y<C?{start:y,deleteCount:0,cells:u.slice(y)}:y<g?{start:y,deleteCount:g-y}:void 0}n.computeDiff=e;function t(a,u,h=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!r(a.executionSummary,u.executionSummary)?!1:!h||h&&s(a.metadata,u.metadata)}function r(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function s(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;let h=Array.isArray(a),g=Array.isArray(u);if(h!==g)return!1;if(h&&g){if(a.length!==u.length)return!1;for(let C=0;C<a.length;C++)if(!s(a[C],u[C]))return!1}if(o(a)&&o(u)){let C=Object.keys(a),y=Object.keys(u);if(C.length!==y.length||(C.sort(),y.sort(),!s(C,y)))return!1;for(let D=0;D<C.length;D++){let v=C[D];if(!s(a[v],u[v]))return!1}return!0}return!1}function o(a){return a!==null&&typeof a=="object"}n.isObjectLiteral=o})(ml||(ml={}));var yl;(function(n){function e(t,r){if(typeof t=="string")return t==="*"||r.notebookType===t;if(t.notebookType!==void 0&&t.notebookType!=="*"&&r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&&t.scheme!=="*"&&i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let s=new mR.Minimatch(t.pattern,{noext:!0});if(!s.makeRe()||!s.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(yl||(yl={}));var $o;(function(n){function e(r){let i=r.notebookSelector,s=[];for(let o of i){let a=(typeof o.notebook=="string"?o.notebook:o.notebook?.notebookType)??"*",u=typeof o.notebook=="string"?void 0:o.notebook?.scheme,h=typeof o.notebook=="string"?void 0:o.notebook?.pattern;if(o.cells!==void 0)for(let g of o.cells)s.push(t(a,u,h,g.language));else s.push(t(a,u,h,void 0))}return s}n.asDocumentSelector=e;function t(r,i,s,o){return i===void 0&&s===void 0?{notebook:r,language:o}:{notebook:{notebookType:r,scheme:i,pattern:s},language:o}}})($o||($o={}));var Ho;(function(n){function e(t){return{cells:t,uris:new Set(t.map(r=>r.document.uri.toString()))}}n.create=e})(Ho||(Ho={}));var bi=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector($o.asDocumentSelector(t)),Lt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of Lt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);Lt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&Lt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),Lt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(let e of Lt.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return Lt.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(Lt.languages.match(this.selector,t.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,t);if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(i&&s||!i&&!s)return;if(i){let o=this.getMatchingCells(e);if(o!==void 0){let a=this.asNotebookDocumentChangeEvent(e,void 0,r,o);a!==void 0&&this.doSendChange(a,o).catch(()=>{})}}}else i&&this.doSendOpen(e,[t]).catch(()=>{})}didChangeNotebookCellTextDocument(e,t){Lt.languages.match(this.selector,t.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[t]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0)return;let i=t.document.uri,s=r.cells.findIndex(o=>o.document.uri.toString()===i.toString());if(s!==-1)if(s===0&&r.cells.length===1)this.doSendClose(e,r.cells).catch(()=>{});else{let o=r.cells.slice(),a=o.splice(s,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:s,deleteCount:1},didClose:a}}},o).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=this.getMatchingCells(e),r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)if(t!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,r,t);i!==void 0&&this.doSendChange(i,t).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(t===void 0)return;this.doSendOpen(e,t).catch(()=>{})}}didChangeNotebookDocument(e){let t=e.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(t);if(i===void 0)return;this.didOpen(t,i,r)}else{let i=this.getMatchingCells(t);if(i===void 0){this.didClose(t,r);return}let s=this.asNotebookDocumentChangeEvent(e.notebook,e,r,i);s!==void 0&&this.doSendChange(s,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=>t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=>{})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t){let r=async(s,o)=>{let a=_i.c2p.asNotebookDocument(s,o,this.client.code2ProtocolConverter),u=o.map(h=>this.client.code2ProtocolConverter.asTextDocumentItem(h.document));try{await this.client.sendNotification(er.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:u})}catch(h){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",h),h}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),Ho.create(t)),i?.didOpen!==void 0?i.didOpen(e,t,r):r(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){let r=async s=>{try{await this.client.sendNotification(er.DidChangeNotebookDocumentNotification.type,{notebookDocument:_i.c2p.asVersionedNotebookDocumentIdentifier(s.notebook,this.client.code2ProtocolConverter),change:_i.c2p.asNotebookDocumentChangeEvent(s,this.client.code2ProtocolConverter)})}catch(o){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),Ho.create(t??[])),i?.didChange!==void 0?i?.didChange(e,r):r(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=async i=>{try{await this.client.sendNotification(er.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=async(s,o)=>{try{await this.client.sendNotification(er.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:o.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}asNotebookDocumentChangeEvent(e,t,r,i){if(t!==void 0&&t.notebook!==e)throw new Error("Notebook must be identical");let s={notebook:e};t?.metadata!==void 0&&(s.metadata=_i.c2p.asMetadata(t.metadata));let o;if(t?.cellChanges!==void 0&&t.cellChanges.length>0){let a=[];o=new Set(i.map(u=>u.document.uri.toString()));for(let u of t.cellChanges)o.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(s.cells=s.cells??{},s.cells.data=a)}if((t?.contentChanges!==void 0&&t.contentChanges.length>0||t===void 0)&&r!==void 0&&i!==void 0){let a=r.cells,u=i,h=ml.computeDiff(a,u,!1),g,C;if(h!==void 0){g=h.cells===void 0?new Map:new Map(h.cells.map(v=>[v.document.uri.toString(),v])),C=h.deleteCount===0?new Map:new Map(a.slice(h.start,h.start+h.deleteCount).map(v=>[v.document.uri.toString(),v]));for(let v of Array.from(C.keys()))g.has(v)&&(C.delete(v),g.delete(v));s.cells=s.cells??{};let y=[],D=[];if(g.size>0||C.size>0){for(let v of g.values())y.push(v);for(let v of C.values())D.push(v)}s.cells.structure={array:h,didOpen:y,didClose:D}}}return Object.keys(s).length>1?s:void 0}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector!==void 0){for(let r of this.options.notebookSelector)if(r.notebook===void 0||yl.matchNotebook(r.notebook,e)){let i=this.filterCells(e,t,r.cells);return i.length===0?void 0:i}}}cellMatches(e,t){let r=this.getMatchingCells(e,[t]);return r!==void 0&&r[0]===t}filterCells(e,t,r){let i=r!==void 0?t.filter(s=>{let o=s.document.languageId;return r.some(a=>a.language==="*"||o===a.language)}):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},Uo=class n{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=er.NotebookDocumentSyncRegistrationType.type,Lt.workspace.onDidOpenTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof bi&&s.didOpenNotebookCellTextDocument(r,i)}),Lt.workspace.onDidChangeTextDocument(t=>{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==n.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(let s of this.registrations.values())s instanceof bi&&s.didChangeNotebookCellTextDocument(i,t)}),Lt.workspace.onDidCloseTextDocument(t=>{if(t.uri.scheme!==n.CellScheme)return;let[r,i]=this.findNotebookDocumentAndCell(t);if(!(r===void 0||i===void 0))for(let s of this.registrations.values())s instanceof bi&&s.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let t=e.getState();if(t.kind==="document"&&t.registrations===!0&&t.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let t=yv(yv(e,"notebookDocument"),"synchronization");t.dynamicRegistration=!0,t.executionSummarySupport=!0}preInitialize(e){let t=e.notebookDocumentSync;t!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector($o.asDocumentSelector(t)))}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??yR.generateUuid();this.register({id:r,registerOptions:t})}register(e){let t=new bi(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){let t=this.registrations.get(e);t&&t.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==n.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Lt.languages.match(this.dedicatedChannel,e)>0)return!0;for(let t of this.registrations.values())if(t.handles(e))return!0;return!1}getProvider(e){for(let t of this.registrations.values())if(t.handles(e.document))return t}findNotebookDocumentAndCell(e){let t=e.uri.toString();for(let r of Lt.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}};Wo.NotebookDocumentSyncFeature=Uo;Uo.CellScheme="vscode-notebook-cell"});var _v=O(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.SyncConfigurationFeature=br.toJSONObject=br.ConfigurationFeature=void 0;var wi=require("vscode"),Zi=he(),vR=Rn(),CR=Ye(),Cv=Pe(),vl=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(Zi.ConfigurationRequest.type,(t,r)=>{let i=o=>{let a=[];for(let u of o.items){let h=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(h,u.section!==null?u.section:void 0))}return a},s=e.middleware.workspace;return s&&s.configuration?s.configuration(t,r,i):i(t,r)})}getConfiguration(e,t){let r=null;if(t){let i=t.lastIndexOf(".");if(i===-1)r=Lr(wi.workspace.getConfiguration(void 0,e).get(t));else{let s=wi.workspace.getConfiguration(t.substr(0,i),e);s&&(r=Lr(s.get(t.substr(i+1))))}}else{let i=wi.workspace.getConfiguration(void 0,e);r={};for(let s of Object.keys(i))i.has(s)&&(r[s]=Lr(i.get(s)))}return r===void 0&&(r=null),r}clear(){}};br.ConfigurationFeature=vl;function Lr(n){if(n){if(Array.isArray(n))return n.map(Lr);if(typeof n=="object"){let e=Object.create(null);for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=Lr(n[t]));return e}}return n}br.toJSONObject=Lr;var Cl=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Zi.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,Cv.ensure)((0,Cv.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:CR.generateUuid(),registerOptions:{section:e}})}register(e){let t=wi.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,t){if(this.isCleared)return;let r;if(vR.string(e)?r=[e]:r=e,r!==void 0&&t!==void 0&&!r.some(a=>t.affectsConfiguration(a)))return;let i=async o=>o===void 0?this._client.sendNotification(Zi.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Zi.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(o)}),s=this._client.middleware.workspace?.didChangeConfiguration;(s?s(r,i):i(r)).catch(o=>{this._client.error(`Sending notification ${Zi.DidChangeConfigurationNotification.type.method} failed`,o)})}extractSettingsInformation(e){function t(s,o){let a=s;for(let u=0;u<o.length-1;u++){let h=a[o[u]];h||(h=Object.create(null),a[o[u]]=h),a=h}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let s=0;s<e.length;s++){let o=e[s],a=o.indexOf("."),u=null;if(a>=0?u=wi.workspace.getConfiguration(o.substr(0,a),r).get(o.substr(a+1)):u=wi.workspace.getConfiguration(void 0,r).get(o),u){let h=e[s].split(".");t(i,h)[h[h.length-1]]=Lr(u)}}return i}};br.SyncConfigurationFeature=Cl});var bv=O(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.DidSaveTextDocumentFeature=Jt.WillSaveWaitUntilFeature=Jt.WillSaveFeature=Jt.DidChangeTextDocumentFeature=Jt.DidCloseTextDocumentFeature=Jt.DidOpenTextDocumentFeature=void 0;var gn=require("vscode"),Ue=he(),nt=Pe(),Ri=Ye(),_l=class extends nt.TextDocumentEventFeature{constructor(e,t){super(e,gn.workspace.onDidOpenTextDocument,Ue.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,r=>e.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,nt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Ri.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return Ue.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);gn.workspace.textDocuments.forEach(r=>{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&&gn.languages.match(t,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));(s.didOpen?s.didOpen(r,o):o(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,t,r)}};Jt.DidOpenTextDocumentFeature=_l;var bl=class extends nt.TextDocumentEventFeature{constructor(e,t,r){super(e,gn.workspace.onDidCloseTextDocument,Ue.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,nt.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=t,this._pendingTextDocumentChanges=r}get registrationType(){return Ue.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.openClose&&this.register({id:Ri.generateUuid(),registerOptions:{documentSelector:t}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,t,r){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,t,r)}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(gn.languages.match(t,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let s=this._client.middleware,o=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(s.didClose?s.didClose(i,o):o(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}};Jt.DidCloseTextDocumentFeature=bl;var wl=class extends nt.DynamicDocumentFeature{constructor(e,t){super(e),this._changeData=new Map,this._onNotificationSent=new gn.EventEmitter,this._onPendingChangeAdded=new gn.EventEmitter,this._pendingTextDocumentChanges=t,this._syncKind=Ue.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Ue.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.change!==void 0&&r.change!==Ue.TextDocumentSyncKind.None&&this.register({id:Ri.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=gn.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let t=e.document.uri,r=e.document.version,i=[];for(let s of this._changeData.values())if(gn.languages.match(s.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let o=this._client.middleware;if(s.syncKind===Ue.TextDocumentSyncKind.Incremental){let a=async u=>{let h=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u,t,r);await this._client.sendNotification(Ue.DidChangeTextDocumentNotification.type,h),this.notificationSent(u.document,Ue.DidChangeTextDocumentNotification.type,h)};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}else if(s.syncKind===Ue.TextDocumentSyncKind.Full){let a=async u=>{let h=u.document.uri.toString();this._pendingTextDocumentChanges.set(h,u.document),this._onPendingChangeAdded.fire()};i.push(o.didChange?o.didChange(e,u=>a(u)):a(e))}}return Promise.all(i).then(void 0,s=>{throw this._client.error(`Sending document notification ${Ue.DidChangeTextDocumentNotification.type.method} failed`,s),s})}notificationSent(e,t,r){this._onNotificationSent.fire({textDocument:e,type:t,params:r})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Ue.TextDocumentSyncKind.None;else{this._syncKind=Ue.TextDocumentSyncKind.None;for(let t of this._changeData.values())if(this.updateSyncKind(t.syncKind),this._syncKind===Ue.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Ue.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let t;if(e.size===0)t=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{t=[];for(let r of this._pendingTextDocumentChanges)e.has(r[0])||(t.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return t}getProvider(e){for(let t of this._changeData.values())if(gn.languages.match(t.documentSelector,e)>0)return{send:r=>this.callback(r)}}updateSyncKind(e){if(this._syncKind!==Ue.TextDocumentSyncKind.Full)switch(e){case Ue.TextDocumentSyncKind.Full:this._syncKind=e;break;case Ue.TextDocumentSyncKind.Incremental:this._syncKind===Ue.TextDocumentSyncKind.None&&(this._syncKind=Ue.TextDocumentSyncKind.Incremental);break}}};Jt.DidChangeTextDocumentFeature=wl;var Rl=class extends nt.TextDocumentEventFeature{constructor(e){super(e,gn.workspace.onWillSaveTextDocument,Ue.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),t=>t.document,(t,r)=>nt.TextDocumentEventFeature.textDocumentFilter(t,r.document))}get registrationType(){return Ue.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSave&&this.register({id:Ri.generateUuid(),registerOptions:{documentSelector:t}})}getTextDocument(e){return e.document}};Jt.WillSaveFeature=Rl;var Sl=class extends nt.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ue.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&&r&&r.willSaveWaitUntil&&this.register({id:Ri.generateUuid(),registerOptions:{documentSelector:t}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=gn.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(nt.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware,r=i=>this._client.sendRequest(Ue.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async s=>{let o=await this._client.protocol2CodeConverter.asTextEdits(s);return o===void 0?[]:o});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Jt.WillSaveWaitUntilFeature=Sl;var Dl=class extends nt.TextDocumentEventFeature{constructor(e){super(e,gn.workspace.onDidSaveTextDocument,Ue.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),t=>t,nt.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ue.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,nt.ensure)((0,nt.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&&r&&r.save){let i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Ri.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Jt.DidSaveTextDocumentFeature=Dl});var wv=O(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.CompletionItemFeature=void 0;var _R=require("vscode"),Se=he(),Tl=Pe(),bR=Ye(),wR=[Se.CompletionItemKind.Text,Se.CompletionItemKind.Method,Se.CompletionItemKind.Function,Se.CompletionItemKind.Constructor,Se.CompletionItemKind.Field,Se.CompletionItemKind.Variable,Se.CompletionItemKind.Class,Se.CompletionItemKind.Interface,Se.CompletionItemKind.Module,Se.CompletionItemKind.Property,Se.CompletionItemKind.Unit,Se.CompletionItemKind.Value,Se.CompletionItemKind.Enum,Se.CompletionItemKind.Keyword,Se.CompletionItemKind.Snippet,Se.CompletionItemKind.Color,Se.CompletionItemKind.File,Se.CompletionItemKind.Reference,Se.CompletionItemKind.Folder,Se.CompletionItemKind.EnumMember,Se.CompletionItemKind.Constant,Se.CompletionItemKind.Struct,Se.CompletionItemKind.Event,Se.CompletionItemKind.Operator,Se.CompletionItemKind.TypeParameter],Pl=class extends Tl.TextDocumentLanguageFeature{constructor(e){super(e,Se.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,Tl.ensure)((0,Tl.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Se.MarkupKind.Markdown,Se.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Se.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Se.InsertTextMode.asIs,Se.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=Se.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:wR},t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);r&&this.register({id:bR.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,s=e.documentSelector,o={provideCompletionItems:(a,u,h,g)=>{let C=this._client,y=this._client.middleware,D=(v,q,k,A)=>C.sendRequest(Se.CompletionRequest.type,C.code2ProtocolConverter.asCompletionParams(v,q,k),A).then($=>A.isCancellationRequested?null:C.protocol2CodeConverter.asCompletionResult($,i,A),$=>C.handleFailedRequest(Se.CompletionRequest.type,A,$,null));return y.provideCompletionItem?y.provideCompletionItem(a,u,g,h,D):D(a,u,g,h)},resolveCompletionItem:e.resolveProvider?(a,u)=>{let h=this._client,g=this._client.middleware,C=(y,D)=>h.sendRequest(Se.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(y,!!this.labelDetailsSupport.get(t)),D).then(v=>D.isCancellationRequested?null:h.protocol2CodeConverter.asCompletionItem(v),v=>h.handleFailedRequest(Se.CompletionResolveRequest.type,D,v,y));return g.resolveCompletionItem?g.resolveCompletionItem(a,u,C):C(a,u)}:void 0};return[_R.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(s),o,...r),o]}};Ko.CompletionItemFeature=Pl});var Rv=O(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.HoverFeature=void 0;var RR=require("vscode"),es=he(),El=Pe(),SR=Ye(),ql=class extends El.TextDocumentLanguageFeature{constructor(e){super(e,es.HoverRequest.type)}fillClientCapabilities(e){let t=(0,El.ensure)((0,El.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=!0,t.contentFormat=[es.MarkupKind.Markdown,es.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);r&&this.register({id:SR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(es.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asHover(D),D=>a.handleFailedRequest(es.HoverRequest.type,y,D,null)),h=a.middleware;return h.provideHover?h.provideHover(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return RR.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};zo.HoverFeature=ql});var Sv=O(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.DefinitionFeature=void 0;var DR=require("vscode"),kl=he(),Ol=Pe(),TR=Ye(),xl=class extends Ol.TextDocumentLanguageFeature{constructor(e){super(e,kl.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,Ol.ensure)((0,Ol.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);r&&this.register({id:TR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(kl.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(D,y),D=>a.handleFailedRequest(kl.DefinitionRequest.type,y,D,null)),h=a.middleware;return h.provideDefinition?h.provideDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return DR.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Vo.DefinitionFeature=xl});var Tv=O(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.SignatureHelpFeature=void 0;var Dv=require("vscode"),ts=he(),Il=Pe(),PR=Ye(),Nl=class extends Il.TextDocumentLanguageFeature{constructor(e){super(e,ts.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,Il.ensure)((0,Il.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[ts.MarkupKind.Markdown,ts.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);r&&this.register({id:PR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t={provideSignatureHelp:(r,i,s,o)=>{let a=this._client,u=(g,C,y,D)=>a.sendRequest(ts.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(g,C,y),D).then(v=>D.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(v,D),v=>a.handleFailedRequest(ts.SignatureHelpRequest.type,D,v,null)),h=a.middleware;return h.provideSignatureHelp?h.provideSignatureHelp(r,i,o,s,u):u(r,i,o,s)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){let r=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return Dv.languages.registerSignatureHelpProvider(r,t,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return Dv.languages.registerSignatureHelpProvider(r,t,i)}}};Bo.SignatureHelpFeature=Nl});var Pv=O(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.DocumentHighlightFeature=void 0;var ER=require("vscode"),Fl=he(),Ml=Pe(),qR=Ye(),Ll=class extends Ml.TextDocumentLanguageFeature{constructor(e){super(e,Fl.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,Ml.ensure)((0,Ml.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);r&&this.register({id:qR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(Fl.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(D,y),D=>a.handleFailedRequest(Fl.DocumentHighlightRequest.type,y,D,null)),h=a.middleware;return h.provideDocumentHighlights?h.provideDocumentHighlights(i,s,o,u):u(i,s,o)}};return[ER.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Go.DocumentHighlightFeature=Ll});var $l=O(Xn=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});Xn.DocumentSymbolFeature=Xn.SupportedSymbolTags=Xn.SupportedSymbolKinds=void 0;var kR=require("vscode"),xe=he(),jl=Pe(),OR=Ye();Xn.SupportedSymbolKinds=[xe.SymbolKind.File,xe.SymbolKind.Module,xe.SymbolKind.Namespace,xe.SymbolKind.Package,xe.SymbolKind.Class,xe.SymbolKind.Method,xe.SymbolKind.Property,xe.SymbolKind.Field,xe.SymbolKind.Constructor,xe.SymbolKind.Enum,xe.SymbolKind.Interface,xe.SymbolKind.Function,xe.SymbolKind.Variable,xe.SymbolKind.Constant,xe.SymbolKind.String,xe.SymbolKind.Number,xe.SymbolKind.Boolean,xe.SymbolKind.Array,xe.SymbolKind.Object,xe.SymbolKind.Key,xe.SymbolKind.Null,xe.SymbolKind.EnumMember,xe.SymbolKind.Struct,xe.SymbolKind.Event,xe.SymbolKind.Operator,xe.SymbolKind.TypeParameter];Xn.SupportedSymbolTags=[xe.SymbolTag.Deprecated];var Al=class extends jl.TextDocumentLanguageFeature{constructor(e){super(e,xe.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=(0,jl.ensure)((0,jl.ensure)(e,"textDocument"),"documentSymbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Xn.SupportedSymbolKinds},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:Xn.SupportedSymbolTags},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);r&&this.register({id:OR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(s,o)=>{let a=this._client,u=async(g,C)=>{try{let y=await a.sendRequest(xe.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(g),C);if(C.isCancellationRequested||y===void 0||y===null)return null;if(y.length===0)return[];{let D=y[0];return xe.DocumentSymbol.is(D)?await a.protocol2CodeConverter.asDocumentSymbols(y,C):await a.protocol2CodeConverter.asSymbolInformations(y,C)}}catch(y){return a.handleFailedRequest(xe.DocumentSymbolRequest.type,C,y,null)}},h=a.middleware;return h.provideDocumentSymbols?h.provideDocumentSymbols(s,o,u):u(s,o)}},i=e.label!==void 0?{label:e.label}:void 0;return[kR.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,i),r]}};Xn.DocumentSymbolFeature=Al});var qv=O(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.WorkspaceSymbolFeature=void 0;var xR=require("vscode"),ns=he(),Hl=Pe(),Ev=$l(),IR=Ye(),Ul=class extends Hl.WorkspaceFeature{constructor(e){super(e,ns.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,Hl.ensure)((0,Hl.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=!0,t.symbolKind={valueSet:Ev.SupportedSymbolKinds},t.tagSupport={valueSet:Ev.SupportedSymbolTags},t.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:IR.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=>{let s=this._client,o=(u,h)=>s.sendRequest(ns.WorkspaceSymbolRequest.type,{query:u},h).then(g=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformations(g,h),g=>s.handleFailedRequest(ns.WorkspaceSymbolRequest.type,h,g,null)),a=s.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,o):o(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=>{let s=this._client,o=(u,h)=>s.sendRequest(ns.WorkspaceSymbolResolveRequest.type,s.code2ProtocolConverter.asWorkspaceSymbol(u),h).then(g=>h.isCancellationRequested?null:s.protocol2CodeConverter.asSymbolInformation(g),g=>s.handleFailedRequest(ns.WorkspaceSymbolResolveRequest.type,h,g,null)),a=s.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,o):o(r,i)}:void 0};return[xR.languages.registerWorkspaceSymbolProvider(t),t]}};Xo.WorkspaceSymbolFeature=Ul});var kv=O(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.ReferencesFeature=void 0;var NR=require("vscode"),Wl=he(),Kl=Pe(),FR=Ye(),zl=class extends Kl.TextDocumentLanguageFeature{constructor(e){super(e,Wl.ReferencesRequest.type)}fillClientCapabilities(e){(0,Kl.ensure)((0,Kl.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);r&&this.register({id:FR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,s,o,a)=>{let u=this._client,h=(C,y,D,v)=>u.sendRequest(Wl.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(C,y,D),v).then(q=>v.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(q,v),q=>u.handleFailedRequest(Wl.ReferencesRequest.type,v,q,null)),g=u.middleware;return g.provideReferences?g.provideReferences(i,s,o,a,h):h(i,s,o,a)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return NR.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};Jo.ReferencesFeature=zl});var Ov=O(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.CodeActionFeature=void 0;var MR=require("vscode"),mn=he(),LR=Ye(),Vl=Pe(),Bl=class extends Vl.TextDocumentLanguageFeature{constructor(e){super(e,mn.CodeActionRequest.type)}fillClientCapabilities(e){let t=(0,Vl.ensure)((0,Vl.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:["edit"]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[mn.CodeActionKind.Empty,mn.CodeActionKind.QuickFix,mn.CodeActionKind.Refactor,mn.CodeActionKind.RefactorExtract,mn.CodeActionKind.RefactorInline,mn.CodeActionKind.RefactorRewrite,mn.CodeActionKind.Source,mn.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);r&&this.register({id:LR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,s,o,a)=>{let u=this._client,h=async(C,y,D,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(y),context:u.code2ProtocolConverter.asCodeActionContextSync(D)};return u.sendRequest(mn.CodeActionRequest.type,q,v).then(k=>v.isCancellationRequested||k===null||k===void 0?null:u.protocol2CodeConverter.asCodeActionResult(k,v),k=>u.handleFailedRequest(mn.CodeActionRequest.type,v,k,null))},g=u.middleware;return g.provideCodeActions?g.provideCodeActions(i,s,o,a,h):h(i,s,o,a)},resolveCodeAction:e.resolveProvider?(i,s)=>{let o=this._client,a=this._client.middleware,u=async(h,g)=>o.sendRequest(mn.CodeActionResolveRequest.type,o.code2ProtocolConverter.asCodeActionSync(h),g).then(C=>g.isCancellationRequested?h:o.protocol2CodeConverter.asCodeAction(C,g),C=>o.handleFailedRequest(mn.CodeActionResolveRequest.type,g,C,h));return a.resolveCodeAction?a.resolveCodeAction(i,s,u):u(i,s)}:void 0};return[MR.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}};Qo.CodeActionFeature=Bl});var Iv=O(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.CodeLensFeature=void 0;var xv=require("vscode"),Si=he(),jR=Ye(),rs=Pe(),Gl=class extends rs.TextDocumentLanguageFeature{constructor(e){super(e,Si.CodeLensRequest.type)}fillClientCapabilities(e){(0,rs.ensure)((0,rs.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,rs.ensure)((0,rs.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,t){this._client.onRequest(Si.CodeLensRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);i&&this.register({id:jR.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new xv.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(s,o)=>{let a=this._client,u=(g,C)=>a.sendRequest(Si.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(g),C).then(y=>C.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(y,C),y=>a.handleFailedRequest(Si.CodeLensRequest.type,C,y,null)),h=a.middleware;return h.provideCodeLenses?h.provideCodeLenses(s,o,u):u(s,o)},resolveCodeLens:e.resolveProvider?(s,o)=>{let a=this._client,u=(g,C)=>a.sendRequest(Si.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(g),C).then(y=>C.isCancellationRequested?g:a.protocol2CodeConverter.asCodeLens(y),y=>a.handleFailedRequest(Si.CodeLensResolveRequest.type,C,y,g)),h=a.middleware;return h.resolveCodeLens?h.resolveCodeLens(s,o,u):u(s,o)}:void 0};return[xv.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}};Yo.CodeLensFeature=Gl});var Nv=O(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.DocumentOnTypeFormattingFeature=wr.DocumentRangeFormattingFeature=wr.DocumentFormattingFeature=void 0;var Zo=require("vscode"),Ln=he(),Yl=Ye(),tr=Pe(),Di;(function(n){function e(t){let r=Zo.workspace.getConfiguration("files",t);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}n.fromConfiguration=e})(Di||(Di={}));var Xl=class extends tr.TextDocumentLanguageFeature{constructor(e){super(e,Ln.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,tr.ensure)((0,tr.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);r&&this.register({id:Yl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,s,o)=>{let a=this._client,u=(g,C,y)=>{let D={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),options:a.code2ProtocolConverter.asFormattingOptions(C,Di.fromConfiguration(g))};return a.sendRequest(Ln.DocumentFormattingRequest.type,D,y).then(v=>y.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(v,y),v=>a.handleFailedRequest(Ln.DocumentFormattingRequest.type,y,v,null))},h=a.middleware;return h.provideDocumentFormattingEdits?h.provideDocumentFormattingEdits(i,s,o,u):u(i,s,o)}};return[Zo.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};wr.DocumentFormattingFeature=Xl;var Jl=class extends tr.TextDocumentLanguageFeature{constructor(e){super(e,Ln.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let t=(0,tr.ensure)((0,tr.ensure)(e,"textDocument"),"rangeFormatting");t.dynamicRegistration=!0,t.rangesSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);r&&this.register({id:Yl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,s,o,a)=>{let u=this._client,h=(C,y,D,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(y),options:u.code2ProtocolConverter.asFormattingOptions(D,Di.fromConfiguration(C))};return u.sendRequest(Ln.DocumentRangeFormattingRequest.type,q,v).then(k=>v.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(k,v),k=>u.handleFailedRequest(Ln.DocumentRangeFormattingRequest.type,v,k,null))},g=u.middleware;return g.provideDocumentRangeFormattingEdits?g.provideDocumentRangeFormattingEdits(i,s,o,a,h):h(i,s,o,a)}};return e.rangesSupport&&(r.provideDocumentRangesFormattingEdits=(i,s,o,a)=>{let u=this._client,h=(C,y,D,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),ranges:u.code2ProtocolConverter.asRanges(y),options:u.code2ProtocolConverter.asFormattingOptions(D,Di.fromConfiguration(C))};return u.sendRequest(Ln.DocumentRangesFormattingRequest.type,q,v).then(k=>v.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(k,v),k=>u.handleFailedRequest(Ln.DocumentRangesFormattingRequest.type,v,k,null))},g=u.middleware;return g.provideDocumentRangesFormattingEdits?g.provideDocumentRangesFormattingEdits(i,s,o,a,h):h(i,s,o,a)}),[Zo.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};wr.DocumentRangeFormattingFeature=Jl;var Ql=class extends tr.TextDocumentLanguageFeature{constructor(e){super(e,Ln.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,tr.ensure)((0,tr.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);r&&this.register({id:Yl.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(s,o,a,u,h)=>{let g=this._client,C=(D,v,q,k,A)=>{let $={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(D),position:g.code2ProtocolConverter.asPosition(v),ch:q,options:g.code2ProtocolConverter.asFormattingOptions(k,Di.fromConfiguration(D))};return g.sendRequest(Ln.DocumentOnTypeFormattingRequest.type,$,A).then(M=>A.isCancellationRequested?null:g.protocol2CodeConverter.asTextEdits(M,A),M=>g.handleFailedRequest(Ln.DocumentOnTypeFormattingRequest.type,A,M,null))},y=g.middleware;return y.provideOnTypeFormattingEdits?y.provideOnTypeFormattingEdits(s,o,a,u,h,C):C(s,o,a,u,h)}},i=e.moreTriggerCharacter||[];return[Zo.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r,e.firstTriggerCharacter,...i),r]}};wr.DocumentOnTypeFormattingFeature=Ql});var Mv=O(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.RenameFeature=void 0;var AR=require("vscode"),jr=he(),$R=Ye(),Fv=Rn(),Zl=Pe(),ef=class extends Zl.TextDocumentLanguageFeature{constructor(e){super(e,jr.RenameRequest.type)}fillClientCapabilities(e){let t=(0,Zl.ensure)((0,Zl.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=jr.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);r&&(Fv.boolean(e.renameProvider)&&(r.prepareProvider=!1),this.register({id:$R.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,s,o,a)=>{let u=this._client,h=(C,y,D,v)=>{let q={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),position:u.code2ProtocolConverter.asPosition(y),newName:D};return u.sendRequest(jr.RenameRequest.type,q,v).then(k=>v.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(k,v),k=>u.handleFailedRequest(jr.RenameRequest.type,v,k,null,!1))},g=u.middleware;return g.provideRenameEdits?g.provideRenameEdits(i,s,o,a,h):h(i,s,o,a)},prepareRename:e.prepareProvider?(i,s,o)=>{let a=this._client,u=(g,C,y)=>{let D={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),position:a.code2ProtocolConverter.asPosition(C)};return a.sendRequest(jr.PrepareRenameRequest.type,D,y).then(v=>y.isCancellationRequested?null:jr.Range.is(v)?a.protocol2CodeConverter.asRange(v):this.isDefaultBehavior(v)?v.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):v&&jr.Range.is(v.range)?{range:a.protocol2CodeConverter.asRange(v.range),placeholder:v.placeholder}:Promise.reject(new Error("The element can't be renamed.")),v=>{throw typeof v.message=="string"?new Error(v.message):new Error("The element can't be renamed.")})},h=a.middleware;return h.prepareRename?h.prepareRename(i,s,o,u):u(i,s,o)}:void 0};return[this.registerProvider(t,r),r]}registerProvider(e,t){return AR.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){let t=e;return t&&Fv.boolean(t.defaultBehavior)}};ea.RenameFeature=ef});var Lv=O(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.DocumentLinkFeature=void 0;var HR=require("vscode"),is=he(),tf=Pe(),UR=Ye(),nf=class extends tf.TextDocumentLanguageFeature{constructor(e){super(e,is.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=(0,tf.ensure)((0,tf.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);r&&this.register({id:UR.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,s)=>{let o=this._client,a=(h,g)=>o.sendRequest(is.DocumentLinkRequest.type,o.code2ProtocolConverter.asDocumentLinkParams(h),g).then(C=>g.isCancellationRequested?null:o.protocol2CodeConverter.asDocumentLinks(C,g),C=>o.handleFailedRequest(is.DocumentLinkRequest.type,g,C,null)),u=o.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,s,a):a(i,s)},resolveDocumentLink:e.resolveProvider?(i,s)=>{let o=this._client,a=(h,g)=>o.sendRequest(is.DocumentLinkResolveRequest.type,o.code2ProtocolConverter.asDocumentLink(h),g).then(C=>g.isCancellationRequested?h:o.protocol2CodeConverter.asDocumentLink(C),C=>o.handleFailedRequest(is.DocumentLinkResolveRequest.type,g,C,h)),u=o.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,s,a):a(i,s)}:void 0};return[HR.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};ta.DocumentLinkFeature=nf});var Av=O(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.ExecuteCommandFeature=void 0;var WR=require("vscode"),rf=he(),KR=Ye(),jv=Pe(),sf=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return rf.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,jv.ensure)((0,jv.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:KR.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.middleware,i=(s,o)=>{let a={command:s,arguments:o};return t.sendRequest(rf.ExecuteCommandRequest.type,a).then(void 0,u=>t.handleFailedRequest(rf.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let s=[];for(let o of e.registerOptions.commands)s.push(WR.commands.registerCommand(o,(...a)=>r.executeCommand?r.executeCommand(o,a,i):i(o,a)));this._commands.set(e.id,s)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(r=>r.dispose())}clear(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())}),this._commands.clear()}};na.ExecuteCommandFeature=sf});var $v=O(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.FileSystemWatcherFeature=void 0;var zR=require("vscode"),Ar=he(),ra=Pe(),of=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return Ar.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,ra.ensure)((0,ra.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,ra.ensure)((0,ra.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let s=!0,o=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(s=(r.kind&Ar.WatchKind.Create)!==0,o=(r.kind&Ar.WatchKind.Change)!==0,a=(r.kind&Ar.WatchKind.Delete)!==0);let u=zR.workspace.createFileSystemWatcher(i,!s,!o,!a);this.hookListeners(u,s,o,a,t),t.push(u)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,s){t&&e.onDidCreate(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ar.FileChangeType.Created}),null,s),r&&e.onDidChange(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ar.FileChangeType.Changed}),null,s),i&&e.onDidDelete(o=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(o),type:Ar.FileChangeType.Deleted}),null,s)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}clear(){this._watchers.forEach(e=>{for(let t of e)t.dispose()}),this._watchers.clear()}};ia.FileSystemWatcherFeature=of});var Hv=O(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.ColorProviderFeature=void 0;var VR=require("vscode"),ss=he(),af=Pe(),cf=class extends af.TextDocumentLanguageFeature{constructor(e){super(e,ss.DocumentColorRequest.type)}fillClientCapabilities(e){(0,af.ensure)((0,af.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,s,o)=>{let a=this._client,u=(g,C,y)=>{let D={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(C.document),range:a.code2ProtocolConverter.asRange(C.range)};return a.sendRequest(ss.ColorPresentationRequest.type,D,y).then(v=>y.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(v,y),v=>a.handleFailedRequest(ss.ColorPresentationRequest.type,y,v,null))},h=a.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,s,o,u):u(i,s,o)},provideDocumentColors:(i,s)=>{let o=this._client,a=(h,g)=>{let C={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(h)};return o.sendRequest(ss.DocumentColorRequest.type,C,g).then(y=>g.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(y,g),y=>o.handleFailedRequest(ss.DocumentColorRequest.type,g,y,null))},u=o.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,s,a):a(i,s)}};return[VR.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};sa.ColorProviderFeature=cf});var Uv=O(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.ImplementationFeature=void 0;var BR=require("vscode"),uf=he(),df=Pe(),lf=class extends df.TextDocumentLanguageFeature{constructor(e){super(e,uf.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,df.ensure)((0,df.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(uf.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(D,y),D=>a.handleFailedRequest(uf.ImplementationRequest.type,y,D,null)),h=a.middleware;return h.provideImplementation?h.provideImplementation(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return BR.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};oa.ImplementationFeature=lf});var Wv=O(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.TypeDefinitionFeature=void 0;var GR=require("vscode"),ff=he(),os=Pe(),hf=class extends os.TextDocumentLanguageFeature{constructor(e){super(e,ff.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,os.ensure)((0,os.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let t=(0,os.ensure)((0,os.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(ff.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(D,y),D=>a.handleFailedRequest(ff.TypeDefinitionRequest.type,y,D,null)),h=a.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return GR.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};aa.TypeDefinitionFeature=hf});var Kv=O(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.WorkspaceFoldersFeature=Ti.arrayDiff=void 0;var XR=Ye(),ca=require("vscode"),as=he();function pf(n,e){if(n!=null)return n[e]}function gf(n,e){return n.filter(t=>e.indexOf(t)<0)}Ti.arrayDiff=gf;var mf=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return as.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=ca.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=>this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(as.WorkspaceFoldersRequest.type,s=>{let o=()=>{let u=ca.workspace.workspaceFolders;return u===void 0?null:u.map(g=>this.asProtocol(g))},a=t.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(s,o):o(s)});let r=pf(pf(pf(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof r=="string"?i=r:r===!0&&(i=XR.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&&e){let r=gf(this._initialFolders,e),i=gf(e,this._initialFolders);(i.length>0||r.length>0)&&(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&&(t=this.doSendEvent(e,[]));t!==void 0&&t.catch(r=>{this._client.error(`Sending notification ${as.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=>this.asProtocol(i)),removed:t.map(i=>this.asProtocol(i))}};return this._client.sendNotification(as.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=ca.workspace.onDidChangeWorkspaceFolders(s=>{let o=h=>this.doSendEvent(h.added,h.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(s,o):o(s)).catch(h=>{this._client.error(`Sending notification ${as.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(ca.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};Ti.WorkspaceFoldersFeature=mf});var Vv=O(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});ua.FoldingRangeFeature=void 0;var zv=require("vscode"),$r=he(),cs=Pe(),yf=class extends cs.TextDocumentLanguageFeature{constructor(e){super(e,$r.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,cs.ensure)((0,cs.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0,t.foldingRangeKind={valueSet:[$r.FoldingRangeKind.Comment,$r.FoldingRangeKind.Imports,$r.FoldingRangeKind.Region]},t.foldingRange={collapsedText:!1},(0,cs.ensure)((0,cs.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,t){this._client.onRequest($r.FoldingRangeRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeFoldingRange.fire()});let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new zv.EventEmitter,i={onDidChangeFoldingRanges:r.event,provideFoldingRanges:(s,o,a)=>{let u=this._client,h=(C,y,D)=>{let v={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C)};return u.sendRequest($r.FoldingRangeRequest.type,v,D).then(q=>D.isCancellationRequested?null:u.protocol2CodeConverter.asFoldingRanges(q,D),q=>u.handleFailedRequest($r.FoldingRangeRequest.type,D,q,null))},g=u.middleware;return g.provideFoldingRanges?g.provideFoldingRanges(s,o,a,h):h(s,o,a)}};return[zv.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),i),{provider:i,onDidChangeFoldingRange:r}]}};ua.FoldingRangeFeature=yf});var Bv=O(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.DeclarationFeature=void 0;var JR=require("vscode"),vf=he(),Cf=Pe(),_f=class extends Cf.TextDocumentLanguageFeature{constructor(e){super(e,vf.DeclarationRequest.type)}fillClientCapabilities(e){let t=(0,Cf.ensure)((0,Cf.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(vf.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(D,y),D=>a.handleFailedRequest(vf.DeclarationRequest.type,y,D,null)),h=a.middleware;return h.provideDeclaration?h.provideDeclaration(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return JR.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};da.DeclarationFeature=_f});var Gv=O(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.SelectionRangeFeature=void 0;var QR=require("vscode"),bf=he(),wf=Pe(),Rf=class extends wf.TextDocumentLanguageFeature{constructor(e){super(e,bf.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=(0,wf.ensure)((0,wf.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,s,o)=>{let a=this._client,u=async(g,C,y)=>{let D={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositionsSync(C,y)};return a.sendRequest(bf.SelectionRangeRequest.type,D,y).then(v=>y.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(v,y),v=>a.handleFailedRequest(bf.SelectionRangeRequest.type,y,v,null))},h=a.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return QR.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};la.SelectionRangeFeature=Rf});var Jv=O(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.ProgressFeature=void 0;var Xv=he(),YR=Xd();function ZR(n,e){return n[e]===void 0&&(n[e]=Object.create(null)),n[e]}var Sf=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:Xv.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){ZR(e,"window").workDoneProgress=!0}initialize(){let e=this._client,t=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new YR.ProgressPart(this._client,i.token,t))};e.onRequest(Xv.WorkDoneProgressCreateRequest.type,r)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};fa.ProgressFeature=Sf});var Qv=O(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.CallHierarchyFeature=void 0;var eS=require("vscode"),Hr=he(),Df=Pe(),Tf=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(a,u,h)=>{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(Hr.CallHierarchyPrepareRequest.type,g,h).then(C=>h.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(C,h),C=>i.handleFailedRequest(Hr.CallHierarchyPrepareRequest.type,h,C,null))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,r,o):o(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Hr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h,a),h=>r.handleFailedRequest(Hr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,s):s(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(o)};return r.sendRequest(Hr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h,a),h=>r.handleFailedRequest(Hr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,s):s(e,t)}},Pf=class extends Df.TextDocumentLanguageFeature{constructor(e){super(e,Hr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=e,r=(0,Df.ensure)((0,Df.ensure)(t,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Tf(t);return[eS.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};ha.CallHierarchyFeature=Pf});var Yv=O(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.SemanticTokensFeature=void 0;var pa=require("vscode"),ye=he(),us=Pe(),tS=Rn(),Ef=class extends us.TextDocumentLanguageFeature{constructor(e){super(e,ye.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=(0,us.ensure)((0,us.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=!0,t.tokenTypes=[ye.SemanticTokenTypes.namespace,ye.SemanticTokenTypes.type,ye.SemanticTokenTypes.class,ye.SemanticTokenTypes.enum,ye.SemanticTokenTypes.interface,ye.SemanticTokenTypes.struct,ye.SemanticTokenTypes.typeParameter,ye.SemanticTokenTypes.parameter,ye.SemanticTokenTypes.variable,ye.SemanticTokenTypes.property,ye.SemanticTokenTypes.enumMember,ye.SemanticTokenTypes.event,ye.SemanticTokenTypes.function,ye.SemanticTokenTypes.method,ye.SemanticTokenTypes.macro,ye.SemanticTokenTypes.keyword,ye.SemanticTokenTypes.modifier,ye.SemanticTokenTypes.comment,ye.SemanticTokenTypes.string,ye.SemanticTokenTypes.number,ye.SemanticTokenTypes.regexp,ye.SemanticTokenTypes.operator,ye.SemanticTokenTypes.decorator],t.tokenModifiers=[ye.SemanticTokenModifiers.declaration,ye.SemanticTokenModifiers.definition,ye.SemanticTokenModifiers.readonly,ye.SemanticTokenModifiers.static,ye.SemanticTokenModifiers.deprecated,ye.SemanticTokenModifiers.abstract,ye.SemanticTokenModifiers.async,ye.SemanticTokenModifiers.modification,ye.SemanticTokenModifiers.documentation,ye.SemanticTokenModifiers.defaultLibrary],t.formats=[ye.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,(0,us.ensure)((0,us.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,t){this._client.onRequest(ye.SemanticTokensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeSemanticTokensEmitter.fire()});let[i,s]=this.getRegistration(t,e.semanticTokensProvider);!i||!s||this.register({id:i,registerOptions:s})}registerLanguageProvider(e){let t=e.documentSelector,r=tS.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,s=new pa.EventEmitter,o=r?{onDidChangeSemanticTokens:s.event,provideDocumentSemanticTokens:(D,v)=>{let q=this._client,k=q.middleware,A=($,M)=>{let W={textDocument:q.code2ProtocolConverter.asTextDocumentIdentifier($)};return q.sendRequest(ye.SemanticTokensRequest.type,W,M).then(z=>M.isCancellationRequested?null:q.protocol2CodeConverter.asSemanticTokens(z,M),z=>q.handleFailedRequest(ye.SemanticTokensRequest.type,M,z,null))};return k.provideDocumentSemanticTokens?k.provideDocumentSemanticTokens(D,v,A):A(D,v)},provideDocumentSemanticTokensEdits:i?(D,v,q)=>{let k=this._client,A=k.middleware,$=(M,W,z)=>{let le={textDocument:k.code2ProtocolConverter.asTextDocumentIdentifier(M),previousResultId:W};return k.sendRequest(ye.SemanticTokensDeltaRequest.type,le,z).then(async B=>z.isCancellationRequested?null:ye.SemanticTokens.is(B)?await k.protocol2CodeConverter.asSemanticTokens(B,z):await k.protocol2CodeConverter.asSemanticTokensEdits(B,z),B=>k.handleFailedRequest(ye.SemanticTokensDeltaRequest.type,z,B,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(D,v,q,$):$(D,v,q)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(D,v,q)=>{let k=this._client,A=k.middleware,$=(M,W,z)=>{let le={textDocument:k.code2ProtocolConverter.asTextDocumentIdentifier(M),range:k.code2ProtocolConverter.asRange(W)};return k.sendRequest(ye.SemanticTokensRangeRequest.type,le,z).then(B=>z.isCancellationRequested?null:k.protocol2CodeConverter.asSemanticTokens(B,z),B=>k.handleFailedRequest(ye.SemanticTokensRangeRequest.type,z,B,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(D,v,q,$):$(D,v,q)}}:void 0,h=[],g=this._client,C=g.protocol2CodeConverter.asSemanticTokensLegend(e.legend),y=g.protocol2CodeConverter.asDocumentSelector(t);return o!==void 0&&h.push(pa.languages.registerDocumentSemanticTokensProvider(y,o,C)),u!==void 0&&h.push(pa.languages.registerDocumentRangeSemanticTokensProvider(y,u,C)),[new pa.Disposable(()=>h.forEach(D=>D.dispose())),{range:u,full:o,onDidChangeSemanticTokensEmitter:s}]}};ga.SemanticTokensFeature=Ef});var tC=O(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.WillDeleteFilesFeature=Qt.WillRenameFilesFeature=Qt.WillCreateFilesFeature=Qt.DidDeleteFilesFeature=Qt.DidRenameFilesFeature=Qt.DidCreateFilesFeature=void 0;var qn=require("vscode"),nS=Lo(),nr=he(),rS=Ye();function Zv(n,e){return n[e]===void 0&&(n[e]={}),n[e]}function iS(n,e){return n[e]}function eC(n,e,t){n[e]=t}var ds=class n{constructor(e,t,r,i,s){this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=s,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Zv(Zv(e,"workspace"),"fileOperations");eC(t,"dynamicRegistration",!0),eC(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?iS(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:rS.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=>{let i=new nS.Minimatch(r.pattern.glob,n.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return n.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async s=>{let o=t(s),a=o.fsPath.replace(/\\/g,"/");for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&&h.scheme!==o.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(o);if(g===void 0)return this._client.error(`Failed to determine file type for ${o.toString()}.`),!0;if(g===qn.FileType.File&&h.kind===nr.FileOperationPatternKind.file||g===qn.FileType.Directory&&h.kind===nr.FileOperationPatternKind.folder)return!0}else if(h.kind===nr.FileOperationPatternKind.folder&&await n.getFileType(o)===qn.FileType.Directory&&h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((s,o)=>r[o]);return{...e,files:i}}static async getFileType(e){try{return(await qn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let t={dot:!0};return e?.ignoreCase===!0&&(t.nocase=!0),t}},ma=class extends ds{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s),this._notificationType=r,this._accessUri=o,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},ya=class extends ma{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await ds.getFileType(e);return r&&this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},qf=class extends ma{constructor(e){super(e,qn.workspace.onDidCreateFiles,nr.DidCreateFilesNotification.type,"didCreate","didCreate",t=>t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};Qt.DidCreateFilesFeature=qf;var kf=class extends ya{constructor(e){super(e,qn.workspace.onDidRenameFiles,nr.DidRenameFilesNotification.type,"didRename","didRename",t=>t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=qn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=>t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};Qt.DidRenameFilesFeature=kf;var Of=class extends ya{constructor(e){super(e,qn.workspace.onDidDeleteFiles,nr.DidDeleteFilesNotification.type,"didDelete","didDelete",t=>t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=qn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=>t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.middleware.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};Qt.DidDeleteFilesFeature=Of;var ls=class extends ds{constructor(e,t,r,i,s,o,a){super(e,t,r,i,s),this._requestType=r,this._accessUri=o,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},xf=class extends ls{constructor(e){super(e,qn.workspace.onWillCreateFiles,nr.WillCreateFilesRequest.type,"willCreate","willCreate",t=>t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};Qt.WillCreateFilesFeature=xf;var If=class extends ls{constructor(e){super(e,qn.workspace.onWillRenameFiles,nr.WillRenameFilesRequest.type,"willRename","willRename",t=>t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};Qt.WillRenameFilesFeature=If;var Nf=class extends ls{constructor(e){super(e,qn.workspace.onWillDeleteFiles,nr.WillDeleteFilesRequest.type,"willDelete","willDelete",t=>t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.middleware.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};Qt.WillDeleteFilesFeature=Nf});var nC=O(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.LinkedEditingFeature=void 0;var sS=require("vscode"),Ff=he(),Mf=Pe(),Lf=class extends Mf.TextDocumentLanguageFeature{constructor(e){super(e,Ff.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=(0,Mf.ensure)((0,Mf.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,s,o)=>{let a=this._client,u=(g,C,y)=>a.sendRequest(Ff.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,C),y).then(D=>y.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(D,y),D=>a.handleFailedRequest(Ff.LinkedEditingRangeRequest.type,y,D,null)),h=a.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,s,o,u):u(i,s,o)}};return[this.registerProvider(t,r),r]}registerProvider(e,t){return sS.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};va.LinkedEditingFeature=Lf});var rC=O(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.TypeHierarchyFeature=void 0;var oS=require("vscode"),Ur=he(),jf=Pe(),Af=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,t,r){let i=this.client,s=this.middleware,o=(a,u,h)=>{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(Ur.TypeHierarchyPrepareRequest.type,g,h).then(C=>h.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(C,h),C=>i.handleFailedRequest(Ur.TypeHierarchyPrepareRequest.type,h,C,null))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,r,o):o(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Ur.TypeHierarchySupertypesRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,a),h=>r.handleFailedRequest(Ur.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,s):s(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,s=(o,a)=>{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(o)};return r.sendRequest(Ur.TypeHierarchySubtypesRequest.type,u,a).then(h=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(h,a),h=>r.handleFailedRequest(Ur.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,s):s(e,t)}},$f=class extends jf.TextDocumentLanguageFeature{constructor(e){super(e,Ur.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let t=(0,jf.ensure)((0,jf.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Af(t);return[oS.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),r),r]}};Ca.TypeHierarchyFeature=$f});var sC=O(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.InlineValueFeature=void 0;var iC=require("vscode"),_a=he(),fs=Pe(),Hf=class extends fs.TextDocumentLanguageFeature{constructor(e){super(e,_a.InlineValueRequest.type)}fillClientCapabilities(e){(0,fs.ensure)((0,fs.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,fs.ensure)((0,fs.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,t){this._client.onRequest(_a.InlineValueRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new iC.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(s,o,a,u)=>{let h=this._client,g=(y,D,v,q)=>{let k={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(y),range:h.code2ProtocolConverter.asRange(D),context:h.code2ProtocolConverter.asInlineValueContext(v)};return h.sendRequest(_a.InlineValueRequest.type,k,q).then(A=>q.isCancellationRequested?null:h.protocol2CodeConverter.asInlineValues(A,q),A=>h.handleFailedRequest(_a.InlineValueRequest.type,q,A,null))},C=h.middleware;return C.provideInlineValues?C.provideInlineValues(s,o,a,u,g):g(s,o,a,u)}};return[this.registerProvider(t,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(e,t){return iC.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};ba.InlineValueFeature=Hf});var aC=O(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.InlayHintsFeature=void 0;var oC=require("vscode"),Pi=he(),hs=Pe(),Uf=class extends hs.TextDocumentLanguageFeature{constructor(e){super(e,Pi.InlayHintRequest.type)}fillClientCapabilities(e){let t=(0,hs.ensure)((0,hs.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=!0,t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,hs.ensure)((0,hs.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,t){this._client.onRequest(Pi.InlayHintRefreshRequest.type,async()=>{for(let s of this.getAllProviders())s.onDidChangeInlayHints.fire()});let[r,i]=this.getRegistration(t,e.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new oC.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(s,o,a)=>{let u=this._client,h=async(C,y,D)=>{let v={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(C),range:u.code2ProtocolConverter.asRange(y)};try{let q=await u.sendRequest(Pi.InlayHintRequest.type,v,D);return D.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(q,D)}catch(q){return u.handleFailedRequest(Pi.InlayHintRequest.type,D,q,null)}},g=u.middleware;return g.provideInlayHints?g.provideInlayHints(s,o,a,h):h(s,o,a)}};return i.resolveInlayHint=e.resolveProvider===!0?(s,o)=>{let a=this._client,u=async(g,C)=>{try{let y=await a.sendRequest(Pi.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(g),C);if(C.isCancellationRequested)return null;let D=a.protocol2CodeConverter.asInlayHint(y,C);return C.isCancellationRequested?null:D}catch(y){return a.handleFailedRequest(Pi.InlayHintResolveRequest.type,C,y,null)}},h=a.middleware;return h.resolveInlayHint?h.resolveInlayHint(s,o,u):u(s,o)}:void 0,[this.registerProvider(t,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(e,t){return oC.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}};wa.InlayHintsFeature=Uf});var cC=O(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.InlineCompletionItemFeature=void 0;var aS=require("vscode"),Wf=he(),Kf=Pe(),cS=Ye(),zf=class extends Kf.TextDocumentLanguageFeature{constructor(e){super(e,Wf.InlineCompletionRequest.type)}fillClientCapabilities(e){let t=(0,Kf.ensure)((0,Kf.ensure)(e,"textDocument"),"inlineCompletion");t.dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.inlineCompletionProvider);r&&this.register({id:cS.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideInlineCompletionItems:(i,s,o,a)=>{let u=this._client,h=this._client.middleware,g=(C,y,D,v)=>u.sendRequest(Wf.InlineCompletionRequest.type,u.code2ProtocolConverter.asInlineCompletionParams(C,y,D),v).then(q=>v.isCancellationRequested?null:u.protocol2CodeConverter.asInlineCompletionResult(q,v),q=>u.handleFailedRequest(Wf.InlineCompletionRequest.type,v,q,null));return h.provideInlineCompletionItems?h.provideInlineCompletionItems(i,s,o,a,g):g(i,s,o,a)}};return[aS.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),r),r]}};Ra.InlineCompletionItemFeature=zf});var Qf=O(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.ProposedFeatures=Rt.BaseLanguageClient=Rt.MessageTransports=Rt.SuspendMode=Rt.State=Rt.CloseAction=Rt.ErrorAction=Rt.RevealOutputChannelOn=void 0;var Ie=require("vscode"),H=he(),uS=jy(),dS=Hy(),An=Rn(),Sa=ko(),uC=Ye(),lS=Xd(),jn=Pe(),fS=gl(),dC=vv(),lC=_v(),Ei=bv(),hS=wv(),pS=Rv(),gS=Sv(),mS=Tv(),yS=Pv(),vS=$l(),CS=qv(),_S=kv(),bS=Ov(),wS=Iv(),Vf=Nv(),RS=Mv(),SS=Lv(),DS=Av(),TS=$v(),PS=Hv(),ES=Uv(),qS=Wv(),kS=Kv(),OS=Vv(),xS=Bv(),IS=Gv(),NS=Jv(),FS=Qv(),MS=Yv(),qi=tC(),LS=nC(),jS=rC(),AS=sC(),$S=aC(),HS=cC(),Wr;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warn=2]="Warn",n[n.Error=3]="Error",n[n.Never=4]="Never"})(Wr||(Rt.RevealOutputChannelOn=Wr={}));var gs;(function(n){n[n.Continue=1]="Continue",n[n.Shutdown=2]="Shutdown"})(gs||(Rt.ErrorAction=gs={}));var Rr;(function(n){n[n.DoNotRestart=1]="DoNotRestart",n[n.Restart=2]="Restart"})(Rr||(Rt.CloseAction=Rr={}));var ps;(function(n){n[n.Stopped=1]="Stopped",n[n.Starting=3]="Starting",n[n.Running=2]="Running"})(ps||(Rt.State=ps={}));var fC;(function(n){n.off="off",n.on="on"})(fC||(Rt.SuspendMode=fC={}));var Bf;(function(n){function e(t){return t==null?!1:typeof t=="boolean"||typeof t=="object"&&t!==null&&An.stringArray(t.enabledCommands)?t:!1}n.sanitizeIsTrusted=e})(Bf||(Bf={}));var Gf=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&&r<=3?{action:gs.Continue}:{action:gs.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Rr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Rr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Rr.Restart})}},be;(function(n){n.Initial="initial",n.Starting="starting",n.StartFailed="startFailed",n.Running="running",n.Stopping="stopping",n.Stopped="stopped"})(be||(be={}));var hC;(function(n){function e(t){return t&&H.MessageReader.is(t.reader)&&H.MessageWriter.is(t.writer)}n.is=e})(hC||(Rt.MessageTransports=hC={}));var ms=class n{constructor(e,t,r){this._traceFormat=H.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new Sa.Semaphore(1),this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&&(i.isTrusted=Bf.sanitizeIsTrusted(r.markdown.isTrusted),i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??Wr.Error,stdioEncoding:r.stdioEncoding??"utf8",initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:r.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=be.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new Sa.Semaphore(1),this._pendingChangeDelayer=new Sa.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new Sa.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new H.Emitter,this._stateChangeEmitter=new H.Emitter,this._trace=H.Trace.Off,this._tracer={log:(s,o)=>{An.string(s)?this.logTrace(s,o):this.logObjectTrace(s)}},this._c2p=uS.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=dS.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=Ie.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&&this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){switch(this.$state){case be.Starting:return ps.Starting;case be.Running:return ps.Running;default:return ps.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===be.StartFailed||this.$state===be.Stopping||this.$state===be.Stopped)return Promise.reject(new H.ResponseError(H.ErrorCodes.ConnectionInactive,"Client is not running"));let r=await this.$start();this._didChangeTextDocumentFeature.syncKind===H.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(r);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let s,o;return t.length===1?H.CancellationToken.is(t[0])?o=t[0]:s=t[0]:t.length===2&&(s=t[0],o=t[1]),i(e,s,o,(a,u,h)=>{let g=[];return u!==void 0&&g.push(u),h!==void 0&&g.push(h),r.sendRequest(a,...g)})}else return r.sendRequest(e,...t)}onRequest(e,t){let r=typeof e=="string"?e:e.method;this._requestHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._requestDisposables.set(r,i.onRequest(e,t)),s={dispose:()=>{let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}):(this._pendingRequestHandlers.set(r,t),s={dispose:()=>{this._pendingRequestHandlers.delete(r);let o=this._requestDisposables.get(r);o!==void 0&&(o.dispose(),this._requestDisposables.delete(r))}}),{dispose:()=>{this._requestHandlers.delete(r),s.dispose()}}}async sendNotification(e,t){if(this.$state===be.StartFailed||this.$state===be.Stopping||this.$state===be.Stopped)return Promise.reject(new H.ResponseError(H.ErrorCodes.ConnectionInactive,"Client is not running"));let r=this._didChangeTextDocumentFeature.syncKind===H.TextDocumentSyncKind.Full,i;r&&typeof e!="string"&&e.method===H.DidOpenTextDocumentNotification.method&&(i=t?.textDocument.uri,this._pendingOpenNotifications.add(i));let s=await this.$start();r&&await this.sendPendingFullTextDocumentChanges(s),i!==void 0&&this._pendingOpenNotifications.delete(i);let o=this._clientOptions.middleware?.sendNotification;return o?o(e,s.sendNotification.bind(s),t):s.sendNotification(e,t)}onNotification(e,t){let r=typeof e=="string"?e:e.method;this._notificationHandlers.set(r,t);let i=this.activeConnection(),s;return i!==void 0?(this._notificationDisposables.set(r,i.onNotification(e,t)),s={dispose:()=>{let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}):(this._pendingNotificationHandlers.set(r,t),s={dispose:()=>{this._pendingNotificationHandlers.delete(r);let o=this._notificationDisposables.get(r);o!==void 0&&(o.dispose(),this._notificationDisposables.delete(r))}}),{dispose:()=>{this._notificationHandlers.delete(r),s.dispose()}}}async sendProgress(e,t,r){if(this.$state===be.StartFailed||this.$state===be.Stopping||this.$state===be.Stopped)return Promise.reject(new H.ResponseError(H.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,t,r)}catch(i){throw this.error(`Sending progress for token ${t} failed.`,i),i}}onProgress(e,t,r){this._progressHandlers.set(t,{type:e,handler:r});let i=this.activeConnection(),s,o=this._clientOptions.middleware?.handleWorkDoneProgress,a=H.WorkDoneProgress.is(e)&&o!==void 0?u=>{o(t,u,()=>r(u))}:r;return i!==void 0?(this._progressDisposables.set(t,i.onProgress(e,t,a)),s={dispose:()=>{let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}):(this._pendingProgressHandlers.set(t,{type:e,handler:r}),s={dispose:()=>{this._pendingProgressHandlers.delete(t);let u=this._progressDisposables.get(t);u!==void 0&&(u.dispose(),this._progressDisposables.delete(t))}}),{dispose:()=>{this._progressHandlers.delete(t),s.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Gf(this,e??4)}async setTrace(e){this._trace=e;let t=this.activeConnection();t!==void 0&&await t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof H.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?An.string(e.stack)?e.stack:e.message:An.string(e)?e:e.toString()}debug(e,t,r=!0){this.logOutputMessage(H.MessageType.Debug,Wr.Debug,"Debug",e,t,r)}info(e,t,r=!0){this.logOutputMessage(H.MessageType.Info,Wr.Info,"Info",e,t,r)}warn(e,t,r=!0){this.logOutputMessage(H.MessageType.Warning,Wr.Warn,"Warn",e,t,r)}error(e,t,r=!0){this.logOutputMessage(H.MessageType.Error,Wr.Error,"Error",e,t,r)}logOutputMessage(e,t,r,i,s,o){this.outputChannel.appendLine(`[${r.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),s!=null&&this.outputChannel.appendLine(this.data2String(s)),(o==="force"||o&&this._clientOptions.revealOutputChannelOn<=t)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.",(e===H.MessageType.Error?Ie.window.showErrorMessage:e===H.MessageType.Warning?Ie.window.showWarningMessage:Ie.window.showInformationMessage)(t,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===be.Initial||this.$state===be.Stopping||this.$state===be.Stopped}needsStop(){return this.$state===be.Starting||this.$state===be.Running}activeConnection(){return this.$state===be.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===be.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===be.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,t,r]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?Ie.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):Ie.languages.createDiagnosticCollection());for(let[i,s]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,s);for(let[i,s]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,s);for(let[i,s]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,s);this.$state=be.Starting;try{let i=await this.createConnection();i.onNotification(H.LogMessageNotification.type,s=>{switch(s.type){case H.MessageType.Error:this.error(s.message,void 0,!1);break;case H.MessageType.Warning:this.warn(s.message,void 0,!1);break;case H.MessageType.Info:this.info(s.message,void 0,!1);break;case H.MessageType.Debug:this.debug(s.message,void 0,!1);break;default:this.outputChannel.appendLine(s.message)}}),i.onNotification(H.ShowMessageNotification.type,s=>{switch(s.type){case H.MessageType.Error:Ie.window.showErrorMessage(s.message);break;case H.MessageType.Warning:Ie.window.showWarningMessage(s.message);break;case H.MessageType.Info:Ie.window.showInformationMessage(s.message);break;default:Ie.window.showInformationMessage(s.message)}}),i.onRequest(H.ShowMessageRequest.type,s=>{let o;switch(s.type){case H.MessageType.Error:o=Ie.window.showErrorMessage;break;case H.MessageType.Warning:o=Ie.window.showWarningMessage;break;case H.MessageType.Info:o=Ie.window.showInformationMessage;break;default:o=Ie.window.showInformationMessage}let a=s.actions||[];return o(s.message,...a)}),i.onNotification(H.TelemetryEventNotification.type,s=>{this._telemetryEmitter.fire(s)}),i.onRequest(H.ShowDocumentRequest.type,async s=>{let o=async u=>{let h=this.protocol2CodeConverter.asUri(u.uri);try{if(u.external===!0)return{success:await Ie.env.openExternal(h)};{let g={};return u.selection!==void 0&&(g.selection=this.protocol2CodeConverter.asRange(u.selection)),u.takeFocus===void 0||u.takeFocus===!1?g.preserveFocus=!0:u.takeFocus===!0&&(g.preserveFocus=!1),await Ie.window.showTextDocument(h,g),{success:!0}}}catch{return{success:!1}}},a=this._clientOptions.middleware.window?.showDocument;return a!==void 0?a(s,o):o(s)}),i.listen(),await this.initialize(i),t()}catch(i){this.$state=be.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),r(i)}return this._onStart}createOnStartPromise(){let e,t;return[new Promise((i,s)=>{e=i,t=s}),e,t]}async initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],s={processId:null,clientInfo:{name:Ie.env.appName,version:Ie.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(Ie.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:An.func(t)?t():t,trace:H.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(s),this._clientOptions.progressOnInitialization){let o=uC.generateUuid(),a=new lS.ProgressPart(e,o);s.workDoneToken=o;try{let u=await this.doInitialize(e,s);return a.done(),u}catch(u){throw a.cancel(),u}}else return this.doInitialize(e,s)}async doInitialize(e,t){try{let r=await e.initialize(t);if(r.capabilities.positionEncoding!==void 0&&r.capabilities.positionEncoding!==H.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${r.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=r,this.$state=be.Running;let i;An.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===H.TextDocumentSyncKind.None?i={openClose:!1,change:H.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&&r.capabilities.textDocumentSync!==null&&(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(H.PublishDiagnosticsNotification.type,s=>this.handleDiagnostics(s)),e.onRequest(H.RegistrationRequest.type,s=>this.handleRegistrationRequest(s)),e.onRequest("client/registerFeature",s=>this.handleRegistrationRequest(s)),e.onRequest(H.UnregistrationRequest.type,s=>this.handleUnregistrationRequest(s)),e.onRequest("client/unregisterFeature",s=>this.handleUnregistrationRequest(s)),e.onRequest(H.ApplyWorkspaceEditRequest.type,s=>this.handleApplyWorkspaceEdit(s));for(let[s,o]of this._pendingNotificationHandlers)this._notificationDisposables.set(s,e.onNotification(s,o));this._pendingNotificationHandlers.clear();for(let[s,o]of this._pendingRequestHandlers)this._requestDisposables.set(s,e.onRequest(s,o));this._pendingRequestHandlers.clear();for(let[s,o]of this._pendingProgressHandlers)this._progressDisposables.set(s,e.onProgress(o.type,s,o.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(H.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),r}catch(r){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):this.stop():r instanceof H.ResponseError&&r.data&&r.data.retry?Ie.window.showErrorMessage(r.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(r&&r.message&&Ie.window.showErrorMessage(r.message),this.error("Server initialization failed.",r),this.stop()),r}}_clientGetRootPath(){let e=Ie.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===be.Stopped||this.$state===be.Initial)return;if(this.$state===be.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let r=this.activeConnection();if(r===void 0||this.$state!==be.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=be.Stopping,this.cleanUp(e);let i=new Promise(o=>{(0,H.RAL)().timer.setTimeout(o,t)}),s=(async o=>(await o.shutdown(),await o.exit(),o))(r);return this._onStop=Promise.race([i,s]).then(o=>{if(o!==void 0)o.end(),o.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},o=>{throw this.error("Stopping server failed",o,!1),o}).finally(()=>{this.$state=be.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let t=this._listeners.splice(0,this._listeners.length);for(let r of t)r.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=>i[1]).reverse())r.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(s){return t._fileEvents.push(s),t._fileEventDelayer.trigger(async()=>{await t.sendNotification(H.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents}),t._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(s=>{t.error("Notify file events failed.",s)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let t=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(t.length===0)return;for(let r of t){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(r);await e.sendNotification(H.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(r,H.DidChangeTextDocumentNotification.type,i)}}catch(t){throw this.error("Sending pending changes failed",t,!1),t}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let t=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,H.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[t,r]=e.value;this._diagnosticQueue.delete(t);let i=new Ie.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i},this._p2c.asDiagnostics(r,i.token).then(s=>{if(!i.token.isCancellationRequested){let o=this._p2c.asUri(t),a=this.clientOptions.middleware;a.handleDiagnostics?a.handleDiagnostics(o,s,(u,h)=>this.setDiagnostics(u,h)):this.setDiagnostics(o,s)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,t){this._diagnostics&&this._diagnostics.set(e,t)}getLocale(){return Ie.env.language}async $start(){if(this.$state===be.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,s,o)=>{this.handleConnectionError(i,s,o).catch(a=>this.error("Handling connection error failed",a))},t=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},r=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=US(r.reader,r.writer,e,t,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===be.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Rr.DoNotRestart};if(this.$state!==be.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Rr.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===be.Starting?this.$state=be.StartFailed:this.$state=be.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Rr.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=be.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(t=>this.error("Restarting server failed",t,"force")))}async handleConnectionError(e,t,r){let i=await this._clientOptions.errorHandler.error(e,t,r);i.action===gs.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(s=>{this.error("Stopping server failed",s,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(Ie.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,t=!1){let r=Ie.workspace.getConfiguration(this._id),i=H.Trace.Off,s=H.TraceFormat.Text;if(r){let o=r.get("trace.server","off");typeof o=="string"?i=H.Trace.fromString(o):(i=H.Trace.fromString(r.get("trace.server.verbosity","off")),s=H.TraceFormat.fromString(r.get("trace.server.format","text")))}this._trace=i,this._traceFormat=s,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch(o=>{this.error("Updating trace failed with error",o,!1)})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;An.array(t)?r=t:r=[t],r&&this._dynamicFeatures.get(H.DidChangeWatchedFilesNotification.type.method).registerRaw(uC.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),jn.DynamicFeature.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let t=this.getFeature(H.NotebookDocumentSyncRegistrationType.method);return t===void 0||!(t instanceof dC.NotebookDocumentSyncFeature)?!1:t.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new lC.ConfigurationFeature(this)),this.registerFeature(new Ei.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new Ei.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new Ei.WillSaveFeature(this)),this.registerFeature(new Ei.WillSaveWaitUntilFeature(this)),this.registerFeature(new Ei.DidSaveTextDocumentFeature(this)),this.registerFeature(new Ei.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new TS.FileSystemWatcherFeature(this,t=>this.notifyFileEvent(t))),this.registerFeature(new hS.CompletionItemFeature(this)),this.registerFeature(new pS.HoverFeature(this)),this.registerFeature(new mS.SignatureHelpFeature(this)),this.registerFeature(new gS.DefinitionFeature(this)),this.registerFeature(new _S.ReferencesFeature(this)),this.registerFeature(new yS.DocumentHighlightFeature(this)),this.registerFeature(new vS.DocumentSymbolFeature(this)),this.registerFeature(new CS.WorkspaceSymbolFeature(this)),this.registerFeature(new bS.CodeActionFeature(this)),this.registerFeature(new wS.CodeLensFeature(this)),this.registerFeature(new Vf.DocumentFormattingFeature(this)),this.registerFeature(new Vf.DocumentRangeFormattingFeature(this)),this.registerFeature(new Vf.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new RS.RenameFeature(this)),this.registerFeature(new SS.DocumentLinkFeature(this)),this.registerFeature(new DS.ExecuteCommandFeature(this)),this.registerFeature(new lC.SyncConfigurationFeature(this)),this.registerFeature(new qS.TypeDefinitionFeature(this)),this.registerFeature(new ES.ImplementationFeature(this)),this.registerFeature(new PS.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new kS.WorkspaceFoldersFeature(this)),this.registerFeature(new OS.FoldingRangeFeature(this)),this.registerFeature(new xS.DeclarationFeature(this)),this.registerFeature(new IS.SelectionRangeFeature(this)),this.registerFeature(new NS.ProgressFeature(this)),this.registerFeature(new FS.CallHierarchyFeature(this)),this.registerFeature(new MS.SemanticTokensFeature(this)),this.registerFeature(new LS.LinkedEditingFeature(this)),this.registerFeature(new qi.DidCreateFilesFeature(this)),this.registerFeature(new qi.DidRenameFilesFeature(this)),this.registerFeature(new qi.DidDeleteFilesFeature(this)),this.registerFeature(new qi.WillCreateFilesFeature(this)),this.registerFeature(new qi.WillRenameFilesFeature(this)),this.registerFeature(new qi.WillDeleteFilesFeature(this)),this.registerFeature(new jS.TypeHierarchyFeature(this)),this.registerFeature(new AS.InlineValueFeature(this)),this.registerFeature(new $S.InlayHintsFeature(this)),this.registerFeature(new fS.DiagnosticFeature(this)),this.registerFeature(new dC.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Jf.createAll(this))}fillInitializeParams(e){for(let t of this._features)An.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,jn.ensure)(e,"workspace").applyEdit=!0;let t=(0,jn.ensure)((0,jn.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=!0,t.resourceOperations=[H.ResourceOperationKind.Create,H.ResourceOperationKind.Rename,H.ResourceOperationKind.Delete],t.failureHandling=H.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=(0,jn.ensure)((0,jn.ensure)(e,"textDocument"),"publishDiagnostics");r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[H.DiagnosticTag.Unnecessary,H.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=(0,jn.ensure)(e,"window"),s=(0,jn.ensure)(i,"showMessage");s.messageActionItem={additionalPropertiesSupport:!0};let o=(0,jn.ensure)(i,"showDocument");o.support=!0;let a=(0,jn.ensure)(e,"general");a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(n.RequestsToCancelOnContentModified)},a.regularExpressions={engine:"ECMAScript",version:"ES2020"},a.markdown={parser:"marked",version:"1.1.0"},a.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)An.func(r.preInitialize)&&r.preInitialize(this._capabilities,t);for(let r of this._features)r.initialize(this._capabilities,t)}async handleRegistrationRequest(e){let t=this.clientOptions.middleware?.handleRegisterCapability;return t?t(e,r=>this.doRegisterCapability(r)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let t of e.registrations)this._ignoredRegistrations.add(t.id);return}for(let t of e.registrations){let r=this._dynamicFeatures.get(t.method);if(r===void 0)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`));let i=t.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let s={id:t.id,registerOptions:i};try{r.register(s)}catch(o){return Promise.reject(o)}}}async handleUnregistrationRequest(e){let t=this.clientOptions.middleware?.handleUnregisterCapability;return t?t(e,r=>this.doUnregisterCapability(r)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id))continue;let r=this._dynamicFeatures.get(t.method);if(!r)return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`));r.unregister(t.id)}}async handleApplyWorkspaceEdit(e){let t=e.edit,r=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(t)),i=new Map;Ie.workspace.textDocuments.forEach(o=>i.set(o.uri.toString(),o));let s=!1;if(t.documentChanges){for(let o of t.documentChanges)if(H.TextDocumentEdit.is(o)&&o.textDocument.version&&o.textDocument.version>=0){let a=this._p2c.asUri(o.textDocument.uri).toString(),u=i.get(a);if(u&&u.version!==o.textDocument.version){s=!0;break}}}return s?Promise.resolve({applied:!1}):An.asPromise(Ie.workspace.applyEdit(r).then(o=>({applied:o})))}handleFailedRequest(e,t,r,i,s=!0){if(r instanceof H.ResponseError){if(r.code===H.ErrorCodes.PendingResponseRejected||r.code===H.ErrorCodes.ConnectionInactive)return i;if(r.code===H.LSPErrorCodes.RequestCancelled||r.code===H.LSPErrorCodes.ServerCancelled){if(t!==void 0&&t.isCancellationRequested)return i;throw r.data!==void 0?new jn.LSPCancellationError(r.data):new Ie.CancellationError}else if(r.code===H.LSPErrorCodes.ContentModified){if(n.RequestsToCancelOnContentModified.has(e.method)||n.CancellableResolveCalls.has(e.method))throw new Ie.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,s),r}};Rt.BaseLanguageClient=ms;ms.RequestsToCancelOnContentModified=new Set([H.SemanticTokensRequest.method,H.SemanticTokensRangeRequest.method,H.SemanticTokensDeltaRequest.method]);ms.CancellableResolveCalls=new Set([H.CompletionResolveRequest.method,H.CodeLensResolveRequest.method,H.CodeActionResolveRequest.method,H.InlayHintResolveRequest.method,H.DocumentLinkResolveRequest.method,H.WorkspaceSymbolResolveRequest.method]);var Xf=class{error(e){(0,H.RAL)().console.error(e)}warn(e){(0,H.RAL)().console.warn(e)}info(e){(0,H.RAL)().console.info(e)}log(e){(0,H.RAL)().console.log(e)}};function US(n,e,t,r,i){let s=new Xf,o=(0,H.createProtocolConnection)(n,e,s,i);return o.onError(u=>{t(u[0],u[1],u[2])}),o.onClose(r),{listen:()=>o.listen(),sendRequest:o.sendRequest,onRequest:o.onRequest,hasPendingResponse:o.hasPendingResponse,sendNotification:o.sendNotification,onNotification:o.onNotification,onProgress:o.onProgress,sendProgress:o.sendProgress,trace:(u,h,g)=>{let C={sendNotification:!1,traceFormat:H.TraceFormat.Text};return g===void 0?o.trace(u,h,C):(An.boolean(g),o.trace(u,h,g))},initialize:u=>o.sendRequest(H.InitializeRequest.type,u),shutdown:()=>o.sendRequest(H.ShutdownRequest.type,void 0),exit:()=>o.sendNotification(H.ExitNotification.type),end:()=>o.end(),dispose:()=>o.dispose()}}var Jf;(function(n){function e(t){return[new HS.InlineCompletionItemFeature(t)]}n.createAll=e})(Jf||(Rt.ProposedFeatures=Jf={}))});var gC=O(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.terminate=void 0;var pC=require("child_process"),WS=require("path"),KS=process.platform==="win32",zS=process.platform==="darwin",VS=process.platform==="linux";function BS(n,e){if(KS)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),pC.execFileSync("taskkill",["/T","/F","/PID",n.pid.toString()],i),!0}catch{return!1}else if(VS||zS)try{var t=(0,WS.join)(__dirname,"terminateProcess.sh"),r=pC.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill("SIGKILL"),!0}Da.terminate=BS});var Yf=O((_E,mC)=>{"use strict";mC.exports=he()});var ys=O((bE,yC)=>{var GS=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};yC.exports=GS});var Ta=O((wE,vC)=>{var XS="2.0.0",JS=Number.MAX_SAFE_INTEGER||9007199254740991,QS=16,YS=250,ZS=["major","premajor","minor","preminor","patch","prepatch","prerelease"];vC.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:QS,MAX_SAFE_BUILD_LENGTH:YS,MAX_SAFE_INTEGER:JS,RELEASE_TYPES:ZS,SEMVER_SPEC_VERSION:XS,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Pa=O((rr,CC)=>{var{MAX_SAFE_COMPONENT_LENGTH:Zf,MAX_SAFE_BUILD_LENGTH:eD,MAX_LENGTH:tD}=Ta(),nD=ys();rr=CC.exports={};var rD=rr.re=[],iD=rr.safeRe=[],G=rr.src=[],X=rr.t={},sD=0,eh="[a-zA-Z0-9-]",oD=[["\\s",1],["\\d",tD],[eh,eD]],aD=n=>{for(let[e,t]of oD)n=n.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return n},ve=(n,e,t)=>{let r=aD(e),i=sD++;nD(n,i,e),X[n]=i,G[i]=e,rD[i]=new RegExp(e,t?"g":void 0),iD[i]=new RegExp(r,t?"g":void 0)};ve("NUMERICIDENTIFIER","0|[1-9]\\d*");ve("NUMERICIDENTIFIERLOOSE","\\d+");ve("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${eh}*`);ve("MAINVERSION",`(${G[X.NUMERICIDENTIFIER]})\\.(${G[X.NUMERICIDENTIFIER]})\\.(${G[X.NUMERICIDENTIFIER]})`);ve("MAINVERSIONLOOSE",`(${G[X.NUMERICIDENTIFIERLOOSE]})\\.(${G[X.NUMERICIDENTIFIERLOOSE]})\\.(${G[X.NUMERICIDENTIFIERLOOSE]})`);ve("PRERELEASEIDENTIFIER",`(?:${G[X.NUMERICIDENTIFIER]}|${G[X.NONNUMERICIDENTIFIER]})`);ve("PRERELEASEIDENTIFIERLOOSE",`(?:${G[X.NUMERICIDENTIFIERLOOSE]}|${G[X.NONNUMERICIDENTIFIER]})`);ve("PRERELEASE",`(?:-(${G[X.PRERELEASEIDENTIFIER]}(?:\\.${G[X.PRERELEASEIDENTIFIER]})*))`);ve("PRERELEASELOOSE",`(?:-?(${G[X.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[X.PRERELEASEIDENTIFIERLOOSE]})*))`);ve("BUILDIDENTIFIER",`${eh}+`);ve("BUILD",`(?:\\+(${G[X.BUILDIDENTIFIER]}(?:\\.${G[X.BUILDIDENTIFIER]})*))`);ve("FULLPLAIN",`v?${G[X.MAINVERSION]}${G[X.PRERELEASE]}?${G[X.BUILD]}?`);ve("FULL",`^${G[X.FULLPLAIN]}$`);ve("LOOSEPLAIN",`[v=\\s]*${G[X.MAINVERSIONLOOSE]}${G[X.PRERELEASELOOSE]}?${G[X.BUILD]}?`);ve("LOOSE",`^${G[X.LOOSEPLAIN]}$`);ve("GTLT","((?:<|>)?=?)");ve("XRANGEIDENTIFIERLOOSE",`${G[X.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ve("XRANGEIDENTIFIER",`${G[X.NUMERICIDENTIFIER]}|x|X|\\*`);ve("XRANGEPLAIN",`[v=\\s]*(${G[X.XRANGEIDENTIFIER]})(?:\\.(${G[X.XRANGEIDENTIFIER]})(?:\\.(${G[X.XRANGEIDENTIFIER]})(?:${G[X.PRERELEASE]})?${G[X.BUILD]}?)?)?`);ve("XRANGEPLAINLOOSE",`[v=\\s]*(${G[X.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[X.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[X.XRANGEIDENTIFIERLOOSE]})(?:${G[X.PRERELEASELOOSE]})?${G[X.BUILD]}?)?)?`);ve("XRANGE",`^${G[X.GTLT]}\\s*${G[X.XRANGEPLAIN]}$`);ve("XRANGELOOSE",`^${G[X.GTLT]}\\s*${G[X.XRANGEPLAINLOOSE]}$`);ve("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Zf}})(?:\\.(\\d{1,${Zf}}))?(?:\\.(\\d{1,${Zf}}))?`);ve("COERCE",`${G[X.COERCEPLAIN]}(?:$|[^\\d])`);ve("COERCEFULL",G[X.COERCEPLAIN]+`(?:${G[X.PRERELEASE]})?(?:${G[X.BUILD]})?(?:$|[^\\d])`);ve("COERCERTL",G[X.COERCE],!0);ve("COERCERTLFULL",G[X.COERCEFULL],!0);ve("LONETILDE","(?:~>?)");ve("TILDETRIM",`(\\s*)${G[X.LONETILDE]}\\s+`,!0);rr.tildeTrimReplace="$1~";ve("TILDE",`^${G[X.LONETILDE]}${G[X.XRANGEPLAIN]}$`);ve("TILDELOOSE",`^${G[X.LONETILDE]}${G[X.XRANGEPLAINLOOSE]}$`);ve("LONECARET","(?:\\^)");ve("CARETTRIM",`(\\s*)${G[X.LONECARET]}\\s+`,!0);rr.caretTrimReplace="$1^";ve("CARET",`^${G[X.LONECARET]}${G[X.XRANGEPLAIN]}$`);ve("CARETLOOSE",`^${G[X.LONECARET]}${G[X.XRANGEPLAINLOOSE]}$`);ve("COMPARATORLOOSE",`^${G[X.GTLT]}\\s*(${G[X.LOOSEPLAIN]})$|^$`);ve("COMPARATOR",`^${G[X.GTLT]}\\s*(${G[X.FULLPLAIN]})$|^$`);ve("COMPARATORTRIM",`(\\s*)${G[X.GTLT]}\\s*(${G[X.LOOSEPLAIN]}|${G[X.XRANGEPLAIN]})`,!0);rr.comparatorTrimReplace="$1$2$3";ve("HYPHENRANGE",`^\\s*(${G[X.XRANGEPLAIN]})\\s+-\\s+(${G[X.XRANGEPLAIN]})\\s*$`);ve("HYPHENRANGELOOSE",`^\\s*(${G[X.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[X.XRANGEPLAINLOOSE]})\\s*$`);ve("STAR","(<|>)?=?\\s*\\*");ve("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ve("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ea=O((RE,_C)=>{var cD=Object.freeze({loose:!0}),uD=Object.freeze({}),dD=n=>n?typeof n!="object"?cD:n:uD;_C.exports=dD});var SC=O((SE,RC)=>{var bC=/^[0-9]+$/,wC=(n,e)=>{let t=bC.test(n),r=bC.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},lD=(n,e)=>wC(e,n);RC.exports={compareIdentifiers:wC,rcompareIdentifiers:lD}});var vs=O((DE,EC)=>{var qa=ys(),{MAX_LENGTH:DC,MAX_SAFE_INTEGER:ka}=Ta(),{safeRe:TC,t:PC}=Pa(),fD=Ea(),{compareIdentifiers:ki}=SC(),th=class n{constructor(e,t){if(t=fD(t),e instanceof n){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>DC)throw new TypeError(`version is longer than ${DC} characters`);qa("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?TC[PC.LOOSE]:TC[PC.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>ka||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ka||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ka||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ka)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(qa("SemVer.compare",this.version,this.options,e),!(e instanceof n)){if(typeof e=="string"&&e===this.version)return 0;e=new n(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n||(e=new n(e,this.options)),ki(this.major,e.major)||ki(this.minor,e.minor)||ki(this.patch,e.patch)}comparePre(e){if(e instanceof n||(e=new n(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(qa("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ki(r,i)}while(++t)}compareBuild(e){e instanceof n||(e=new n(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(qa("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ki(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];r===!1&&(s=[t]),ki(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};EC.exports=th});var OC=O((TE,kC)=>{var qC=vs(),hD=(n,e,t=!1)=>{if(n instanceof qC)return n;try{return new qC(n,e)}catch(r){if(!t)return null;throw r}};kC.exports=hD});var IC=O((PE,xC)=>{var nh=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}};xC.exports=nh});var Kr=O((EE,FC)=>{var NC=vs(),pD=(n,e,t)=>new NC(n,t).compare(new NC(e,t));FC.exports=pD});var LC=O((qE,MC)=>{var gD=Kr(),mD=(n,e,t)=>gD(n,e,t)===0;MC.exports=mD});var AC=O((kE,jC)=>{var yD=Kr(),vD=(n,e,t)=>yD(n,e,t)!==0;jC.exports=vD});var HC=O((OE,$C)=>{var CD=Kr(),_D=(n,e,t)=>CD(n,e,t)>0;$C.exports=_D});var WC=O((xE,UC)=>{var bD=Kr(),wD=(n,e,t)=>bD(n,e,t)>=0;UC.exports=wD});var zC=O((IE,KC)=>{var RD=Kr(),SD=(n,e,t)=>RD(n,e,t)<0;KC.exports=SD});var BC=O((NE,VC)=>{var DD=Kr(),TD=(n,e,t)=>DD(n,e,t)<=0;VC.exports=TD});var XC=O((FE,GC)=>{var PD=LC(),ED=AC(),qD=HC(),kD=WC(),OD=zC(),xD=BC(),ID=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return PD(n,t,r);case"!=":return ED(n,t,r);case">":return qD(n,t,r);case">=":return kD(n,t,r);case"<":return OD(n,t,r);case"<=":return xD(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};GC.exports=ID});var n_=O((ME,t_)=>{var Cs=Symbol("SemVer ANY"),sh=class n{static get ANY(){return Cs}constructor(e,t){if(t=JC(t),e instanceof n){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),ih("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Cs?this.value="":this.value=this.operator+this.semver.version,ih("comp",this)}parse(e){let t=this.options.loose?QC[YC.COMPARATORLOOSE]:QC[YC.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new ZC(r[2],this.options.loose):this.semver=Cs}toString(){return this.value}test(e){if(ih("Comparator.test",e,this.options.loose),this.semver===Cs||e===Cs)return!0;if(typeof e=="string")try{e=new ZC(e,this.options)}catch{return!1}return rh(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new e_(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new e_(this.value,t).test(e.semver):(t=JC(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||rh(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||rh(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};t_.exports=sh;var JC=Ea(),{safeRe:QC,t:YC}=Pa(),rh=XC(),ih=ys(),ZC=vs(),e_=oh()});var oh=O((LE,o_)=>{var ND=/\s+/g,ah=class n{constructor(e,t){if(t=MD(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof ch)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(ND," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!i_(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&WD(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let r=0;r<t.length;r++)r>0&&(this.formatted+=" "),this.formatted+=t[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&HD)|(this.options.loose&&UD))+":"+e,i=r_.get(r);if(i)return i;let s=this.options.loose,o=s?Yt[Ut.HYPHENRANGELOOSE]:Yt[Ut.HYPHENRANGE];e=e.replace(o,ZD(this.options.includePrerelease)),Ge("hyphen replace",e),e=e.replace(Yt[Ut.COMPARATORTRIM],jD),Ge("comparator trim",e),e=e.replace(Yt[Ut.TILDETRIM],AD),Ge("tilde trim",e),e=e.replace(Yt[Ut.CARETTRIM],$D),Ge("caret trim",e);let a=e.split(" ").map(C=>KD(C,this.options)).join(" ").split(/\s+/).map(C=>YD(C,this.options));s&&(a=a.filter(C=>(Ge("loose invalid filter",C,this.options),!!C.match(Yt[Ut.COMPARATORLOOSE])))),Ge("range list",a);let u=new Map,h=a.map(C=>new ch(C,this.options));for(let C of h){if(i_(C))return[C];u.set(C.value,C)}u.size>1&&u.has("")&&u.delete("");let g=[...u.values()];return r_.set(r,g),g}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some(r=>s_(r,t)&&e.set.some(i=>s_(i,t)&&r.every(s=>i.every(o=>s.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new LD(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(eT(this.set[t],e,this.options))return!0;return!1}};o_.exports=ah;var FD=IC(),r_=new FD,MD=Ea(),ch=n_(),Ge=ys(),LD=vs(),{safeRe:Yt,t:Ut,comparatorTrimReplace:jD,tildeTrimReplace:AD,caretTrimReplace:$D}=Pa(),{FLAG_INCLUDE_PRERELEASE:HD,FLAG_LOOSE:UD}=Ta(),i_=n=>n.value==="<0.0.0-0",WD=n=>n.value==="",s_=(n,e)=>{let t=!0,r=n.slice(),i=r.pop();for(;t&&r.length;)t=r.every(s=>i.intersects(s,e)),i=r.pop();return t},KD=(n,e)=>(Ge("comp",n,e),n=BD(n,e),Ge("caret",n),n=zD(n,e),Ge("tildes",n),n=XD(n,e),Ge("xrange",n),n=QD(n,e),Ge("stars",n),n),Wt=n=>!n||n.toLowerCase()==="x"||n==="*",zD=(n,e)=>n.trim().split(/\s+/).map(t=>VD(t,e)).join(" "),VD=(n,e)=>{let t=e.loose?Yt[Ut.TILDELOOSE]:Yt[Ut.TILDE];return n.replace(t,(r,i,s,o,a)=>{Ge("tilde",n,r,i,s,o,a);let u;return Wt(i)?u="":Wt(s)?u=`>=${i}.0.0 <${+i+1}.0.0-0`:Wt(o)?u=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Ge("replaceTilde pr",a),u=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):u=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Ge("tilde return",u),u})},BD=(n,e)=>n.trim().split(/\s+/).map(t=>GD(t,e)).join(" "),GD=(n,e)=>{Ge("caret",n,e);let t=e.loose?Yt[Ut.CARETLOOSE]:Yt[Ut.CARET],r=e.includePrerelease?"-0":"";return n.replace(t,(i,s,o,a,u)=>{Ge("caret",n,i,s,o,a,u);let h;return Wt(s)?h="":Wt(o)?h=`>=${s}.0.0${r} <${+s+1}.0.0-0`:Wt(a)?s==="0"?h=`>=${s}.${o}.0${r} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.0${r} <${+s+1}.0.0-0`:u?(Ge("replaceCaret pr",u),s==="0"?o==="0"?h=`>=${s}.${o}.${a}-${u} <${s}.${o}.${+a+1}-0`:h=`>=${s}.${o}.${a}-${u} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.${a}-${u} <${+s+1}.0.0-0`):(Ge("no pr"),s==="0"?o==="0"?h=`>=${s}.${o}.${a}${r} <${s}.${o}.${+a+1}-0`:h=`>=${s}.${o}.${a}${r} <${s}.${+o+1}.0-0`:h=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Ge("caret return",h),h})},XD=(n,e)=>(Ge("replaceXRanges",n,e),n.split(/\s+/).map(t=>JD(t,e)).join(" ")),JD=(n,e)=>{n=n.trim();let t=e.loose?Yt[Ut.XRANGELOOSE]:Yt[Ut.XRANGE];return n.replace(t,(r,i,s,o,a,u)=>{Ge("xRange",n,r,i,s,o,a,u);let h=Wt(s),g=h||Wt(o),C=g||Wt(a),y=C;return i==="="&&y&&(i=""),u=e.includePrerelease?"-0":"",h?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&y?(g&&(o=0),a=0,i===">"?(i=">=",g?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",g?s=+s+1:o=+o+1),i==="<"&&(u="-0"),r=`${i+s}.${o}.${a}${u}`):g?r=`>=${s}.0.0${u} <${+s+1}.0.0-0`:C&&(r=`>=${s}.${o}.0${u} <${s}.${+o+1}.0-0`),Ge("xRange return",r),r})},QD=(n,e)=>(Ge("replaceStars",n,e),n.trim().replace(Yt[Ut.STAR],"")),YD=(n,e)=>(Ge("replaceGTE0",n,e),n.trim().replace(Yt[e.includePrerelease?Ut.GTE0PRE:Ut.GTE0],"")),ZD=n=>(e,t,r,i,s,o,a,u,h,g,C,y)=>(Wt(r)?t="":Wt(i)?t=`>=${r}.0.0${n?"-0":""}`:Wt(s)?t=`>=${r}.${i}.0${n?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${n?"-0":""}`,Wt(h)?u="":Wt(g)?u=`<${+h+1}.0.0-0`:Wt(C)?u=`<${h}.${+g+1}.0-0`:y?u=`<=${h}.${g}.${C}-${y}`:n?u=`<${h}.${g}.${+C+1}-0`:u=`<=${u}`,`${t} ${u}`.trim()),eT=(n,e,t)=>{for(let r=0;r<n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let r=0;r<n.length;r++)if(Ge(n[r].semver),n[r].semver!==ch.ANY&&n[r].semver.prerelease.length>0){let i=n[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var c_=O((jE,a_)=>{var tT=oh(),nT=(n,e,t)=>{try{e=new tT(e,t)}catch{return!1}return e.test(n)};a_.exports=nT});var d_=O(yn=>{"use strict";var rT=yn&&yn.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),uh=yn&&yn.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&rT(e,n,t)};Object.defineProperty(yn,"__esModule",{value:!0});yn.DiagnosticPullMode=yn.vsdiag=void 0;uh(he(),yn);uh(Pe(),yn);var u_=gl();Object.defineProperty(yn,"vsdiag",{enumerable:!0,get:function(){return u_.vsdiag}});Object.defineProperty(yn,"DiagnosticPullMode",{enumerable:!0,get:function(){return u_.DiagnosticPullMode}});uh(Qf(),yn)});var p_=O(Zt=>{"use strict";var iT=Zt&&Zt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),h_=Zt&&Zt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&iT(e,n,t)};Object.defineProperty(Zt,"__esModule",{value:!0});Zt.SettingMonitor=Zt.LanguageClient=Zt.TransportKind=void 0;var ir=require("child_process"),dh=require("fs"),lh=require("path"),Dr=require("vscode"),Ze=Rn(),l_=Qf(),sT=gC(),rt=Yf(),oT=OC(),aT=c_();h_(Yf(),Zt);h_(d_(),Zt);var f_="^1.82.0",it;(function(n){n[n.stdio=0]="stdio",n[n.ipc=1]="ipc",n[n.pipe=2]="pipe",n[n.socket=3]="socket"})(it||(Zt.TransportKind=it={}));var Sr;(function(n){function e(t){let r=t;return r&&r.kind===it.socket&&Ze.number(r.port)}n.isSocket=e})(Sr||(Sr={}));var fh;(function(n){function e(t){return Ze.string(t.command)}n.is=e})(fh||(fh={}));var hh;(function(n){function e(t){return Ze.string(t.module)}n.is=e})(hh||(hh={}));var ph;(function(n){function e(t){let r=t;return r&&r.writer!==void 0&&r.reader!==void 0}n.is=e})(ph||(ph={}));var gh;(function(n){function e(t){let r=t;return r&&r.process!==void 0&&typeof r.detached=="boolean"}n.is=e})(gh||(gh={}));var mh=class extends l_.BaseLanguageClient{constructor(e,t,r,i,s){let o,a,u,h,g;Ze.string(t)?(o=e,a=t,u=r,h=i,g=!!s):(o=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&&(g=!1),super(o,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(C){throw Ze.string(C.message)&&this.outputChannel.appendLine(C.message),C}}checkVersion(){let e=oT(Dr.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${Dr.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!aT(e,f_))throw new Error(`The language client requires VS Code version ${f_} but received version ${Dr.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,sT.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function t(g,C){if(!g&&!C)return;let y=Object.create(null);return Object.keys(process.env).forEach(D=>y[D]=process.env[D]),C&&(y.ELECTRON_RUN_AS_NODE="1",y.ELECTRON_NO_ASAR="1"),g&&Object.keys(g).forEach(D=>y[D]=g[D]),y}let r=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function s(){let g=process.execArgv;return g?g.some(C=>r.some(y=>C.startsWith(y))||i.some(y=>C===y)):!1}function o(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error("Process created without stdio streams")}let a=this._serverOptions;if(Ze.func(a))return a().then(g=>{if(l_.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(ph.is(g))return this._isDetached=!!g.detached,{reader:new rt.StreamMessageReader(g.reader),writer:new rt.StreamMessageWriter(g.writer)};{let C;return gh.is(g)?(C=g.process,this._isDetached=g.detached):(C=g,this._isDetached=!1),C.stderr.on("data",y=>this.outputChannel.append(Ze.string(y)?y:y.toString(e))),{reader:new rt.StreamMessageReader(C.stdout),writer:new rt.StreamMessageWriter(C.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||s()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=>{if(hh.is(u)&&u.module){let C=u,y=C.transport||it.stdio;if(C.runtime){let D=[],v=C.options??Object.create(null);v.execArgv&&v.execArgv.forEach($=>D.push($)),D.push(C.module),C.args&&C.args.forEach($=>D.push($));let q=Object.create(null);q.cwd=g,q.env=t(v.env,!1);let k=this._getRuntimePath(C.runtime,g),A;if(y===it.ipc?(q.stdio=[null,null,null,"ipc"],D.push("--node-ipc")):y===it.stdio?D.push("--stdio"):y===it.pipe?(A=(0,rt.generateRandomPipeName)(),D.push(`--pipe=${A}`)):Sr.isSocket(y)&&D.push(`--socket=${y.port}`),D.push(`--clientProcessId=${process.pid.toString()}`),y===it.ipc||y===it.stdio){let $=ir.spawn(k,D,q);return!$||!$.pid?Oi($,`Launching server using runtime ${k} failed.`):(this._serverProcess=$,$.stderr.on("data",M=>this.outputChannel.append(Ze.string(M)?M:M.toString(e))),y===it.ipc?($.stdout.on("data",M=>this.outputChannel.append(Ze.string(M)?M:M.toString(e))),Promise.resolve({reader:new rt.IPCMessageReader($),writer:new rt.IPCMessageWriter($)})):Promise.resolve({reader:new rt.StreamMessageReader($.stdout),writer:new rt.StreamMessageWriter($.stdin)}))}else{if(y===it.pipe)return(0,rt.createClientPipeTransport)(A).then($=>{let M=ir.spawn(k,D,q);return!M||!M.pid?Oi(M,`Launching server using runtime ${k} failed.`):(this._serverProcess=M,M.stderr.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),M.stdout.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),$.onConnected().then(W=>({reader:W[0],writer:W[1]})))});if(Sr.isSocket(y))return(0,rt.createClientSocketTransport)(y.port).then($=>{let M=ir.spawn(k,D,q);return!M||!M.pid?Oi(M,`Launching server using runtime ${k} failed.`):(this._serverProcess=M,M.stderr.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),M.stdout.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),$.onConnected().then(W=>({reader:W[0],writer:W[1]})))})}}else{let D;return new Promise((v,q)=>{let k=(C.args&&C.args.slice())??[];y===it.ipc?k.push("--node-ipc"):y===it.stdio?k.push("--stdio"):y===it.pipe?(D=(0,rt.generateRandomPipeName)(),k.push(`--pipe=${D}`)):Sr.isSocket(y)&&k.push(`--socket=${y.port}`),k.push(`--clientProcessId=${process.pid.toString()}`);let A=C.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,y===it.ipc||y===it.stdio){let $=ir.fork(C.module,k||[],A);o($),this._serverProcess=$,$.stderr.on("data",M=>this.outputChannel.append(Ze.string(M)?M:M.toString(e))),y===it.ipc?($.stdout.on("data",M=>this.outputChannel.append(Ze.string(M)?M:M.toString(e))),v({reader:new rt.IPCMessageReader(this._serverProcess),writer:new rt.IPCMessageWriter(this._serverProcess)})):v({reader:new rt.StreamMessageReader($.stdout),writer:new rt.StreamMessageWriter($.stdin)})}else y===it.pipe?(0,rt.createClientPipeTransport)(D).then($=>{let M=ir.fork(C.module,k||[],A);o(M),this._serverProcess=M,M.stderr.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),M.stdout.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),$.onConnected().then(W=>{v({reader:W[0],writer:W[1]})},q)},q):Sr.isSocket(y)&&(0,rt.createClientSocketTransport)(y.port).then($=>{let M=ir.fork(C.module,k||[],A);o(M),this._serverProcess=M,M.stderr.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),M.stdout.on("data",W=>this.outputChannel.append(Ze.string(W)?W:W.toString(e))),$.onConnected().then(W=>{v({reader:W[0],writer:W[1]})},q)},q)})}}else if(fh.is(u)&&u.command){let C=u,y=u.args!==void 0?u.args.slice(0):[],D,v=u.transport;if(v===it.stdio)y.push("--stdio");else if(v===it.pipe)D=(0,rt.generateRandomPipeName)(),y.push(`--pipe=${D}`);else if(Sr.isSocket(v))y.push(`--socket=${v.port}`);else if(v===it.ipc)throw new Error("Transport kind ipc is not support for command executable");let q=Object.assign({},C.options);if(q.cwd=q.cwd||g,v===void 0||v===it.stdio){let k=ir.spawn(C.command,y,q);return!k||!k.pid?Oi(k,`Launching server using command ${C.command} failed.`):(k.stderr.on("data",A=>this.outputChannel.append(Ze.string(A)?A:A.toString(e))),this._serverProcess=k,this._isDetached=!!q.detached,Promise.resolve({reader:new rt.StreamMessageReader(k.stdout),writer:new rt.StreamMessageWriter(k.stdin)}))}else{if(v===it.pipe)return(0,rt.createClientPipeTransport)(D).then(k=>{let A=ir.spawn(C.command,y,q);return!A||!A.pid?Oi(A,`Launching server using command ${C.command} failed.`):(this._serverProcess=A,this._isDetached=!!q.detached,A.stderr.on("data",$=>this.outputChannel.append(Ze.string($)?$:$.toString(e))),A.stdout.on("data",$=>this.outputChannel.append(Ze.string($)?$:$.toString(e))),k.onConnected().then($=>({reader:$[0],writer:$[1]})))});if(Sr.isSocket(v))return(0,rt.createClientSocketTransport)(v.port).then(k=>{let A=ir.spawn(C.command,y,q);return!A||!A.pid?Oi(A,`Launching server using command ${C.command} failed.`):(this._serverProcess=A,this._isDetached=!!q.detached,A.stderr.on("data",$=>this.outputChannel.append(Ze.string($)?$:$.toString(e))),A.stdout.on("data",$=>this.outputChannel.append(Ze.string($)?$:$.toString(e))),k.onConnected().then($=>({reader:$[0],writer:$[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(g,C)=>{g!==null&&this.error(`Server process exited with code ${g}.`,void 0,!1),C!==null&&this.error(`Server process exited with signal ${C}.`,void 0,!1)})})}_getRuntimePath(e,t){if(lh.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=lh.join(r,e);if(dh.existsSync(i))return i}if(t!==void 0){let i=lh.join(t,e);if(dh.existsSync(i))return i}return e}_mainGetRootPath(){let e=Dr.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme==="file")return t.uri.fsPath}_getServerWorkingDir(e){let t=e&&e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=>{dh.lstat(t,(i,s)=>{r(!i&&s.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}};Zt.LanguageClient=mh;var yh=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return Dr.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new Dr.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,r=e>=0?this._setting.substr(e+1):void 0,i=r?Dr.workspace.getConfiguration(t).get(r,!1):Dr.workspace.getConfiguration(t);i&&this._client.needsStart()?this._client.start().catch(s=>this._client.error("Start failed after configuration change",s,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(s=>this._client.error("Stop failed after configuration change",s,"force"))}};Zt.SettingMonitor=yh;function Oi(n,e){return n===null?Promise.reject(e):new Promise((t,r)=>{n.on("error",i=>{r(`${e} ${i}`)}),setImmediate(()=>r(e))})}});var cT={};T_(cT,{activate:()=>v_,deactivate:()=>C_});module.exports=P_(cT);var g_=Rh(Zh()),vh=require("vscode"),m_=Rh(p_()),Oa=require("path"),y_=require("os"),xa=null,Tr=vh.workspace.getConfiguration("c3.lsp");module.exports={activate:v_,deactivate:C_};function v_(n){if(!Tr.get("enable"))return;let t=Tr.get("path");if(t=="")switch((0,y_.platform)()){case"win32":{t=(0,Oa.join)(n.extensionPath,"c3-lsp-win.exe");break}case"darwin":{t=(0,Oa.join)(n.extensionPath,"c3-lsp-macos");break}case"linux":{t=(0,Oa.join)(n.extensionPath,"c3-lsp-linux");break}}let r=[];Tr.get("sendCrashReports")&&r.push("--send-crash-reports"),Tr.get("log.path")!=""&&r.push("--log-path "+Tr.get("log.path")),Tr.get("version")!=""&&r.push("--lang-version "+Tr.get("version"));let i={run:{command:t,args:r},debug:{command:t,args:r,options:{execArgv:["--nolazy","--inspect=6009"]}}},s={documentSelector:[{scheme:"file",language:"c3"}],synchronize:{fileEvents:vh.workspace.createFileSystemWatcher("**/*.c3")}};xa=new m_.LanguageClient("C3LSP",i,s),Tr.get("debug")&&xa.setTrace(g_.Trace.Verbose),xa.start()}function C_(){return xa.stop()}0&&(module.exports={activate,deactivate});
